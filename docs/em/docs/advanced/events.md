# ğŸ”† ğŸ‰

ğŸ‘† ğŸ’ª ğŸ”¬ âš› (ğŸ“Ÿ) ğŸ‘ˆ ğŸ”œ ğŸ› ï¸ â­ ğŸˆ¸ **â–¶ï¸ ğŸ†™**. ğŸ‘‰ â›“ ğŸ‘ˆ ğŸ‘‰ ğŸ“Ÿ ğŸ”œ ğŸ› ï¸ **ğŸ•**, **â­** ğŸˆ¸ **â–¶ï¸ ğŸ“¨ ğŸ“¨**.

ğŸ ğŸŒŒ, ğŸ‘† ğŸ’ª ğŸ”¬ âš› (ğŸ“Ÿ) ğŸ‘ˆ ğŸ”œ ğŸ› ï¸ ğŸ•â” ğŸˆ¸ **ğŸ¤« ğŸ”½**. ğŸ‘‰ ğŸ’¼, ğŸ‘‰ ğŸ“Ÿ ğŸ”œ ğŸ› ï¸ **ğŸ•**, **â®ï¸** âœ”ï¸ ğŸµ ğŸ² **ğŸ“š ğŸ“¨**.

â†©ï¸ ğŸ‘‰ ğŸ“Ÿ ğŸ› ï¸ â­ ğŸˆ¸ **â–¶ï¸** âœŠ ğŸ“¨, &amp; â–¶ï¸ï¸ â®ï¸ âš«ï¸ **ğŸ** ğŸšš ğŸ“¨, âš«ï¸ ğŸ“” ğŸ‚ ğŸˆ¸ **ğŸ”†** (ğŸ”¤ "ğŸ”†" ğŸ”œ âš  ğŸ¥ˆ ğŸ‘¶).

ğŸ‘‰ ğŸ’ª ğŸ“¶ âš  âš’ ğŸ†™ **â„¹** ğŸ‘ˆ ğŸ‘† ğŸ’ª âš™ï¸ ğŸ‚ ğŸ“±, &amp; ğŸ‘ˆ **ğŸ’°** ğŸ‘ª ğŸ“¨, &amp;/âš–ï¸ ğŸ‘ˆ ğŸ‘† ğŸ’ª **ğŸ§¹ ğŸ†™** â®ï¸. ğŸ–¼, ğŸ’½ ğŸ”— ğŸ±, âš–ï¸ ğŸšš ğŸ”— ğŸ° ğŸ« ğŸ·.

## âš™ï¸ ğŸ’¼

â¡ï¸ â–¶ï¸ â®ï¸ ğŸ–¼ **âš™ï¸ ğŸ’¼** &amp; â¤´ï¸ ğŸ‘€ â” â âš«ï¸ â®ï¸ ğŸ‘‰.

â¡ï¸ ğŸŒˆ ğŸ‘ˆ ğŸ‘† âœ”ï¸ **ğŸ° ğŸ« ğŸ·** ğŸ‘ˆ ğŸ‘† ğŸ’š âš™ï¸ ğŸµ ğŸ“¨. ğŸ‘¶

ğŸ ğŸ· ğŸ”— ğŸ‘ª ğŸ“¨,, âš«ï¸ ğŸš« 1ï¸âƒ£ ğŸ· ğŸ“ ğŸ“¨, âš–ï¸ 1ï¸âƒ£ ğŸ“ ğŸ‘©â€ğŸ’» âš–ï¸ ğŸ•³ ğŸ.

â¡ï¸ ğŸŒˆ ğŸ‘ˆ ğŸšš ğŸ· ğŸ’ª **âœŠ ğŸ•°**, â†©ï¸ âš«ï¸ âœ”ï¸ âœ ğŸ“š **ğŸ’½ âšªï¸â¡ï¸ ğŸ’¾**. ğŸ‘† ğŸš« ğŸ’š âš«ï¸ ğŸ”  ğŸ“¨.

ğŸ‘† ğŸ’ª ğŸ“ âš«ï¸ ğŸ” ğŸš ğŸ•¹/ğŸ“, âœ‹ï¸ ğŸ‘ˆ ğŸ”œ â›“ ğŸ‘ˆ âš«ï¸ ğŸ”œ **ğŸ“ ğŸ·** ğŸš¥ ğŸ‘† ğŸƒâ€â™‚ ğŸ™… ğŸ§ ğŸ’¯, â¤´ï¸ ğŸ‘ˆ ğŸ’¯ ğŸ”œ **ğŸŒ** â†©ï¸ âš«ï¸ ğŸ”œ âœ”ï¸ âŒ› ğŸ· ğŸ“ â­ ğŸ’†â€â™‚ ğŸ’ª ğŸƒ ğŸ”¬ ğŸ• ğŸ“Ÿ.

ğŸ‘ˆ âš«ï¸â” ğŸ‘¥ ğŸ”œ â, â¡ï¸ ğŸ“ ğŸ· â­ ğŸ“¨ ğŸµ, âœ‹ï¸ ğŸ•´ â–¶ï¸ï¸ â­ ğŸˆ¸ â–¶ï¸ ğŸ“¨ ğŸ“¨, ğŸš« âª ğŸ“Ÿ â– ğŸ“.

## ğŸ”†

ğŸ‘† ğŸ’ª ğŸ”¬ ğŸ‘‰ *ğŸ•´* &amp; *ğŸ¤«* âš› âš™ï¸ `lifespan` ğŸ”¢ `FastAPI` ğŸ“±, &amp; "ğŸ”‘ ğŸ‘¨â€ğŸ’¼" (ğŸ‘¤ ğŸ”œ ğŸ¦ ğŸ‘† âš«ï¸â” ğŸ‘ˆ ğŸ¥ˆ).

â¡ï¸ â–¶ï¸ â®ï¸ ğŸ–¼ &amp; â¤´ï¸ ğŸ‘€ âš«ï¸ â„¹.

ğŸ‘¥ âœ ğŸ” ğŸ”¢ `lifespan()` â®ï¸ `yield` ğŸ’– ğŸ‘‰:

```Python hl_lines="16  19"
{!../../../docs_src/events/tutorial003.py!}
```

ğŸ“¥ ğŸ‘¥ âš– ğŸ˜¥ *ğŸ•´* ğŸ› ï¸ ğŸšš ğŸ· ğŸš® (âŒ) ğŸ· ğŸ”¢ ğŸ“– â®ï¸ ğŸ° ğŸ« ğŸ· â­ `yield`. ğŸ‘‰ ğŸ“Ÿ ğŸ”œ ğŸ› ï¸ **â­** ğŸˆ¸ **â–¶ï¸ âœŠ ğŸ“¨**, â®ï¸ *ğŸ•´*.

&amp; â¤´ï¸, â–¶ï¸ï¸ â®ï¸ `yield`, ğŸ‘¥ ğŸšš ğŸ·. ğŸ‘‰ ğŸ“Ÿ ğŸ”œ ğŸ› ï¸ **â®ï¸** ğŸˆ¸ **ğŸ ğŸšš ğŸ“¨**, â–¶ï¸ï¸ â­ *ğŸ¤«*. ğŸ‘‰ ğŸ’ª, ğŸ–¼, ğŸš€ â„¹ ğŸ’– ğŸ’¾ âš–ï¸ ğŸ’».

!!! tip
     `shutdown` ğŸ”œ ğŸ”¨ ğŸ•â” ğŸ‘† **â›”ï¸** ğŸˆ¸.

    ğŸ² ğŸ‘† ğŸ’ª â–¶ï¸ ğŸ†• â¬, âš–ï¸ ğŸ‘† ğŸ¤š ğŸ¡ ğŸƒ âš«ï¸. ğŸ¤·

### ğŸ”† ğŸ”¢

ğŸ¥‡ ğŸ‘œ ğŸ‘€, ğŸ‘ˆ ğŸ‘¥ âš– ğŸ” ğŸ”¢ â®ï¸ `yield`. ğŸ‘‰ ğŸ“¶ ğŸ ğŸ”— â®ï¸ `yield`.

```Python hl_lines="14-19"
{!../../../docs_src/events/tutorial003.py!}
```

ğŸ¥‡ ğŸ• ğŸ”¢, â­ `yield`, ğŸ”œ ğŸ› ï¸ **â­** ğŸˆ¸ â–¶ï¸.

&amp; ğŸ• â®ï¸ `yield` ğŸ”œ ğŸ› ï¸ **â®ï¸** ğŸˆ¸ âœ”ï¸ ğŸ.

### ğŸ” ğŸ”‘ ğŸ‘¨â€ğŸ’¼

ğŸš¥ ğŸ‘† âœ…, ğŸ”¢ ğŸ€ â®ï¸ `@asynccontextmanager`.

ğŸ‘ˆ ğŸ—œ ğŸ”¢ ğŸ”˜ ğŸ•³ ğŸ¤™ "**ğŸ” ğŸ”‘ ğŸ‘¨â€ğŸ’¼**".

```Python hl_lines="1  13"
{!../../../docs_src/events/tutorial003.py!}
```

**ğŸ”‘ ğŸ‘¨â€ğŸ’¼** ğŸ ğŸ•³ ğŸ‘ˆ ğŸ‘† ğŸ’ª âš™ï¸ `with` ğŸ“„, ğŸ–¼, `open()` ğŸ’ª âš™ï¸ ğŸ”‘ ğŸ‘¨â€ğŸ’¼:

```Python
with open("file.txt") as file:
    file.read()
```

â®ï¸ â¬ ğŸ, ğŸ“¤ **ğŸ” ğŸ”‘ ğŸ‘¨â€ğŸ’¼**. ğŸ‘† ğŸ”œ âš™ï¸ âš«ï¸ â®ï¸ `async with`:

```Python
async with lifespan(app):
    await do_stuff()
```

ğŸ•â” ğŸ‘† âœ ğŸ”‘ ğŸ‘¨â€ğŸ’¼ âš–ï¸ ğŸ” ğŸ”‘ ğŸ‘¨â€ğŸ’¼ ğŸ’– ğŸ”›, âš«ï¸â” âš«ï¸ ğŸ”¨ ğŸ‘ˆ, â­ ğŸ›¬ `with` ğŸ«, âš«ï¸ ğŸ”œ ğŸ› ï¸ ğŸ“Ÿ â­ `yield`, &amp; â®ï¸ â `with` ğŸ«, âš«ï¸ ğŸ”œ ğŸ› ï¸ ğŸ“Ÿ â®ï¸ `yield`.

ğŸ‘† ğŸ“Ÿ ğŸ–¼ ğŸ”›, ğŸ‘¥ ğŸš« âš™ï¸ âš«ï¸ ğŸ”—, âœ‹ï¸ ğŸ‘¥ ğŸš¶â€â™€ï¸ âš«ï¸ FastAPI âš«ï¸ âš™ï¸ âš«ï¸.

`lifespan` ğŸ”¢ `FastAPI` ğŸ“± âœŠ **ğŸ” ğŸ”‘ ğŸ‘¨â€ğŸ’¼**, ğŸ‘¥ ğŸ’ª ğŸš¶â€â™€ï¸ ğŸ‘† ğŸ†• `lifespan` ğŸ” ğŸ”‘ ğŸ‘¨â€ğŸ’¼ âš«ï¸.

```Python hl_lines="22"
{!../../../docs_src/events/tutorial003.py!}
```

## ğŸ› ğŸ‰ (ğŸ˜¢)

!!! warning
    ğŸ‘ ğŸŒŒ ğŸµ *ğŸ•´* &amp; *ğŸ¤«* âš™ï¸ `lifespan` ğŸ”¢ `FastAPI` ğŸ“± ğŸ”¬ ğŸ”›.

    ğŸ‘† ğŸ’ª ğŸ² ğŸš¶ ğŸ‘‰ ğŸ•.

ğŸ“¤ ğŸ› ğŸŒŒ ğŸ”¬ ğŸ‘‰ âš› ğŸ› ï¸ â®ï¸ *ğŸ•´* &amp; â®ï¸ *ğŸ¤«*.

ğŸ‘† ğŸ’ª ğŸ”¬ ğŸ‰ ğŸ•â€ğŸ¦º (ğŸ”¢) ğŸ‘ˆ ğŸ’ª ğŸ› ï¸ â­ ğŸˆ¸ â–¶ï¸ ğŸ†™, âš–ï¸ ğŸ•â” ğŸˆ¸ ğŸ¤« ğŸ”½.

ğŸ‘« ğŸ”¢ ğŸ’ª ğŸ“£ â®ï¸ `async def` âš–ï¸ ğŸ˜ `def`.

### `startup` ğŸ‰

ğŸš® ğŸ”¢ ğŸ‘ˆ ğŸ”œ ğŸƒ â­ ğŸˆ¸ â–¶ï¸, ğŸ“£ âš«ï¸ â®ï¸ ğŸ‰ `"startup"`:

```Python hl_lines="8"
{!../../../docs_src/events/tutorial001.py!}
```

ğŸ‘‰ ğŸ’¼, `startup` ğŸ‰ ğŸ•â€ğŸ¦º ğŸ”¢ ğŸ”œ ğŸ”¢ ğŸ¬ "ğŸ’½" ( `dict`) â®ï¸ ğŸ’².

ğŸ‘† ğŸ’ª ğŸš® ğŸŒ… ğŸŒ˜ 1ï¸âƒ£ ğŸ‰ ğŸ•â€ğŸ¦º ğŸ”¢.

&amp; ğŸ‘† ğŸˆ¸ ğŸ† ğŸš« â–¶ï¸ ğŸ“¨ ğŸ“¨ â­ ğŸŒ `startup` ğŸ‰ ğŸ•â€ğŸ¦º âœ”ï¸ ğŸ.

### `shutdown` ğŸ‰

ğŸš® ğŸ”¢ ğŸ‘ˆ ğŸ”œ ğŸƒ ğŸ•â” ğŸˆ¸ ğŸ¤« ğŸ”½, ğŸ“£ âš«ï¸ â®ï¸ ğŸ‰ `"shutdown"`:

```Python hl_lines="6"
{!../../../docs_src/events/tutorial002.py!}
```

ğŸ“¥, `shutdown` ğŸ‰ ğŸ•â€ğŸ¦º ğŸ”¢ ğŸ”œ âœ âœ â¸ `"Application shutdown"` ğŸ“ `log.txt`.

!!! info
     `open()` ğŸ”¢, `mode="a"` â›“ "ğŸ»",, â¸ ğŸ”œ ğŸš® â®ï¸ âš«ï¸â” ğŸ”› ğŸ‘ˆ ğŸ“, ğŸµ ğŸ“ â®ï¸ ğŸš.

!!! tip
    ğŸ‘€ ğŸ‘ˆ ğŸ‘‰ ğŸ’¼ ğŸ‘¥ âš™ï¸ ğŸ© ğŸ `open()` ğŸ”¢ ğŸ‘ˆ ğŸ”— â®ï¸ ğŸ“.

    , âš«ï¸ ğŸ”Œ ğŸ‘¤/ğŸ…¾ (ğŸ”¢/ğŸ”¢), ğŸ‘ˆ ğŸšš "âŒ›" ğŸ‘œ âœ ğŸ’¾.

    âœ‹ï¸ `open()` ğŸš« âš™ï¸ `async` &amp; `await`.

    , ğŸ‘¥ ğŸ“£ ğŸ‰ ğŸ•â€ğŸ¦º ğŸ”¢ â®ï¸ ğŸ© `def` â†©ï¸ `async def`.

!!! info
    ğŸ‘† ğŸ’ª âœ ğŸŒ… ğŸ”ƒ ğŸ‘« ğŸ‰ ğŸ•â€ğŸ¦º <a href="https://www.starlette.io/events/" class="external-link" target="_blank">ğŸ’ƒ ğŸ‰' ğŸ©º</a>.

### `startup` &amp; `shutdown` ğŸ‘¯â€â™‚ï¸

ğŸ“¤ â†• ğŸ¤ ğŸ‘ˆ âš› ğŸ‘† *ğŸ•´* &amp; *ğŸ¤«* ğŸ”—, ğŸ‘† ğŸ’ª ğŸ’š â–¶ï¸ ğŸ•³ &amp; â¤´ï¸ ğŸ âš«ï¸, ğŸ“ â„¹ &amp; â¤´ï¸ ğŸš€ âš«ï¸, â™’ï¸.

ğŸ”¨ ğŸ‘ˆ ğŸ‘½ ğŸ”¢ ğŸ‘ˆ ğŸš« ğŸ’° âš› âš–ï¸ ğŸ”¢ ğŸ‘¯â€â™‚ï¸ ğŸŒ… âš  ğŸ‘† ğŸ”œ ğŸ’ª ğŸª ğŸ’² ğŸŒ ğŸ”¢ âš–ï¸ ğŸ ğŸ±.

â†©ï¸ ğŸ‘ˆ, âš«ï¸ ğŸ”œ ğŸ‘ â†©ï¸ âš™ï¸ `lifespan` ğŸ”¬ ğŸ”›.

## ğŸ“¡ â„¹

ğŸ“¡ â„¹ ğŸ˜Ÿ ğŸ¤“. ğŸ‘¶

ğŸ”˜, ğŸ”« ğŸ“¡ ğŸ”§, ğŸ‘‰ ğŸ• <a href="https://asgi.readthedocs.io/en/latest/specs/lifespan.html" class="external-link" target="_blank">ğŸ”† ğŸ› ï¸</a>, &amp; âš«ï¸ ğŸ”¬ ğŸ‰ ğŸ¤™ `startup` &amp; `shutdown`.

## ğŸ§ ğŸˆ¸

ğŸ‘¶ âœ”ï¸ ğŸ¤¯ ğŸ‘ˆ ğŸ‘« ğŸ”† ğŸ‰ (ğŸ•´ &amp; ğŸ¤«) ğŸ”œ ğŸ•´ ğŸ› ï¸ ğŸ‘‘ ğŸˆ¸, ğŸš« [ğŸ§ ğŸˆ¸ - ğŸ—»](./sub-applications.md){.internal-link target=_blank}.

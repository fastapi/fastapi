# ğŸ’‚â€â™‚ - ğŸ¥‡ ğŸ”

â¡ï¸ ğŸŒˆ ğŸ‘ˆ ğŸ‘† âœ”ï¸ ğŸ‘† **ğŸ‘©â€ğŸ’»** ğŸ› ï¸ ğŸ†”.

&amp; ğŸ‘† âœ”ï¸ **ğŸ•¸** â•1ï¸âƒ£ ğŸ†” âš–ï¸ ğŸ â¡ ğŸ ğŸ†” (âš–ï¸ ğŸ“± ğŸˆ¸).

&amp; ğŸ‘† ğŸ’š âœ”ï¸ ğŸŒŒ ğŸ•¸ ğŸ”“ â®ï¸ ğŸ‘©â€ğŸ’», âš™ï¸ **ğŸ†”** &amp; **ğŸ”**.

ğŸ‘¥ ğŸ’ª âš™ï¸ **Oauth2ï¸âƒ£** ğŸ— ğŸ‘ˆ â®ï¸ **FastAPI**.

âœ‹ï¸ â¡ï¸ ğŸ–Š ğŸ‘† ğŸ•° ğŸ‘‚ ğŸŒ• ğŸ“ ğŸ”§ ğŸ” ğŸ‘ˆ ğŸ¥ ğŸ– â„¹ ğŸ‘† ğŸ’ª.

â¡ï¸ âš™ï¸ ğŸ§° ğŸšš **FastAPI** ğŸµ ğŸ’‚â€â™‚.

## â” âš«ï¸ ğŸ‘€

â¡ï¸ ğŸ¥‡ âš™ï¸ ğŸ“Ÿ &amp; ğŸ‘€ â” âš«ï¸ ğŸ‘·, &amp; â¤´ï¸ ğŸ‘¥ ğŸ”œ ğŸ‘Ÿ ğŸ”™ ğŸ¤” âš«ï¸â” ğŸ˜¥.

## âœ `main.py`

ğŸ“ ğŸ–¼ ğŸ“ `main.py`:

```Python
{!../../../docs_src/security/tutorial001.py!}
```

## ğŸƒ âš«ï¸

!!! info
    ğŸ¥‡ â <a href="https://andrew-d.github.io/python-multipart/" class="external-link" target="_blank">`python-multipart`</a>.

    ğŸ¤¶ â“‚. `pip install python-multipart`.

    ğŸ‘‰ â†©ï¸ **Oauth2ï¸âƒ£** âš™ï¸ "ğŸ“¨ ğŸ“Š" ğŸ“¨ `username` &amp; `password`.

ğŸƒ ğŸ–¼ â®ï¸:

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

## âœ… âš«ï¸

ğŸš¶ ğŸ“ ğŸ©º: <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

ğŸ‘† ğŸ”œ ğŸ‘€ ğŸ•³ ğŸ’– ğŸ‘‰:

<img src="/img/tutorial/security/image01.png">

!!! check "âœ” ğŸ”¼ â—"
    ğŸ‘† âª âœ”ï¸ âœ¨ ğŸ†• "âœ”" ğŸ”¼.

     &amp; ğŸ‘† *â¡ ğŸ› ï¸* âœ”ï¸ ğŸ¥ ğŸ”’ ğŸ”-â–¶ï¸ï¸ â†© ğŸ‘ˆ ğŸ‘† ğŸ’ª ğŸ–Š.

&amp; ğŸš¥ ğŸ‘† ğŸ–Š âš«ï¸, ğŸ‘† âœ”ï¸ ğŸ¥ âœ” ğŸ“¨ ğŸ† `username` &amp; `password` (&amp; ğŸ ğŸ“¦ ğŸ‘):

<img src="/img/tutorial/security/image02.png">

!!! note
    âš«ï¸ ğŸš« ğŸ¤” âš«ï¸â” ğŸ‘† ğŸ† ğŸ“¨, âš«ï¸ ğŸ† ğŸš« ğŸ‘·. âœ‹ï¸ ğŸ‘¥ ğŸ”œ ğŸ¤š ğŸ“¤.

ğŸ‘‰ â†—ï¸ ğŸš« ğŸ•¸ ğŸ ğŸ‘©â€ğŸ’», âœ‹ï¸ âš«ï¸ ğŸ‘‘ ğŸ§ ğŸ§° ğŸ“„ ğŸ–¥ ğŸŒ ğŸ‘† ğŸ› ï¸.

âš«ï¸ ğŸ’ª âš™ï¸ ğŸ•¸ ğŸ‰ (ğŸ‘ˆ ğŸ’ª ğŸ‘†).

âš«ï¸ ğŸ’ª âš™ï¸ ğŸ¥‰ ğŸ¥³ ğŸˆ¸ &amp; âš™ï¸.

&amp; âš«ï¸ ğŸ’ª âš™ï¸ ğŸ‘†, â„¹, âœ… &amp; ğŸ’¯ ğŸ ğŸˆ¸.

##  `password` ğŸ’§

ğŸ”œ â¡ï¸ ğŸš¶ ğŸ”™ ğŸ‘„ &amp; ğŸ¤” âš«ï¸â” ğŸŒ ğŸ‘ˆ.

`password` "ğŸ’§" 1ï¸âƒ£ ğŸŒŒ ("ğŸ’§") ğŸ”¬ Oauth2ï¸âƒ£, ğŸµ ğŸ’‚â€â™‚ &amp; ğŸ¤.

Oauth2ï¸âƒ£ ğŸ”§ ğŸ‘ˆ ğŸ‘©â€ğŸ’» âš–ï¸ ğŸ› ï¸ ğŸ’ª ğŸ”¬ ğŸ’½ ğŸ‘ˆ ğŸ”“ ğŸ‘©â€ğŸ’».

âœ‹ï¸ ğŸ‘‰ ğŸ’¼, ğŸ **FastAPI** ğŸˆ¸ ğŸ”œ ğŸµ ğŸ› ï¸ &amp; ğŸ¤.

, â¡ï¸ ğŸ“„ âš«ï¸ âšªï¸â¡ï¸ ğŸ‘ˆ ğŸ“‰ â˜ ğŸ‘:

* ğŸ‘©â€ğŸ’» ğŸ† `username` &amp; `password` ğŸ•¸, &amp; ğŸ¯ `Enter`.
* ğŸ•¸ (ğŸƒâ€â™‚ ğŸ‘©â€ğŸ’» ğŸ–¥) ğŸ“¨ ğŸ‘ˆ `username` &amp; `password` ğŸ¯ ğŸ“› ğŸ‘† ğŸ› ï¸ (ğŸ“£ â®ï¸ `tokenUrl="token"`).
* ğŸ› ï¸ âœ… ğŸ‘ˆ `username` &amp; `password`, &amp; ğŸ“¨ â®ï¸ "ğŸ¤" (ğŸ‘¥ ğŸš« ğŸ› ï¸ ğŸ™† ğŸ‘‰).
    *  "ğŸ¤" ğŸ» â®ï¸ ğŸš ğŸ‘ˆ ğŸ‘¥ ğŸ’ª âš™ï¸ âª âœ” ğŸ‘‰ ğŸ‘©â€ğŸ’».
    * ğŸ›, ğŸ¤ âš’ ğŸ•› â®ï¸ ğŸ•°.
        * , ğŸ‘©â€ğŸ’» ğŸ”œ âœ”ï¸ ğŸ•¹ ğŸ”„ â˜ âª.
        *  &amp; ğŸš¥ ğŸ¤ ğŸ“, âš  ğŸŒ˜. âš«ï¸ ğŸš« ğŸ’– ğŸ§² ğŸ”‘ ğŸ‘ˆ ğŸ”œ ğŸ‘· â™¾ (ğŸ† ğŸ’¼).
* ğŸ•¸ ğŸª ğŸ‘ˆ ğŸ¤ ğŸ• ğŸ‘±.
* ğŸ‘©â€ğŸ’» ğŸ–Š ğŸ•¸ ğŸš¶ â•1ï¸âƒ£ ğŸ“„ ğŸ•¸ ğŸ•¸ ğŸ“±.
* ğŸ•¸ ğŸ’ª â˜• ğŸŒ… ğŸ’½ âšªï¸â¡ï¸ ğŸ› ï¸.
    * âœ‹ï¸ âš«ï¸ ğŸ’ª ğŸ¤ ğŸ‘ˆ ğŸ¯ ğŸ”—.
    * , ğŸ”“ â®ï¸ ğŸ‘† ğŸ› ï¸, âš«ï¸ ğŸ“¨ ğŸš `Authorization` â®ï¸ ğŸ’² `Bearer ` â• ğŸ¤.
    * ğŸš¥ ğŸ¤ ğŸ”Œ `foobar`, ğŸš `Authorization` ğŸš ğŸ”œ: `Bearer foobar`.

## **FastAPI**'â“‚ `OAuth2PasswordBearer`

**FastAPI** ğŸšš ğŸ“š ğŸ§°, ğŸ ğŸš âš›, ğŸ› ï¸ ğŸ‘« ğŸ’‚â€â™‚ âš’.

ğŸ‘‰ ğŸ–¼ ğŸ‘¥ ğŸ”œ âš™ï¸ **Oauth2ï¸âƒ£**, â®ï¸ **ğŸ”** ğŸ’§, âš™ï¸ **ğŸ“¨** ğŸ¤. ğŸ‘¥ ğŸ‘ˆ âš™ï¸ `OAuth2PasswordBearer` ğŸ“.

!!! info
     "ğŸ“¨" ğŸ¤ ğŸš« ğŸ•´ ğŸ›.

    âœ‹ï¸ âš«ï¸ ğŸ† 1ï¸âƒ£ ğŸ‘† âš™ï¸ ğŸ’¼.

     &amp; âš«ï¸ ğŸ’ª ğŸ† ğŸ† âš™ï¸ ğŸ’¼, ğŸš¥ ğŸ‘† Oauth2ï¸âƒ£ ğŸ•´ &amp; ğŸ’­ âš«ï¸â” âš«ï¸â” ğŸ“¤ â•1ï¸âƒ£ ğŸ› ğŸ‘ˆ â™£ ğŸ‘» ğŸ‘† ğŸ’ª.

    ğŸ‘ˆ ğŸ’¼, **FastAPI** ğŸšš ğŸ‘† â®ï¸ ğŸ§° ğŸ— âš«ï¸.

ğŸ•â” ğŸ‘¥ âœ ğŸ‘ `OAuth2PasswordBearer` ğŸ“ ğŸ‘¥ ğŸš¶â€â™€ï¸ `tokenUrl` ğŸ”¢. ğŸ‘‰ ğŸ”¢ ğŸ”Œ ğŸ“› ğŸ‘ˆ ğŸ‘©â€ğŸ’» (ğŸ•¸ ğŸƒ ğŸ‘©â€ğŸ’» ğŸ–¥) ğŸ”œ âš™ï¸ ğŸ“¨ `username` &amp; `password` âœ” ğŸ¤š ğŸ¤.

```Python hl_lines="6"
{!../../../docs_src/security/tutorial001.py!}
```

!!! tip
    ğŸ“¥ `tokenUrl="token"` ğŸ”— âš– ğŸ“› `token` ğŸ‘ˆ ğŸ‘¥ ğŸš« âœ. âš«ï¸ âš– ğŸ“›, âš«ï¸ ğŸŒ“ `./token`.

    â†©ï¸ ğŸ‘¥ âš™ï¸ âš– ğŸ“›, ğŸš¥ ğŸ‘† ğŸ› ï¸ ğŸ” `https://example.com/`, â¤´ï¸ âš«ï¸ ğŸ”œ ğŸ”— `https://example.com/token`. âœ‹ï¸ ğŸš¥ ğŸ‘† ğŸ› ï¸ ğŸ” `https://example.com/api/v1/`, â¤´ï¸ âš«ï¸ ğŸ”œ ğŸ”— `https://example.com/api/v1/token`.

    âš™ï¸ âš– ğŸ“› âš  âš’ ğŸ’­ ğŸ‘† ğŸˆ¸ ğŸš§ ğŸ‘· ğŸ§ âš™ï¸ ğŸ’¼ ğŸ’– [â›… ğŸ—³](../../advanced/behind-a-proxy.md){.internal-link target=_blank}.

ğŸ‘‰ ğŸ”¢ ğŸš« âœ ğŸ‘ˆ ğŸ”— / *â¡ ğŸ› ï¸*, âœ‹ï¸ ğŸ“£ ğŸ‘ˆ ğŸ“› `/token` ğŸ”œ 1ï¸âƒ£ ğŸ‘ˆ ğŸ‘©â€ğŸ’» ğŸ”œ âš™ï¸ ğŸ¤š ğŸ¤. ğŸ‘ˆ â„¹ âš™ï¸ ğŸ—„, &amp; â¤´ï¸ ğŸ“ ğŸ› ï¸ ğŸ§¾ âš™ï¸.

ğŸ‘¥ ğŸ”œ ğŸ”œ âœ â˜‘ â¡ ğŸ› ï¸.

!!! info
    ğŸš¥ ğŸ‘† ğŸ“¶ âš  "âœ" ğŸ‘† ğŸ’ª ğŸ‘ ğŸ‘— ğŸ”¢ ğŸ“› `tokenUrl` â†©ï¸ `token_url`.

    ğŸ‘ˆ â†©ï¸ âš«ï¸ âš™ï¸ ğŸ ğŸ“› ğŸ—„ ğŸ”Œ. ğŸ‘ˆ ğŸš¥ ğŸ‘† ğŸ’ª ğŸ”¬ ğŸŒ… ğŸ”ƒ ğŸ™† ğŸ‘« ğŸ’‚â€â™‚ âš– ğŸ‘† ğŸ’ª ğŸ“ &amp; ğŸ“‹ âš«ï¸ ğŸ” ğŸŒ– â„¹ ğŸ”ƒ âš«ï¸.

`oauth2_scheme` ğŸ”¢ ğŸ‘ `OAuth2PasswordBearer`, âœ‹ï¸ âš«ï¸ "ğŸ‡§ğŸ‡²".

âš«ï¸ ğŸ’ª ğŸ¤™:

```Python
oauth2_scheme(some, parameters)
```

, âš«ï¸ ğŸ’ª âš™ï¸ â®ï¸ `Depends`.

### âš™ï¸ âš«ï¸

ğŸ”œ ğŸ‘† ğŸ’ª ğŸš¶â€â™€ï¸ ğŸ‘ˆ `oauth2_scheme` ğŸ”— â®ï¸ `Depends`.

```Python hl_lines="10"
{!../../../docs_src/security/tutorial001.py!}
```

ğŸ‘‰ ğŸ”— ğŸ”œ ğŸšš `str` ğŸ‘ˆ ğŸ› ï¸ ğŸ”¢ `token` *â¡ ğŸ› ï¸ ğŸ”¢*.

**FastAPI** ğŸ”œ ğŸ’­ ğŸ‘ˆ âš«ï¸ ğŸ’ª âš™ï¸ ğŸ‘‰ ğŸ”— ğŸ”¬ "ğŸ’‚â€â™‚ âš–" ğŸ—„ ğŸ”— (&amp; ğŸ§ ğŸ› ï¸ ğŸ©º).

!!! info "ğŸ“¡ â„¹"
    **FastAPI** ğŸ”œ ğŸ’­ ğŸ‘ˆ âš«ï¸ ğŸ’ª âš™ï¸ ğŸ“ `OAuth2PasswordBearer` (ğŸ“£ ğŸ”—) ğŸ”¬ ğŸ’‚â€â™‚ âš– ğŸ—„ â†©ï¸ âš«ï¸ ğŸ˜– âšªï¸â¡ï¸ `fastapi.security.oauth2.OAuth2`, â” ğŸ”„ ğŸ˜– âšªï¸â¡ï¸ `fastapi.security.base.SecurityBase`.

    ğŸŒ ğŸ’‚â€â™‚ ğŸš™ ğŸ‘ˆ ğŸ› ï¸ â®ï¸ ğŸ—„ (&amp; ğŸ§ ğŸ› ï¸ ğŸ©º) ğŸ˜– âšªï¸â¡ï¸ `SecurityBase`, ğŸ‘ˆ â” **FastAPI** ğŸ’ª ğŸ’­ â” ğŸ› ï¸ ğŸ‘« ğŸ—„.

## âš«ï¸â” âš«ï¸ ğŸ”¨

âš«ï¸ ğŸ”œ ğŸš¶ &amp; ğŸ‘€ ğŸ“¨ ğŸ‘ˆ `Authorization` ğŸš, âœ… ğŸš¥ ğŸ’² `Bearer ` â• ğŸ¤, &amp; ğŸ”œ ğŸ“¨ ğŸ¤ `str`.

ğŸš¥ âš«ï¸ ğŸš« ğŸ‘€ `Authorization` ğŸš, âš–ï¸ ğŸ’² ğŸš« âœ”ï¸ `Bearer ` ğŸ¤, âš«ï¸ ğŸ”œ ğŸ“¨ â®ï¸ 4ï¸âƒ£0ï¸âƒ£1ï¸âƒ£ ğŸ‘” ğŸ“Ÿ âŒ (`UNAUTHORIZED`) ğŸ”—.

ğŸ‘† ğŸš« âœ”ï¸ âœ… ğŸš¥ ğŸ¤ ğŸ”€ ğŸ“¨ âŒ. ğŸ‘† ğŸ’ª ğŸ’­ ğŸ‘ˆ ğŸš¥ ğŸ‘† ğŸ”¢ ğŸ› ï¸, âš«ï¸ ğŸ”œ âœ”ï¸ `str` ğŸ‘ˆ ğŸ¤.

ğŸ‘† ğŸ’ª ğŸ”„ âš«ï¸ âª ğŸ“ ğŸ©º:

<img src="/img/tutorial/security/image03.png">

ğŸ‘¥ ğŸš« âœ” ğŸ”¬ ğŸ¤, âœ‹ï¸ ğŸ‘ˆ â–¶ï¸ âª.

## ğŸŒƒ

, 3ï¸âƒ£ âš–ï¸ 4ï¸âƒ£ â• â¸, ğŸ‘† âª âœ”ï¸ ğŸ’ ğŸ“¨ ğŸ’‚â€â™‚.

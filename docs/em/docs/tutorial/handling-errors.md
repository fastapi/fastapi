# ğŸšš âŒ

ğŸ“¤ ğŸ“š âš  ğŸŒâ” ğŸ‘† ğŸ’ª ğŸš¨ âŒ ğŸ‘©â€ğŸ’» ğŸ‘ˆ âš™ï¸ ğŸ‘† ğŸ› ï¸.

ğŸ‘‰ ğŸ‘©â€ğŸ’» ğŸ’ª ğŸ–¥ â®ï¸ ğŸ•¸, ğŸ“Ÿ âšªï¸â¡ï¸ ğŸ‘± ğŸ™†, â˜ ğŸ“³, â™’ï¸.

ğŸ‘† ğŸ’ª ğŸ’ª ğŸ’¬ ğŸ‘©â€ğŸ’» ğŸ‘ˆ:

* ğŸ‘©â€ğŸ’» ğŸš« âœ”ï¸ ğŸ¥ƒ ğŸ˜Œ ğŸ‘ˆ ğŸ› ï¸.
* ğŸ‘©â€ğŸ’» ğŸš« âœ”ï¸ ğŸ” ğŸ‘ˆ â„¹.
* ğŸ¬ ğŸ‘©â€ğŸ’» ğŸ”„ ğŸ” ğŸš« ğŸ”€.
* â™’ï¸.

ğŸ‘« ğŸ’¼, ğŸ‘† ğŸ”œ ğŸ› ğŸ“¨ **ğŸ‡ºğŸ‡¸ğŸ” ğŸ‘” ğŸ“Ÿ** â†” **4ï¸âƒ£0ï¸âƒ£0ï¸âƒ£** (âšªï¸â¡ï¸ 4ï¸âƒ£0ï¸âƒ£0ï¸âƒ£ 4ï¸âƒ£9ï¸âƒ£9ï¸âƒ£).

ğŸ‘‰ ğŸ 2ï¸âƒ£0ï¸âƒ£0ï¸âƒ£ ğŸ‡ºğŸ‡¸ğŸ” ğŸ‘” ğŸ“Ÿ (âšªï¸â¡ï¸ 2ï¸âƒ£0ï¸âƒ£0ï¸âƒ£ 2ï¸âƒ£9ï¸âƒ£9ï¸âƒ£). ğŸ‘ˆ "2ï¸âƒ£0ï¸âƒ£0ï¸âƒ£" ğŸ‘” ğŸ“Ÿ â›“ ğŸ‘ˆ ğŸ˜« ğŸ“¤ "ğŸ†" ğŸ“¨.

ğŸ‘” ğŸ“Ÿ 4ï¸âƒ£0ï¸âƒ£0ï¸âƒ£ â†” â›“ ğŸ‘ˆ ğŸ“¤ âŒ âšªï¸â¡ï¸ ğŸ‘©â€ğŸ’».

ğŸ’­ ğŸŒ ğŸ‘ˆ **"4ï¸âƒ£0ï¸âƒ£4ï¸âƒ£ ğŸš« ğŸ”"** âŒ (&amp; ğŸ¤£) â“

## âš™ï¸ `HTTPException`

ğŸ“¨ ğŸ‡ºğŸ‡¸ğŸ” ğŸ“¨ â®ï¸ âŒ ğŸ‘©â€ğŸ’» ğŸ‘† âš™ï¸ `HTTPException`.

### ğŸ—„ `HTTPException`

```Python hl_lines="1"
{!../../../docs_src/handling_errors/tutorial001.py!}
```

### ğŸ¤š `HTTPException` ğŸ‘† ğŸ“Ÿ

`HTTPException` ğŸ˜ ğŸ âš  â®ï¸ ğŸŒ– ğŸ“Š ğŸ”— ğŸ”—.

â†©ï¸ âš«ï¸ ğŸ âš , ğŸ‘† ğŸš« `return` âš«ï¸, ğŸ‘† `raise` âš«ï¸.

ğŸ‘‰ â›“ ğŸ‘ˆ ğŸš¥ ğŸ‘† ğŸ”˜ ğŸš™ ğŸ”¢ ğŸ‘ˆ ğŸ‘† ğŸ¤™ ğŸ”˜ ğŸ‘† *â¡ ğŸ› ï¸ ğŸ”¢*, &amp; ğŸ‘† ğŸ¤š `HTTPException` âšªï¸â¡ï¸ ğŸ”˜ ğŸ‘ˆ ğŸš™ ğŸ”¢, âš«ï¸ ğŸ† ğŸš« ğŸƒ ğŸ‚ ğŸ“Ÿ *â¡ ğŸ› ï¸ ğŸ”¢*, âš«ï¸ ğŸ”œ â ğŸ‘ˆ ğŸ“¨ â–¶ï¸ï¸ â†–ï¸ &amp; ğŸ“¨ ğŸ‡ºğŸ‡¸ğŸ” âŒ âšªï¸â¡ï¸ `HTTPException` ğŸ‘©â€ğŸ’».

ğŸ’° ğŸ™‹â€â™€ âš  ğŸ¤­ `return`ğŸ˜… ğŸ’² ğŸ”œ ğŸŒ– â­ ğŸ“„ ğŸ”ƒ ğŸ”— &amp; ğŸ’‚â€â™‚.

ğŸ‘‰ ğŸ–¼, ğŸ•â” ğŸ‘©â€ğŸ’» ğŸ“¨ ğŸ¬ ğŸ†” ğŸ‘ˆ ğŸš« ğŸ”€, ğŸ¤š âš  â®ï¸ ğŸ‘” ğŸ“Ÿ `404`:

```Python hl_lines="11"
{!../../../docs_src/handling_errors/tutorial001.py!}
```

### ğŸ“‰ ğŸ“¨

ğŸš¥ ğŸ‘©â€ğŸ’» ğŸ“¨ `http://example.com/items/foo` ( `item_id` `"foo"`), ğŸ‘ˆ ğŸ‘©â€ğŸ’» ğŸ”œ ğŸ“¨ ğŸ‡ºğŸ‡¸ğŸ” ğŸ‘” ğŸ“Ÿ 2ï¸âƒ£0ï¸âƒ£0ï¸âƒ£, &amp; ğŸ» ğŸ“¨:

```JSON
{
  "item": "The Foo Wrestlers"
}
```

âœ‹ï¸ ğŸš¥ ğŸ‘©â€ğŸ’» ğŸ“¨ `http://example.com/items/bar` (ğŸš«-ğŸš« `item_id` `"bar"`), ğŸ‘ˆ ğŸ‘©â€ğŸ’» ğŸ”œ ğŸ“¨ ğŸ‡ºğŸ‡¸ğŸ” ğŸ‘” ğŸ“Ÿ 4ï¸âƒ£0ï¸âƒ£4ï¸âƒ£ ("ğŸš« ğŸ”" âŒ), &amp; ğŸ» ğŸ“¨:

```JSON
{
  "detail": "Item not found"
}
```

!!! tip
    ğŸ•â” ğŸ™‹â€â™€ `HTTPException`, ğŸ‘† ğŸ’ª ğŸš¶â€â™€ï¸ ğŸ™† ğŸ’² ğŸ‘ˆ ğŸ’ª ğŸ—œ ğŸ» ğŸ”¢ `detail`, ğŸš« ğŸ•´ `str`.

    ğŸ‘† ğŸ’ª ğŸš¶â€â™€ï¸ `dict`, `list`, â™’ï¸.

    ğŸ‘« ğŸµ ğŸ” **FastAPI** &amp; ğŸ—œ ğŸ».

## ğŸš® ğŸ›ƒ ğŸš

ğŸ“¤ âš  ğŸŒâ” âš«ï¸ âš  ğŸ’ª ğŸš® ğŸ›ƒ ğŸš ğŸ‡ºğŸ‡¸ğŸ” âŒ. ğŸ–¼, ğŸ† ğŸ’‚â€â™‚.

ğŸ‘† ğŸ² ğŸ† ğŸš« ğŸ’ª âš™ï¸ âš«ï¸ ğŸ”— ğŸ‘† ğŸ“Ÿ.

âœ‹ï¸ ğŸ’¼ ğŸ‘† ğŸ’ª âš«ï¸ ğŸ§ ğŸ˜, ğŸ‘† ğŸ’ª ğŸš® ğŸ›ƒ ğŸš:

```Python hl_lines="14"
{!../../../docs_src/handling_errors/tutorial002.py!}
```

## â ğŸ›ƒ âš  ğŸ•â€ğŸ¦º

ğŸ‘† ğŸ’ª ğŸš® ğŸ›ƒ âš  ğŸ•â€ğŸ¦º â®ï¸ <a href="https://www.starlette.io/exceptions/" class="external-link" target="_blank">ğŸ âš  ğŸš™ âšªï¸â¡ï¸ ğŸ’ƒ</a>.

â¡ï¸ ğŸ’¬ ğŸ‘† âœ”ï¸ ğŸ›ƒ âš  `UnicornException` ğŸ‘ˆ ğŸ‘† (âš–ï¸ ğŸ—ƒ ğŸ‘† âš™ï¸) ğŸ’ª `raise`.

&amp; ğŸ‘† ğŸ’š ğŸµ ğŸ‘‰ âš  ğŸŒ â®ï¸ FastAPI.

ğŸ‘† ğŸ’ª ğŸš® ğŸ›ƒ âš  ğŸ•â€ğŸ¦º â®ï¸ `@app.exception_handler()`:

```Python hl_lines="5-7  13-18  24"
{!../../../docs_src/handling_errors/tutorial003.py!}
```

ğŸ“¥, ğŸš¥ ğŸ‘† ğŸ“¨ `/unicorns/yolo`, *â¡ ğŸ› ï¸* ğŸ”œ `raise` `UnicornException`.

âœ‹ï¸ âš«ï¸ ğŸ”œ ğŸµ `unicorn_exception_handler`.

, ğŸ‘† ğŸ”œ ğŸ“¨ ğŸ§¹ âŒ, â®ï¸ ğŸ‡ºğŸ‡¸ğŸ” ğŸ‘” ğŸ“Ÿ `418` &amp; ğŸ» ğŸš:

```JSON
{"message": "Oops! yolo did something. There goes a rainbow..."}
```

!!! note "ğŸ“¡ â„¹"
    ğŸ‘† ğŸ’ª âš™ï¸ `from starlette.requests import Request` &amp; `from starlette.responses import JSONResponse`.

    **FastAPI** ğŸšš ğŸ `starlette.responses` `fastapi.responses` ğŸª ğŸ‘†, ğŸ‘©â€ğŸ’». âœ‹ï¸ ğŸŒ… ğŸ’ª ğŸ“¨ ğŸ‘Ÿ ğŸ”— âšªï¸â¡ï¸ ğŸ’ƒ. ğŸ â®ï¸ `Request`.

## ğŸ” ğŸ”¢ âš  ğŸ•â€ğŸ¦º

**FastAPI** âœ”ï¸ ğŸ”¢ âš  ğŸ•â€ğŸ¦º.

ğŸ‘« ğŸ•â€ğŸ¦º ğŸˆš ğŸ›¬ ğŸ”¢ ğŸ» ğŸ“¨ ğŸ•â” ğŸ‘† `raise` `HTTPException` &amp; ğŸ•â” ğŸ“¨ âœ”ï¸ âŒ ğŸ’½.

ğŸ‘† ğŸ’ª ğŸ” ğŸ‘« âš  ğŸ•â€ğŸ¦º â®ï¸ ğŸ‘† ğŸ‘.

### ğŸ” ğŸ“¨ ğŸ”¬ âš 

ğŸ•â” ğŸ“¨ ğŸ”Œ âŒ ğŸ“Š, **FastAPI** ğŸ”˜ ğŸ¤š `RequestValidationError`.

&amp; âš«ï¸ ğŸ”Œ ğŸ”¢ âš  ğŸ•â€ğŸ¦º âš«ï¸.

ğŸ” âš«ï¸, ğŸ—„ `RequestValidationError` &amp; âš™ï¸ âš«ï¸ â®ï¸ `@app.exception_handler(RequestValidationError)` ğŸ€ âš  ğŸ•â€ğŸ¦º.

âš  ğŸ•â€ğŸ¦º ğŸ”œ ğŸ“¨ `Request` &amp; âš .

```Python hl_lines="2  14-16"
{!../../../docs_src/handling_errors/tutorial004.py!}
```

ğŸ”œ, ğŸš¥ ğŸ‘† ğŸš¶ `/items/foo`, â†©ï¸ ğŸ’†â€â™‚ ğŸ”¢ ğŸ» âŒ â®ï¸:

```JSON
{
    "detail": [
        {
            "loc": [
                "path",
                "item_id"
            ],
            "msg": "value is not a valid integer",
            "type": "type_error.integer"
        }
    ]
}
```

ğŸ‘† ğŸ”œ ğŸ¤š âœ â¬, â®ï¸:

```
1 validation error
path -> item_id
  value is not a valid integer (type=type_error.integer)
```

#### `RequestValidationError` ğŸ†š `ValidationError`

!!! warning
    ğŸ‘« ğŸ“¡ â„¹ ğŸ‘ˆ ğŸ‘† ğŸ’ª ğŸš¶ ğŸš¥ âš«ï¸ ğŸš« âš  ğŸ‘† ğŸ”œ.

`RequestValidationError` ğŸ§-ğŸ“ Pydantic <a href="https://pydantic-docs.helpmanual.io/usage/models/#error-handling" class="external-link" target="_blank">`ValidationError`</a>.

**FastAPI** âš™ï¸ âš«ï¸ ğŸ‘ˆ, ğŸš¥ ğŸ‘† âš™ï¸ Pydantic ğŸ· `response_model`, &amp; ğŸ‘† ğŸ’½ âœ”ï¸ âŒ, ğŸ‘† ğŸ”œ ğŸ‘€ âŒ ğŸ‘† ğŸ•¹.

âœ‹ï¸ ğŸ‘©â€ğŸ’»/ğŸ‘©â€ğŸ’» ğŸ”œ ğŸš« ğŸ‘€ âš«ï¸. â†©ï¸, ğŸ‘©â€ğŸ’» ğŸ”œ ğŸ“¨ "ğŸ”— ğŸ’½ âŒ" â®ï¸ ğŸ‡ºğŸ‡¸ğŸ” ğŸ‘” ğŸ“Ÿ `500`.

âš«ï¸ ğŸ”œ ğŸ‘‰ ğŸŒŒ â†©ï¸ ğŸš¥ ğŸ‘† âœ”ï¸ Pydantic `ValidationError` ğŸ‘† *ğŸ“¨* âš–ï¸ ğŸ™† ğŸ‘† ğŸ“Ÿ (ğŸš« ğŸ‘©â€ğŸ’» *ğŸ“¨*), âš«ï¸ ğŸ¤™ ğŸ› ğŸ‘† ğŸ“Ÿ.

&amp; âª ğŸ‘† ğŸ”§ âš«ï¸, ğŸ‘† ğŸ‘©â€ğŸ’»/ğŸ‘©â€ğŸ’» ğŸš«ğŸ”œ ğŸš« âœ”ï¸ ğŸ” ğŸ”— â„¹ ğŸ”ƒ âŒ, ğŸ‘ˆ ğŸ’ª ğŸ¦ ğŸ’‚â€â™‚ âš .

### ğŸ” `HTTPException` âŒ ğŸ•â€ğŸ¦º

ğŸ ğŸŒŒ, ğŸ‘† ğŸ’ª ğŸ” `HTTPException` ğŸ•â€ğŸ¦º.

ğŸ–¼, ğŸ‘† ğŸ’ª ğŸ’š ğŸ“¨ âœ… âœ ğŸ“¨ â†©ï¸ ğŸ» ğŸ‘« âŒ:

```Python hl_lines="3-4  9-11  22"
{!../../../docs_src/handling_errors/tutorial004.py!}
```

!!! note "ğŸ“¡ â„¹"
    ğŸ‘† ğŸ’ª âš™ï¸ `from starlette.responses import PlainTextResponse`.

    **FastAPI** ğŸšš ğŸ `starlette.responses` `fastapi.responses` ğŸª ğŸ‘†, ğŸ‘©â€ğŸ’». âœ‹ï¸ ğŸŒ… ğŸ’ª ğŸ“¨ ğŸ‘Ÿ ğŸ”— âšªï¸â¡ï¸ ğŸ’ƒ.

### âš™ï¸ `RequestValidationError` ğŸ’ª

`RequestValidationError` ğŸ”Œ `body` âš«ï¸ ğŸ“¨ â®ï¸ âŒ ğŸ’½.

ğŸ‘† ğŸ’ª âš™ï¸ âš«ï¸ âª ğŸ› ï¸ ğŸ‘† ğŸ“± ğŸ•¹ ğŸ’ª &amp; â„¹ âš«ï¸, ğŸ“¨ âš«ï¸ ğŸ‘©â€ğŸ’», â™’ï¸.

```Python hl_lines="14"
{!../../../docs_src/handling_errors/tutorial005.py!}
```

ğŸ”œ ğŸ”„ ğŸ“¨ âŒ ğŸ¬ ğŸ’–:

```JSON
{
  "title": "towel",
  "size": "XL"
}
```

ğŸ‘† ğŸ”œ ğŸ“¨ ğŸ“¨ ğŸ’¬ ğŸ‘† ğŸ‘ˆ ğŸ’½ âŒ âš— ğŸ“¨ ğŸ’ª:

```JSON hl_lines="12-15"
{
  "detail": [
    {
      "loc": [
        "body",
        "size"
      ],
      "msg": "value is not a valid integer",
      "type": "type_error.integer"
    }
  ],
  "body": {
    "title": "towel",
    "size": "XL"
  }
}
```

#### FastAPI `HTTPException` ğŸ†š ğŸ’ƒ `HTTPException`

**FastAPI** âœ”ï¸ ğŸš® ğŸ‘ `HTTPException`.

&amp; **FastAPI**'â“‚ `HTTPException` âŒ ğŸ“ ğŸ˜– âšªï¸â¡ï¸ ğŸ’ƒ `HTTPException` âŒ ğŸ“.

ğŸ•´ ğŸ”º, ğŸ‘ˆ **FastAPI**'â“‚ `HTTPException` âœ” ğŸ‘† ğŸš® ğŸš ğŸ”Œ ğŸ“¨.

ğŸ‘‰ ğŸ’ª/âš™ï¸ ğŸ”˜ âœ³ 2ï¸âƒ£.0ï¸âƒ£ &amp; ğŸ’‚â€â™‚ ğŸš™.

, ğŸ‘† ğŸ’ª ğŸš§ ğŸ™‹â€â™€ **FastAPI**'â“‚ `HTTPException` ğŸ› ğŸ‘† ğŸ“Ÿ.

âœ‹ï¸ ğŸ•â” ğŸ‘† Â® âš  ğŸ•â€ğŸ¦º, ğŸ‘† ğŸ”œ Â® âš«ï¸ ğŸ’ƒ `HTTPException`.

ğŸ‘‰ ğŸŒŒ, ğŸš¥ ğŸ™† ğŸ• ğŸ’ƒ ğŸ”— ğŸ“Ÿ, âš–ï¸ ğŸ’ƒ â†” âš–ï¸ ğŸ”Œ -, ğŸ¤š ğŸ’ƒ `HTTPException`, ğŸ‘† ğŸ•â€ğŸ¦º ğŸ”œ ğŸ’ª âœŠ &amp; ğŸµ âš«ï¸.

ğŸ‘‰ ğŸ–¼, ğŸ’ª âœ”ï¸ ğŸ‘¯â€â™‚ï¸ `HTTPException`â“‚ ğŸ ğŸ“Ÿ, ğŸ’ƒ âš  ğŸ“ `StarletteHTTPException`:

```Python
from starlette.exceptions import HTTPException as StarletteHTTPException
```

### ğŸ¤-âš™ï¸ **FastAPI**'â“‚ âš  ğŸ•â€ğŸ¦º

ğŸš¥ ğŸ‘† ğŸ’š âš™ï¸ âš  â¤´ï¸ â®ï¸ ğŸ ğŸ”¢ âš  ğŸ•â€ğŸ¦º âšªï¸â¡ï¸ **FastAPI**, ğŸ‘† ğŸ’ª ğŸ—„ &amp; ğŸ¤-âš™ï¸ ğŸ”¢ âš  ğŸ•â€ğŸ¦º âšªï¸â¡ï¸ `fastapi.exception_handlers`:

```Python hl_lines="2-5  15  21"
{!../../../docs_src/handling_errors/tutorial006.py!}
```

ğŸ‘‰ ğŸ–¼ ğŸ‘† `print`ğŸ˜… âŒ â®ï¸ ğŸ“¶ ğŸ¨ ğŸ“§, âœ‹ï¸ ğŸ‘† ğŸ¤š ğŸ’­. ğŸ‘† ğŸ’ª âš™ï¸ âš  &amp; â¤´ï¸ ğŸ¤-âš™ï¸ ğŸ”¢ âš  ğŸ•â€ğŸ¦º.

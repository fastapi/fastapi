# Параметры запроса

Если вы объявляете аргументы функции, которые не используются как параметры пути, то они автоматически интерпретируются как параметры запроса.

```Python hl_lines="9"
{!../../../docs_src/query_params/tutorial001.py!}
```

Параметры запроса --- это пары ключ-значение, разделенные символом `&` и следующие за символом `?` в URL.

Например, в этом URL:

```
http://127.0.0.1:8000/items/?skip=0&limit=10
```

...параметрами запроса являются:

* `skip` со значением `0`
* `limit` со значнием `10`

Поскольку они являются частью URL, то логично, что они представляют собой строки.

Но, когда вы описываете их с помощью типов Python (как `int` в примере ниже), они проверяются на допустимость и конвертируются в указанный тип.

Все, что касается параметров пути, также применимо и к параметрам запроса:

* Поддержка в редакторе (очевидно)
* <abbr title="конвертация из строки HTTP-запроса в данные Python">"Парсинг"</abbr> данных
* Валидация данных
* Автоматическая документация

## Значения по умолчанию

Поскольку параметры запроса не являются частью пути, они необязательны и должны иметь значения по умолчанию.

В примере выше значения по умолчанию указаны: `skip=0` и `limit=10`.

Поэтому, запрос URL:

```
http://127.0.0.1:8000/items/
```

равнозначен запросу:

```
http://127.0.0.1:8000/items/?skip=0&limit=10
```

Но, если вы, к примеру, запросите:

```
http://127.0.0.1:8000/items/?skip=20
```

то значения аргументов в вашей функции будут:

* `skip=20`, потому что вы задали это значение в URL
* `limit=10`, потому что это значение по умолчанию

## Необязательные параметры

Можно объявить необязательные параметры запроса путем установки их значений по умолчанию в `None`:

```Python hl_lines="9"
{!../../../docs_src/query_params/tutorial002.py!}
```

В этом случае, аргумент функции `q` будет опциональным, а его значение будет `None` по умолчанию.

!!! check
    Имейте в виду, что **FastAPI** достаточно сообразителен, чтобы понять, что `item_id` --- это параметр пути, а `q` --- нет, поэтому `q` является параметром запроса.

!!! note
    FastAPI понимает, что `q` является необязательным, потому что `= None`.

    Выражение `Optional` в `Optional[str]` не используется FastAPI (FastAPI использует только `str` часть), но оно помогает вашему редактору обнаружить ошибки в коде.

## Конвертация типов для параметров запроса

Вы можете объявить аргумент типа `bool` и он будет сконвертирован:

```Python hl_lines="9"
{!../../../docs_src/query_params/tutorial003.py!}
```

В этом случае, если вы сделаете запрос:

```
http://127.0.0.1:8000/items/foo?short=1
```

или

```
http://127.0.0.1:8000/items/foo?short=True
```

или

```
http://127.0.0.1:8000/items/foo?short=true
```

или

```
http://127.0.0.1:8000/items/foo?short=on
```

или

```
http://127.0.0.1:8000/items/foo?short=yes
```

или любые другие варианты регистра (слово заглавными, первая буква заглавная и т.п.), внутри вашей функции аргумент `short` будет иметь тип `bool` со значением `True`. Или `False`, в противном случае.


## Множество параметров

Вы можете объявлять множество параметров пути и параметров запроса одновременно, **FastAPI** разберется, кто из них кто.

Вам не нужно указывать это каким-то специальным образом.

Они определяются по имени:

```Python hl_lines="8  10"
{!../../../docs_src/query_params/tutorial004.py!}
```

## Обязательные параметры запроса

Если вы указываете значение по умолчанию для всех параметров, кроме параметров пути (мы пока познакомились только с параметрами запроса), то они являются необязательными.

Если вы не хотите задавать какое-то конкретное значение, но все еще хотите оставить параметр необязательным, установите значение по умолчанию в `None`.

Но если вы хотите сделать параметр запроса обязательным, то вам нужно не указывать значение по умолчанию:

```Python hl_lines="6-7"
{!../../../docs_src/query_params/tutorial005.py!}
```

В данном случае параметр `needy` является обязательным параметром запроса и имеет тип `str`.

Если вы откроете в браузере такой URL:

```
http://127.0.0.1:8000/items/foo-item
```

...без параметра `needy`, то увидите вот такую ошибку:

```JSON
{
    "detail": [
        {
            "loc": [
                "query",
                "needy"
            ],
            "msg": "field required",
            "type": "value_error.missing"
        }
    ]
}
```

Поскольку `needy` является обязательным параметром, вы должны указывать его в URL:

```
http://127.0.0.1:8000/items/foo-item?needy=sooooneedy
```

...а так работает:

```JSON
{
    "item_id": "foo-item",
    "needy": "sooooneedy"
}
```

Разумеется, вы можете какие-то параметры объявить обязательными, какие-то --- со значениями по умолчанию, а какие-то --- опциональными.

```Python hl_lines="10"
{!../../../docs_src/query_params/tutorial006.py!}
```

Тут у нас есть 3 параметра запроса:

* `needy`, обязательный, типа `str`.
* `skip`, типа `int`, со значением по умолчанию `0`.
* `limit`, необязательный, типа `int`.

!!! tip
    Вы можете использовать тип `Enum` так же, как и в [Параметрах пути](path-params.md#predefined-values){.internal-link target=_blank}.

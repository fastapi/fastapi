# FastAPI –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö ‚Äî Docker { #fastapi-in-containers-docker }

–ü—Ä–∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π FastAPI —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî —Å–æ–±–∏—Ä–∞—Ç—å **–æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ Linux**. –û–±—ã—á–Ω–æ —ç—Ç–æ –¥–µ–ª–∞—é—Ç —Å –ø–æ–º–æ—â—å—é <a href="https://www.docker.com/" class="external-link" target="_blank">**Docker**</a>. –ó–∞—Ç–µ–º —Ç–∞–∫–æ–π –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–∞—ë—Ç —Ä—è–¥ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤: **–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**, **–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç—å**, **–ø—Ä–æ—Å—Ç–æ—Ç—É** –∏ –¥—Ä—É–≥–∏–µ.

/// tip | –ü–æ–¥—Å–∫–∞–∑–∫–∞

–ù–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –∏ –≤—ã —É–∂–µ –∑–Ω–∞–∫–æ–º—ã —Å —ç—Ç–∏–º? –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ [`Dockerfile` –Ω–∏–∂–µ üëá](#build-a-docker-image-for-fastapi).

///

<details>
<summary>–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä Dockerfile üëÄ</summary>

```Dockerfile
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

COPY ./app /code/app

CMD ["fastapi", "run", "app/main.py", "--port", "80"]

# –ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∑–∞ –ø—Ä–æ–∫—Å–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä Nginx –∏–ª–∏ Traefik, –¥–æ–±–∞–≤—å—Ç–µ --proxy-headers
# CMD ["fastapi", "run", "app/main.py", "--port", "80", "--proxy-headers"]
```

</details>

## –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä { #what-is-a-container }

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–≤ –æ—Å–Ω–æ–≤–Ω–æ–º Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) ‚Äî —ç—Ç–æ –æ—á–µ–Ω—å **–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π** —Å–ø–æ—Å–æ–± —É–ø–∞–∫–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–≤ –∏—Ö –æ—Ç –¥—Ä—É–≥–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–¥—Ä—É–≥–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤) –≤ —Ç–æ–π –∂–µ —Å–∏—Å—Ç–µ–º–µ.

Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ –∂–µ —è–¥—Ä–æ Linux —Ö–æ—Å—Ç–∞ (–º–∞—à–∏–Ω—ã, –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã, –æ–±–ª–∞—á–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ç.–ø.). –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω–∏ –æ—á–µ–Ω—å –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ (–ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –º–∞—à–∏–Ω–∞–º–∏, —ç–º—É–ª–∏—Ä—É—é—â–∏–º–∏ —Ü–µ–ª—É—é –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É).

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø–æ—Ç—Ä–µ–±–ª—è—é—Ç **–º–∞–ª–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ—Å—É—Ä—Å–æ–≤**, —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º–æ–µ —Å –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–∞–ø—Ä—è–º—É—é (–≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∞ –±—ã –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤).

–£ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Ç–∞–∫–∂–µ –µ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ **–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ** –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã (–æ–±—ã—á–Ω–æ –≤—Å–µ–≥–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å), —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ —Å–µ—Ç—å, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –∏ —Ç.–¥.

## –ß—Ç–æ —Ç–∞–∫–æ–µ –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ { #what-is-a-container-image }

**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä** –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑ **–æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**.

–û–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äî —ç—Ç–æ **—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è** –≤–µ—Ä—Å–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∫–æ–º–∞–Ω–¥—ã/–ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –ó–¥–µ—Å—å **—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è** –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ **–æ–±—Ä–∞–∑** –Ω–µ –∑–∞–ø—É—â–µ–Ω, –æ–Ω –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚Äî —ç—Ç–æ —Ç–æ–ª—å–∫–æ —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.

–í –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç—å ¬´**–æ–±—Ä–∞–∑—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**¬ª (—Ö—Ä–∞–Ω—è—â–µ–º—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ), ¬´**–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**¬ª –æ–±—ã—á–Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä, —Ç–æ, —á—Ç–æ **–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**.

–ö–æ–≥–¥–∞ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** –∑–∞–ø—É—â–µ–Ω (–Ω–∞ –æ—Å–Ω–æ–≤–µ **–æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**), –æ–Ω –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–ª–∏ –∏–∑–º–µ–Ω—è—Ç—å —Ñ–∞–π–ª—ã, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ —Ç.–¥.. –≠—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –æ–±—Ä–∞–∑–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ –¥–∏—Å–∫).

–û–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏—Ç—å —Å **—Ñ–∞–π–ª–∞–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã**, –Ω–∞–ø—Ä–∏–º–µ—Ä `python` –∏ –∫–∞–∫–∏–º-—Ç–æ —Ñ–∞–π–ª–æ–º `main.py`.

–ê —Å–∞–º **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** (–≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç **–æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**) ‚Äî —ç—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –æ–±—Ä–∞–∑–∞, —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º—ã–π —Å **–ø—Ä–æ—Ü–µ—Å—Å–æ–º**. –ü–æ —Å—É—Ç–∏, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤ –Ω—ë–º –µ—Å—Ç—å **–∑–∞–ø—É—â–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** (–∏ –æ–±—ã—á–Ω–æ —ç—Ç–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å). –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤ –Ω—ë–º –Ω–µ –æ—Å—Ç–∞—ë—Ç—Å—è –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

## –û–±—Ä–∞–∑—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ { #container-images }

Docker ‚Äî –æ–¥–∏–Ω –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è **–æ–±—Ä–∞–∑–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** –∏ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏**.

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π <a href="https://hub.docker.com/" class="external-link" target="_blank">Docker Hub</a> —Å –≥–æ—Ç–æ–≤—ã–º–∏ **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏** –¥–ª—è –º–Ω–æ–≥–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –æ–∫—Ä—É–∂–µ–Ω–∏–π, –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.

–ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π <a href="https://hub.docker.com/_/python" class="external-link" target="_blank">–æ–±—Ä–∞–∑ Python</a>.

–ê —Ç–∞–∫–∂–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ–±—Ä–∞–∑–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–µ—â–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö:

* <a href="https://hub.docker.com/_/postgres" class="external-link" target="_blank">PostgreSQL</a>
* <a href="https://hub.docker.com/_/mysql" class="external-link" target="_blank">MySQL</a>
* <a href="https://hub.docker.com/_/mongo" class="external-link" target="_blank">MongoDB</a>
* <a href="https://hub.docker.com/_/redis" class="external-link" target="_blank">Redis</a>, –∏ —Ç.–¥.

–ò—Å–ø–æ–ª—å–∑—É—è –≥–æ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã, –æ—á–µ–Ω—å –ª–µ–≥–∫–æ **–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å** —Ä–∞–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –Ω–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ –æ–±—Ä–∞–∑–∞–º–∏** –∏ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏—Ö —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–æ –º–Ω–æ–≥–∏—Ö —Å–ª—É—á–∞—è—Ö –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ Docker –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ –∑–Ω–∞–Ω–∏—è —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**: —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º, –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–æ–º —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ React –∏ —Å–≤—è–∑–∞—Ç—å –∏—Ö —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å–µ—Ç—å.

–í—Å–µ —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (—Ç–∞–∫–∏–µ –∫–∞–∫ Docker –∏–ª–∏ Kubernetes) –∏–º–µ—é—Ç –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è —Ç–∞–∫–æ–≥–æ —Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.

## –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã { #containers-and-processes }

**–û–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–≤–æ–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—É –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∫–æ—Ç–æ—Ä—É—é —Å–ª–µ–¥—É–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**, –∞ —Ç–∞–∫–∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–µ —ç—Ç–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ. –≠—Ç–æ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

–ö–æ–≥–¥–∞ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —Å—Ç–∞—Ä—Ç—É–µ—Ç, –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç —É–∫–∞–∑–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É/–ø—Ä–æ–≥—Ä–∞–º–º—É (—Ö–æ—Ç—è –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —ç—Ç–æ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥—Ä—É–≥—É—é –∫–æ–º–∞–Ω–¥—É/–ø—Ä–æ–≥—Ä–∞–º–º—É).

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –µ–≥–æ **–≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** (–∫–æ–º–∞–Ω–¥–∞ –∏–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞).

–û–±—ã—á–Ω–æ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –µ—Å—Ç—å **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å**, –Ω–æ –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã, –∏ —Ç–æ–≥–¥–∞ –≤ —Ç–æ–º –∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –±—É–¥–µ—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**.

–ù–µ–ª—å–∑—è –∏–º–µ—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ **—Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞**. –ï—Å–ª–∏ –≥–ª–∞–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

## –°–æ–∑–¥–∞—Ç—å Docker-–æ–±—Ä–∞–∑ –¥–ª—è FastAPI { #build-a-docker-image-for-fastapi }

–ò—Ç–∞–∫, –¥–∞–≤–∞–π—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å —Å–æ–±–µ—Ä—ë–º! üöÄ

–Ø –ø–æ–∫–∞–∂—É, –∫–∞–∫ —Å–æ–±—Ä–∞—Ç—å **Docker-–æ–±—Ä–∞–∑** –¥–ª—è FastAPI **—Å –Ω—É–ª—è** –Ω–∞ –æ—Å–Ω–æ–≤–µ **–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ Python**.

–ò–º–µ–Ω–Ω–æ —Ç–∞–∫ —Å—Ç–æ–∏—Ç –¥–µ–ª–∞—Ç—å –≤ **–±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤**, –Ω–∞–ø—Ä–∏–º–µ—Ä:

* –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ **Kubernetes** –∏–ª–∏ –ø–æ—Ö–æ–∂–∏—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
* –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –Ω–∞ **Raspberry Pi**
* –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–±–ª–∞—á–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –¥–ª—è –≤–∞—Å –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —Ç.–ø.

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø–∞–∫–µ—Ç–æ–≤ { #package-requirements }

–û–±—ã—á–Ω–æ **–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–ø–∏—Å–∞–Ω—ã –≤ –∫–∞–∫–æ–º-—Ç–æ —Ñ–∞–π–ª–µ.

–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–≤–∏—Å–∏—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–º –≤—ã **—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç–µ** —ç—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.

–ß–∞—â–µ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–π–ª `requirements.txt` —Å –∏–º–µ–Ω–∞–º–∏ –ø–∞–∫–µ—Ç–æ–≤ –∏ –∏—Ö –≤–µ—Ä—Å–∏—è–º–∏ –ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É.

–†–∞–∑—É–º–µ–µ—Ç—Å—è, –≤—ã –±—É–¥–µ—Ç–µ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Ç–µ—Ö –∂–µ –∏–¥–µ–π, —á—Ç–æ –æ–ø–∏—Å–∞–Ω—ã –∑–¥–µ—Å—å: [–û –≤–µ—Ä—Å–∏—è—Ö FastAPI](versions.md){.internal-link target=_blank}, —á—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã –≤–µ—Ä—Å–∏–π.

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–∞—à `requirements.txt` –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫:

```
fastapi[standard]>=0.113.0,<0.114.0
pydantic>=2.7.0,<3.0.0
```

–ò –æ–±—ã—á–Ω–æ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —ç—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥–æ–π `pip`, –Ω–∞–ø—Ä–∏–º–µ—Ä:

<div class="termy">

```console
$ pip install -r requirements.txt
---> 100%
Successfully installed fastapi pydantic
```

</div>

/// info | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–°—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –¥—Ä—É–≥–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

///

### –°–æ–∑–¥–∞—Ç—å –∫–æ–¥ **FastAPI** { #create-the-fastapi-code }

* –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `app` –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–µ—ë.
* –°–æ–∑–¥–∞–π—Ç–µ –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª `__init__.py`.
* –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `main.py` —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

### Dockerfile { #dockerfile }

–¢–µ–ø–µ—Ä—å –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `Dockerfile`:

```{ .dockerfile .annotate }
# (1)!
FROM python:3.9

# (2)!
WORKDIR /code

# (3)!
COPY ./requirements.txt /code/requirements.txt

# (4)!
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (5)!
COPY ./app /code/app

# (6)!
CMD ["fastapi", "run", "app/main.py", "--port", "80"]
```

1. –ù–∞—á–∏–Ω–∞–µ–º —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑–∞ Python.

2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—É—â—É—é —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤ `/code`.

    –ó–¥–µ—Å—å –º—ã —Ä–∞–∑–º–µ—Å—Ç–∏–º —Ñ–∞–π–ª `requirements.txt` –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `app`.

3. –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/code`.

    –°–Ω–∞—á–∞–ª–∞ –∫–æ–ø–∏—Ä—É–π—Ç–µ **—Ç–æ–ª—å–∫–æ** —Ñ–∞–π–ª —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏, –Ω–µ –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥.

    –¢–∞–∫ –∫–∞–∫ —ç—Ç–æ—Ç —Ñ–∞–π–ª **–º–µ–Ω—è–µ—Ç—Å—è –Ω–µ—á–∞—Å—Ç–æ**, Docker –æ–ø—Ä–µ–¥–µ–ª–∏—Ç —ç—Ç–æ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∫—ç—à** –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à –∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.

4. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏.

    –û–ø—Ü–∏—è `--no-cache-dir` —É–∫–∞–∑—ã–≤–∞–µ—Ç `pip` –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ, —Ç.–∫. —ç—Ç–æ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `pip` –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å–Ω–æ–≤–∞ –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–µ—Ö –∂–µ –ø–∞–∫–µ—Ç–æ–≤, –∞ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —ç—Ç–æ –æ–±—ã—á–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è.

    /// note | –ó–∞–º–µ—Ç–∫–∞

    `--no-cache-dir` –æ—Ç–Ω–æ—Å–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ `pip` –∏ –Ω–µ –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ Docker –∏–ª–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º.

    ///

    –û–ø—Ü–∏—è `--upgrade` —É–∫–∞–∑—ã–≤–∞–µ—Ç `pip` –æ–±–Ω–æ–≤–ª—è—Ç—å –ø–∞–∫–µ—Ç—ã, –µ—Å–ª–∏ –æ–Ω–∏ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã.

    –ü–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–≥ —Å –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ñ–∞–π–ª–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω **–∫—ç—à–µ–º Docker**, —ç—Ç–æ—Ç —à–∞–≥ —Ç–∞–∫–∂–µ **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à Docker**, –∫–æ–≥–¥–∞ —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ.

    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∞ –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ **—Å—ç–∫–æ–Ω–æ–º–∏—Ç** –≤–∞–º –º–Ω–æ–≥–æ **–≤—Ä–µ–º–µ–Ω–∏** –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Å–±–æ—Ä–∫–∞—Ö –æ–±—Ä–∞–∑–∞ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã **–∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å** –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ **–∫–∞–∂–¥—ã–π —Ä–∞–∑**.

5. –ö–æ–ø–∏—Ä—É–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `./app` –≤–Ω—É—Ç—Ä—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/code`.

    –¢–∞–∫ –∫–∞–∫ –∑–¥–µ—Å—å –≤–µ—Å—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π **–º–µ–Ω—è–µ—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ**, –∫—ç—à Docker **–≤—Ä—è–¥ –ª–∏** –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è —ç—Ç–æ–≥–æ —à–∞–≥a –∏–ª–∏ **–ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö —à–∞–≥–æ–≤**.

    –ü–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å —ç—Ç–æ—Ç —à–∞–≥ **–±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É** `Dockerfile`, —á—Ç–æ–±—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

6. –£–∫–∞–∑—ã–≤–∞–µ–º **–∫–æ–º–∞–Ω–¥—É** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ `fastapi run`, –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Uvicorn.

    `CMD` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö ‚Äî —ç—Ç–æ —Ç–æ, —á—Ç–æ –≤—ã –±—ã –≤–≤–µ–ª–∏ –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, —Ä–∞–∑–¥–µ–ª—è—è –ø—Ä–æ–±–µ–ª–∞–º–∏.

    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏–∑ **—Ç–µ–∫—É—â–µ–π —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏**, —Ç–æ–π —Å–∞–º–æ–π `/code`, –∫–æ—Ç–æ—Ä—É—é –≤—ã –∑–∞–¥–∞–ª–∏ –≤—ã—à–µ `WORKDIR /code`.

/// tip | –ü–æ–¥—Å–∫–∞–∑–∫–∞

–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞, –∫–ª–∏–∫–Ω—É–≤ –ø–æ –Ω–æ–º–µ—Ä—É —Ä—è–¥–æ–º —Å–æ —Å—Ç—Ä–æ–∫–æ–π. üëÜ

///

/// warning | –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ

–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **exec-—Ñ–æ—Ä–º—É** –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ `CMD`, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –Ω–∏–∂–µ.

///

#### –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `CMD` ‚Äî exec-—Ñ–æ—Ä–º–∞ { #use-cmd-exec-form }

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—é Docker <a href="https://docs.docker.com/reference/dockerfile/#cmd" class="external-link" target="_blank">`CMD`</a> –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –≤ –¥–≤—É—Ö —Ñ–æ—Ä–º–∞—Ö:

‚úÖ **Exec**-—Ñ–æ—Ä–º–∞:

```Dockerfile
# ‚úÖ –î–µ–ª–∞–π—Ç–µ —Ç–∞–∫
CMD ["fastapi", "run", "app/main.py", "--port", "80"]
```

‚õîÔ∏è **Shell**-—Ñ–æ—Ä–º–∞:

```Dockerfile
# ‚õîÔ∏è –ù–µ –¥–µ–ª–∞–π—Ç–µ —Ç–∞–∫
CMD fastapi run app/main.py --port 80
```

–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **exec**-—Ñ–æ—Ä–º—É, —á—Ç–æ–±—ã FastAPI –º–æ–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è –∏ —á—Ç–æ–±—ã —Å—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ [—Å–æ–±—ã—Ç–∏—è lifespan](../advanced/events.md){.internal-link target=_blank}.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º —á–∏—Ç–∞–π—Ç–µ –≤ <a href="https://docs.docker.com/reference/dockerfile/#shell-and-exec-form" class="external-link" target="_blank">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Docker –æ shell- –∏ exec-—Ñ–æ—Ä–º–∞—Ö</a>.

–≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –∑–∞–º–µ—Ç–Ω–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `docker compose`. –°–º. —Ä–∞–∑–¥–µ–ª FAQ Docker Compose —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏: <a href="https://docs.docker.com/compose/faq/#why-do-my-services-take-10-seconds-to-recreate-or-stop" class="external-link" target="_blank">–ü–æ—á–µ–º—É –º–æ–∏ —Å–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ—Å–æ–∑–¥–∞—é—Ç—Å—è –∏–ª–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è 10 —Å–µ–∫—É–Ω–¥?</a>.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π { #directory-structure }

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–∞–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```
.
‚îú‚îÄ‚îÄ app
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ requirements.txt
```

#### –ó–∞ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–º TLS —Ç–µ—Ä–º–∏–Ω–∞—Ü–∏–∏ { #behind-a-tls-termination-proxy }

–ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–æ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è TLS (–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º –Ω–∞–≥—Ä—É–∑–∫–∏), —Ç–∞–∫–∏–º –∫–∞–∫ Nginx –∏–ª–∏ Traefik, –¥–æ–±–∞–≤—å—Ç–µ –æ–ø—Ü–∏—é `--proxy-headers`. –≠—Ç–æ —Å–æ–æ–±—â–∏—Ç Uvicorn (—á–µ—Ä–µ–∑ FastAPI CLI), —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞ HTTPS –∏ –º–æ–∂–Ω–æ –¥–æ–≤–µ—Ä—è—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∞–º.

```Dockerfile
CMD ["fastapi", "run", "app/main.py", "--proxy-headers", "--port", "80"]
```

#### –ö—ç—à Docker { #docker-cache }

–í —ç—Ç–æ–º `Dockerfile` –µ—Å—Ç—å –≤–∞–∂–Ω–∞—è —Ö–∏—Ç—Ä–æ—Å—Ç—å: –º—ã —Å–Ω–∞—á–∞–ª–∞ –∫–æ–ø–∏—Ä—É–µ–º **—Ç–æ–ª—å–∫–æ —Ñ–∞–π–ª —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏**, –∞ –Ω–µ –≤–µ—Å—å –∫–æ–¥. –í–æ—Ç –∑–∞—á–µ–º.

```Dockerfile
COPY ./requirements.txt /code/requirements.txt
```

Docker –∏ –ø–æ–¥–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã **—Å—Ç—Ä–æ—è—Ç** –æ–±—Ä–∞–∑—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ **–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ**, –¥–æ–±–∞–≤–ª—è—è **—Å–ª–æ–π –∑–∞ —Å–ª–æ–µ–º**, –Ω–∞—á–∏–Ω–∞—è —Å –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ `Dockerfile` –∏ –¥–æ–±–∞–≤–ª—è—è –ª—é–±—ã–µ —Ñ–∞–π–ª—ã, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–µ –∫–∞–∂–¥–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π `Dockerfile`.

Docker –∏ –ø–æ–¥–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫—ç—à** –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞: –µ—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è —Å –º–æ–º–µ–Ω—Ç–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–±–æ—Ä–∫–∏, –±—É–¥–µ—Ç **–ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å–ª–æ–π**, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑, –≤–º–µ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–ª–æ—è —Å –Ω—É–ª—è.

–°–∞–º–æ –ø–æ —Å–µ–±–µ –∏–∑–±–µ–≥–∞–Ω–∏–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–µ –≤—Å–µ–≥–¥–∞ –¥–∞—ë—Ç –º–Ω–æ–≥–æ, –Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∫—ç—à–∞ –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ Docker —Å–º–æ–∂–µ—Ç **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à –∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ**. –ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —à–∞–≥–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```Dockerfile
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt
```

–§–∞–π–ª —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ **–º–µ–Ω—è–µ—Ç—Å—è –Ω–µ—á–∞—Å—Ç–æ**. –ü–æ—ç—Ç–æ–º—É, –∫–æ–ø–∏—Ä—É—è —Ç–æ–ª—å–∫–æ –µ–≥–æ, Docker —Å–º–æ–∂–µ—Ç **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à** –¥–ª—è —ç—Ç–æ–≥–æ —à–∞–≥–∞.

–ê –∑–∞—Ç–µ–º Docker —Å–º–æ–∂–µ—Ç **–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à –∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ**, –≥–¥–µ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ó–¥–µ—Å—å –º—ã –∫–∞–∫ —Ä–∞–∑ **—ç–∫–æ–Ω–æ–º–∏–º –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏**. ‚ú® ...–∏ –Ω–µ —Å–∫—É—á–∞–µ–º –≤ –æ–∂–∏–¥–∞–Ω–∏–∏. üò™üòÜ

–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π **–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –º–∏–Ω—É—Ç—ã**, –Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ **–∫—ç—à–∞** ‚Äî **—Å–µ–∫—É–Ω–¥—ã**.

–ü–æ—Å–∫–æ–ª—å–∫—É –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—ã –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑ —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ, —Å—É–º–º–∞—Ä–Ω–æ —ç—Ç–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç –Ω–µ–º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏.

–ó–∞—Ç–µ–º, –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É `Dockerfile`, –º—ã –∫–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –∫–æ–¥. –¢–∞–∫ –∫–∞–∫ –æ–Ω **–º–µ–Ω—è–µ—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ**, –º—ã —Å—Ç–∞–≤–∏–º —ç—Ç–æ—Ç —à–∞–≥ –≤ –∫–æ–Ω–µ—Ü, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –≤—Å—ë, —á—Ç–æ –ø–æ—Å–ª–µ –Ω–µ–≥–æ, —É–∂–µ –Ω–µ —Å–º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à.

```Dockerfile
COPY ./app /code/app
```

### –°–æ–±—Ä–∞—Ç—å Docker-–æ–±—Ä–∞–∑ { #build-the-docker-image }

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞ –º–µ—Å—Ç–µ, —Å–æ–±–µ—Ä—ë–º –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

* –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ (–≥–¥–µ –≤–∞—à `Dockerfile` –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `app`).
* –°–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑ FastAPI:

<div class="termy">

```console
$ docker build -t myimage .

---> 100%
```

</div>

/// tip | –ü–æ–¥—Å–∫–∞–∑–∫–∞

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Ç–æ—á–∫—É `.` –≤ –∫–æ–Ω—Ü–µ ‚Äî —ç—Ç–æ —Ç–æ –∂–µ —Å–∞–º–æ–µ, —á—Ç–æ `./`. –¢–∞–∫ –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º Docker, –∏–∑ –∫–∞–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ —Ç–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è (`.`).

///

### –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä { #start-the-docker-container }

* –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–µ–≥–æ –æ–±—Ä–∞–∑–∞:

<div class="termy">

```console
$ docker run -d --name mycontainer -p 80:80 myimage
```

</div>

## –ü—Ä–æ–≤–µ—Ä–∫–∞ { #check-it }

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –ø–æ –∞–¥—Ä–µ—Å—É –≤–∞—à–µ–≥–æ Docker-—Ö–æ—Å—Ç–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä: <a href="http://192.168.99.100/items/5?q=somequery" class="external-link" target="_blank">http://192.168.99.100/items/5?q=somequery</a> –∏–ª–∏ <a href="http://127.0.0.1/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1/items/5?q=somequery</a> (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π URL –≤–∞—à–µ–≥–æ Docker-—Ö–æ—Å—Ç–∞).

–í—ã —É–≤–∏–¥–∏—Ç–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```JSON
{"item_id": 5, "q": "somequery"}
```

## –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API { #interactive-api-docs }

–¢–µ–ø–µ—Ä—å –∑–∞–π–¥–∏—Ç–µ –Ω–∞ <a href="http://192.168.99.100/docs" class="external-link" target="_blank">http://192.168.99.100/docs</a> –∏–ª–∏ <a href="http://127.0.0.1/docs" class="external-link" target="_blank">http://127.0.0.1/docs</a> (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π URL –≤–∞—à–µ–≥–æ Docker-—Ö–æ—Å—Ç–∞).

–í—ã —É–≤–∏–¥–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API (–Ω–∞ –±–∞–∑–µ <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API { #alternative-api-docs }

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å <a href="http://192.168.99.100/redoc" class="external-link" target="_blank">http://192.168.99.100/redoc</a> –∏–ª–∏ <a href="http://127.0.0.1/redoc" class="external-link" target="_blank">http://127.0.0.1/redoc</a> (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π URL –≤–∞—à–µ–≥–æ Docker-—Ö–æ—Å—Ç–∞).

–í—ã —É–≤–∏–¥–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é (–Ω–∞ –±–∞–∑–µ <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## –°–æ–±—Ä–∞—Ç—å Docker-–æ–±—Ä–∞–∑ –¥–ª—è –æ–¥–Ω–æ—Ñ–∞–π–ª–æ–≤–æ–≥–æ FastAPI { #build-a-docker-image-with-a-single-file-fastapi }

–ï—Å–ª–∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FastAPI ‚Äî –æ–¥–∏–Ω —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä `main.py` –±–µ–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./app`, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∞–∫–æ–π:

```
.
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ requirements.txt
```

–¢–æ–≥–¥–∞ –≤ `Dockerfile` –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—É—Ç–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:

```{ .dockerfile .annotate hl_lines="10  13" }
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (1)!
COPY ./main.py /code/

# (2)!
CMD ["fastapi", "run", "main.py", "--port", "80"]
```

1. –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª `main.py` –Ω–∞–ø—Ä—è–º—É—é –≤ `/code` (–±–µ–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `./app`).

2. –ò—Å–ø–æ–ª—å–∑—É–µ–º `fastapi run` –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ `main.py`.

–ö–æ–≥–¥–∞ –≤—ã –ø–µ—Ä–µ–¥–∞—ë—Ç–µ —Ñ–∞–π–ª –≤ `fastapi run`, –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç, —á—Ç–æ —ç—Ç–æ –æ–¥–∏–Ω–æ—á–Ω—ã–π —Ñ–∞–π–ª, –∞ –Ω–µ —á–∞—Å—Ç—å –ø–∞–∫–µ—Ç–∞, –∏ –ø–æ–π–º—ë—Ç, –∫–∞–∫ –µ–≥–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–∞—à–µ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. üòé

## –ö–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è { #deployment-concepts }

–ï—â—ë —Ä–∞–∑ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º [–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è](concepts.md){.internal-link target=_blank} –ø—Ä–∏–º–µ–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º.

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≥–ª–∞–≤–Ω—ã–º –æ–±—Ä–∞–∑–æ–º —É–ø—Ä–æ—â–∞—é—Ç **—Å–±–æ—Ä–∫—É –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ** –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–æ –Ω–µ –Ω–∞–≤—è–∑—ã–≤–∞—é—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —ç—Ç–∏–º **–∫–æ–Ω—Ü–µ–ø—Ü–∏—è–º —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**, –∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π.

**–•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å** –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –ª—é–±–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –µ—Å—Ç—å —Å–ø–æ—Å–æ–± –æ—Ö–≤–∞—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. üéâ

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —ç—Ç–∏ **–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è** –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

* HTTPS
* –ó–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
* –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
* –†–µ–ø–ª–∏–∫–∞—Ü–∏—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
* –ü–∞–º—è—Ç—å
* –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

## HTTPS { #https }

–ï—Å–ª–∏ –º—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ **–æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI (–∏ –¥–∞–ª–µ–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**), —Ç–æ HTTPS –æ–±—ã—á–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è **–≤–Ω–µ—à–Ω–∏–º** –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º.

–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å <a href="https://traefik.io/" class="external-link" target="_blank">Traefik</a>, –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è **HTTPS** –∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ** –ø–æ–ª—É—á–µ–Ω–∏–µ **—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤**.

/// tip | –ü–æ–¥—Å–∫–∞–∑–∫–∞

–£ Traefik –µ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Docker, Kubernetes –∏ –¥—Ä—É–≥–∏–º–∏, –ø–æ—ç—Ç–æ–º—É –æ—á–µ–Ω—å –ª–µ–≥–∫–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å HTTPS –¥–ª—è –≤–∞—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

///

–í –∫–∞—á–µ—Å—Ç–≤–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã HTTPS –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ —Å–µ—Ä–≤–∏—Å –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—Å—ë —Ä–∞–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ).

## –ó–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ { #running-on-startup-and-restarts }

–û–±—ã—á–Ω–æ –µ—Å—Ç—å –¥—Ä—É–≥–æ–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ **–∑–∞–ø—É—Å–∫ –∏ —Ä–∞–±–æ—Ç—É** –≤–∞—à–µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∞–º **Docker**, **Docker Compose**, **Kubernetes**, **–æ–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å** –∏ —Ç.–ø.

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ (–∏–ª–∏ –≤–æ –≤—Å–µ—Ö) —Å–ª—É—á–∞–µ–≤ –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–∞—è –æ–ø—Ü–∏—è, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ Docker —ç—Ç–æ –æ–ø—Ü–∏—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ `--restart`.

–ë–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω–æ. –ù–æ –ø—Ä–∏ **—Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏** –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —ç—Ç–æ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. ‚ú®

## –†–µ–ø–ª–∏–∫–∞—Ü–∏—è ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ { #replication-number-of-processes }

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å <abbr title="–ì—Ä—É–ø–ø–∞ –º–∞—à–∏–Ω, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ç–∞–∫, —á—Ç–æ–±—ã –±—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã–º–∏ –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º.">–∫–ª–∞—Å—Ç–µ—Ä</abbr> –º–∞—à–∏–Ω —Å **Kubernetes**, Docker Swarm Mode, Nomad –∏–ª–∏ –¥—Ä—É–≥–æ–π –ø–æ—Ö–æ–∂–µ–π —Å–∏—Å—Ç–µ–º–æ–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞—à–∏–Ω–∞—Ö, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤—ã –±—É–¥–µ—Ç–µ **—É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π** –Ω–∞ **—É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞**, –∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Uvicorn —Å –≤–æ—Ä–∫–µ—Ä–∞–º–∏) –≤ –∫–∞–∂–¥–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.

–û–¥–Ω–∞ –∏–∑ —Ç–∞–∫–∏—Ö —Å–∏—Å—Ç–µ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, –∫–∞–∫ Kubernetes, –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —É–ø—Ä–∞–≤–ª—è—Ç—å **—Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—è **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏** –¥–ª—è –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äî –≤—Å—ë —ç—Ç–æ –Ω–∞ **—É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞**.

–í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –≤—ã, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –∑–∞—Ö–æ—Ç–∏—Ç–µ —Å–æ–±—Ä–∞—Ç—å **Docker-–æ–±—Ä–∞–∑ —Å –Ω—É–ª—è**, –∫–∞–∫ [–æ–ø–∏—Å–∞–Ω–æ –≤—ã—à–µ](#dockerfile), —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å Uvicorn** –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –≤–æ—Ä–∫–µ—Ä–æ–≤ Uvicorn.

### –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏ { #load-balancer }

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –æ–±—ã—á–Ω–æ –µ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, **—Å–ª—É—à–∞—é—â–∏–π –≥–ª–∞–≤–Ω—ã–π –ø–æ—Ä—Ç**. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥—Ä—É–≥–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî **–ø—Ä–æ–∫—Å–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è TLS** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ **HTTPS** –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.

–ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç **–Ω–∞–≥—Ä—É–∑–∫—É** –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç –µ—ë –º–µ–∂–¥—É –≤–æ—Ä–∫–µ—Ä–∞–º–∏ **—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ**, –µ–≥–æ —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º –Ω–∞–≥—Ä—É–∑–∫–∏**.

/// tip | –ü–æ–¥—Å–∫–∞–∑–∫–∞

–¢–æ—Ç –∂–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç **–ø—Ä–æ–∫—Å–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è TLS**, –∫–æ—Ç–æ—Ä—ã–π –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç HTTPS, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Ç–∞–∫–∂–µ –±—É–¥–µ—Ç **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º –Ω–∞–≥—Ä—É–∑–∫–∏**.

///

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —Å–∏—Å—Ç–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–º–∏, —É–∂–µ –∏–º–µ–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ **—Å–µ—Ç–µ–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è** (–Ω–∞–ø—Ä–∏–º–µ—Ä, HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤) –æ—Ç **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏** (–∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç –±—ã—Ç—å **–ø—Ä–æ–∫—Å–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è TLS**) –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É(-–∞–º) —Å –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

### –û–¥–∏–Ω –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤-–≤–æ—Ä–∫–µ—Ä–æ–≤ { #one-load-balancer-multiple-worker-containers }

–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å **Kubernetes** –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã —Å–µ—Ç–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–¥–Ω–æ–º—É **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏**, —Å–ª—É—à–∞—é—â–µ–º—É –≥–ª–∞–≤–Ω—ã–π **–ø–æ—Ä—Ç**, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**, –≥–¥–µ –∑–∞–ø—É—â–µ–Ω–æ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

–ö–∞–∂–¥—ã–π —Ç–∞–∫–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –æ–±—ã—á–Ω–æ –∏–º–µ–µ—Ç **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Ü–µ—Å—Å Uvicorn —Å –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º FastAPI). –í—Å–µ –æ–Ω–∏ ‚Äî **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**, –∑–∞–ø—É—Å–∫–∞—é—â–∏–µ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ, –Ω–æ —É –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å, –ø–∞–º—è—Ç—å –∏ —Ç.–ø. –¢–∞–∫ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º** –ø–æ **—Ä–∞–∑–Ω—ã–º —è–¥—Ä–∞–º** CPU –∏–ª–∏ –¥–∞–∂–µ **—Ä–∞–∑–Ω—ã–º –º–∞—à–∏–Ω–∞–º**.

–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–æ–º –Ω–∞–≥—Ä—É–∑–∫–∏** –±—É–¥–µ—Ç **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã** –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —Å –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º **–ø–æ –æ—á–µ—Ä–µ–¥–∏**. –¢–æ –µ—Å—Ç—å –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –æ–¥–Ω–∏–º –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö **—Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**.

–û–±—ã—á–Ω–æ —Ç–∞–∫–æ–π **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ –Ω–∞–≥—Ä—É–∑–∫–∏** –º–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ *–¥—Ä—É–≥–∏–º* –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –≤ –≤–∞—à–µ–º –∫–ª–∞—Å—Ç–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫ –¥—Ä—É–≥–æ–º—É –¥–æ–º–µ–Ω—É –∏–ª–∏ –ø–æ–¥ –¥—Ä—É–≥–∏–º –ø—Ä–µ—Ñ–∏–∫—Å–æ–º –ø—É—Ç–∏ URL) –∏ –Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –∏—Ö –∫ –Ω—É–∂–Ω—ã–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º —ç—Ç–æ–≥–æ *–¥—Ä—É–≥–æ–≥–æ* –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä { #one-process-per-container }

–í —Ç–∞–∫–æ–º —Å—Ü–µ–Ω–∞—Ä–∏–∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –∏–º–µ—Ç—å **–æ–¥–∏–Ω (Uvicorn) –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, —Ç–∞–∫ –∫–∞–∫ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è —É–∂–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞.

–ü–æ—ç—Ç–æ–º—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ **–Ω–µ –Ω—É–∂–Ω–æ** –ø–æ–¥–Ω–∏–º–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ—Ä–∫–µ—Ä–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä —á–µ—Ä–µ–∑ –æ–ø—Ü–∏—é –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ `--workers`. –ù—É–∂–µ–Ω **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å Uvicorn** –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–Ω–æ, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤).

–ù–∞–ª–∏—á–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–∫–∞–∫ –ø—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–æ—Ä–∫–µ—Ä–∞—Ö) —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç **–ª–∏—à–Ω—é—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å**, –∫–æ—Ç–æ—Ä—É—é, –≤–µ—Ä–æ—è—Ç–Ω–æ, —É–∂–µ –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è –≤–∞—à–∞ –∫–ª–∞—Å—Ç–µ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞.

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ –æ—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏ { #containers-with-multiple-processes-and-special-cases }

–ö–æ–Ω–µ—á–Ω–æ, –µ—Å—Ç—å **–æ—Å–æ–±—ã–µ —Å–ª—É—á–∞–∏**, –∫–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ **–≤–æ—Ä–∫–µ—Ä–∞–º–∏ Uvicorn** –≤–Ω—É—Ç—Ä–∏.

–í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ü–∏—é –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ `--workers`, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤:

```{ .dockerfile .annotate }
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

COPY ./app /code/app

# (1)!
CMD ["fastapi", "run", "app/main.py", "--port", "80", "--workers", "4"]
```

1. –ó–¥–µ—Å—å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø—Ü–∏—é `--workers`, —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —á–∏—Å–ª–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ —Ä–∞–≤–Ω—ã–º 4.

–ü—Ä–∏–º–µ—Ä—ã, –∫–æ–≥–¥–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–º–µ—Å—Ç–Ω–æ:

#### –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ { #a-simple-app }

–í–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –µ—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ**, —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –Ω–∞ **–æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ**, –∞ –Ω–µ –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.

#### Docker Compose { #docker-compose }

–í—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞—Ç—å –Ω–∞ **–æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ** (–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–µ) —Å **Docker Compose**, –∏ —É –≤–∞—Å –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–µ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–≤ Docker Compose), —Å–æ—Ö—Ä–∞–Ω—è—è –æ–±—â—É—é —Å–µ—Ç—å –∏ **–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É –Ω–∞–≥—Ä—É–∑–∫–∏**.

–¢–æ–≥–¥–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å **–æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —Å **–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç **–Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ—Ä–∫–µ—Ä–æ–≤** –≤–Ω—É—Ç—Ä–∏.

---

–ì–ª–∞–≤–Ω–æ–µ ‚Äî **–Ω–∏ –æ–¥–Ω–æ** –∏–∑ —ç—Ç–∏—Ö –ø—Ä–∞–≤–∏–ª –Ω–µ —è–≤–ª—è–µ—Ç—Å—è **—Å—Ç—Ä–æ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º**. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∏–¥–µ–∏, —á—Ç–æ–±—ã **–æ—Ü–µ–Ω–∏—Ç—å —Å–≤–æ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ª—É—á–∞–π** –∏ —Ä–µ—à–∏—Ç—å, –∫–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ª—É—á—à–µ –¥–ª—è –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã, —É—á–∏—Ç—ã–≤–∞—è:

* –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî HTTPS
* –ó–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
* –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
* –†–µ–ø–ª–∏–∫–∞—Ü–∏—é (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
* –ü–∞–º—è—Ç—å
* –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

## –ü–∞–º—è—Ç—å { #memory }

–ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, —É –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—É–¥–µ—Ç –±–æ–ª–µ–µ-–º–µ–Ω–µ–µ —á—ë—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –æ–±—ä—ë–º –ø–æ—Ç—Ä–µ–±–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏).

–ó–∞—Ç–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å —Ç–∞–∫–∏–µ –∂–µ –ª–∏–º–∏—Ç—ã –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ –ø–∞–º—è—Ç–∏ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ **Kubernetes**). –¢–∞–∫ —Å–∏—Å—Ç–µ–º–∞ —Å–º–æ–∂–µ—Ç **—Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** –Ω–∞ **–¥–æ—Å—Ç—É–ø–Ω—ã—Ö –º–∞—à–∏–Ω–∞—Ö**, —É—á–∏—Ç—ã–≤–∞—è –æ–±—ä—ë–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –ø–∞–º—è—Ç–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–∞–º—è—Ç–∏ –≤ –º–∞—à–∏–Ω–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞.

–ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ **–ø—Ä–æ—Å—Ç–æ–µ**, —ç—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, **–Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–±–ª–µ–º–æ–π**, –∏ –∂—ë—Å—Ç–∫–∏–µ –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏ –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å. –ù–æ –µ—Å–ª–∏ –≤—ã **–∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏** (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –º–æ–¥–µ–ª—è–º–∏ **–ú–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è**), –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç—Å—è, –∏ –æ—Ç—Ä–µ–≥—É–ª–∏—Ä—É–π—Ç–µ **—á–∏—Å–ª–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤** –Ω–∞ **–∫–∞–∂–¥–æ–π –º–∞—à–∏–Ω–µ** (–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –¥–æ–±–∞–≤—å—Ç–µ –º–∞—à–∏–Ω—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä).

–ï—Å–ª–∏ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ **–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**, –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∏—Ö —Å—É–º–º–∞—Ä–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ **–Ω–µ –ø—Ä–µ–≤—ã—Å–∏—Ç –¥–æ—Å—Ç—É–ø–Ω—É—é –ø–∞–º—è—Ç—å**.

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã { #previous-steps-before-starting-and-containers }

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, Docker, Kubernetes), –µ—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–∞.

### –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ { #multiple-containers }

–ï—Å–ª–∏ —É –≤–∞—Å **–Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**, –∏, –≤–µ—Ä–æ—è—Ç–Ω–æ, –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ **Kubernetes**), —Ç–æ –≤—ã, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –∑–∞—Ö–æ—Ç–∏—Ç–µ –∏–º–µ—Ç—å **–æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π **–ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏** –≤ –æ–¥–Ω–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏ –æ–¥–Ω–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ **–¥–æ** –∑–∞–ø—É—Å–∫–∞ —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤-–≤–æ—Ä–∫–µ—Ä–æ–≤.

/// info | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Kubernetes, —ç—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, –±—É–¥–µ—Ç <a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/" class="external-link" target="_blank">Init Container</a>.

///

–ï—Å–ª–∏ –≤ –≤–∞—à–µ–º —Å–ª—É—á–∞–µ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ–º, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ **–º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î, –∞ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ë–î), –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∏—Ö –≤ –∫–∞–∂–¥–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞.

### –û–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä { #single-container }

–ï—Å–ª–∏ —É –≤–∞—Å –ø—Ä–æ—Å—Ç–∞—è —Å—Ö–µ–º–∞ —Å **–æ–¥–Ω–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ **–≤–æ—Ä–∫–µ—Ä–æ–≤** (–∏–ª–∏ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å), –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –≤ —ç—Ç–æ–º –∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

### –ë–∞–∑–æ–≤—ã–π Docker-–æ–±—Ä–∞–∑ { #base-docker-image }

–†–∞–Ω–µ–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Docker-–æ–±—Ä–∞–∑ FastAPI: <a href="https://github.com/tiangolo/uvicorn-gunicorn-fastapi-docker" class="external-link" target="_blank">tiangolo/uvicorn-gunicorn-fastapi</a>. –°–µ–π—á–∞—Å –æ–Ω –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ —É—Å—Ç–∞—Ä–µ–≤—à–∏–π. ‚õîÔ∏è

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤–∞–º **–Ω–µ —Å—Ç–æ–∏—Ç** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑ (–∏–ª–∏ –∫–∞–∫–æ–π-–ª–∏–±–æ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π).

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **Kubernetes** (–∏–ª–∏ –¥—Ä—É–≥–æ–µ) –∏ —É–∂–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ **—Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é** –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–ª–∞—Å—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤**, –≤ —ç—Ç–∏—Ö —Å–ª—É—á–∞—è—Ö –ª—É—á—à–µ **—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ —Å –Ω—É–ª—è**, –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ –≤—ã—à–µ: [–°–æ–∑–¥–∞—Ç—å Docker-–æ–±—Ä–∞–∑ –¥–ª—è FastAPI](#build-a-docker-image-for-fastapi).

–ê –µ—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ—Ä–∫–µ—Ä–æ–≤, –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ü–∏—é –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ `--workers`.

/// note | –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏

–≠—Ç–æ—Ç Docker-–æ–±—Ä–∞–∑ –±—ã–ª —Å–æ–∑–¥–∞–Ω –≤ —Ç–æ –≤—Ä–µ–º—è, –∫–æ–≥–¥–∞ Uvicorn –Ω–µ —É–º–µ–ª —É–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—Ç—å ¬´—É–ø–∞–≤—à–∏—Ö¬ª –≤–æ—Ä–∫–µ—Ä–æ–≤, –∏ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Gunicorn –≤–º–µ—Å—Ç–µ —Å Uvicorn, —á—Ç–æ –¥–æ–±–∞–≤–ª—è–ª–æ –∑–∞–º–µ—Ç–Ω—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –ª–∏—à—å –±—ã Gunicorn —É–ø—Ä–∞–≤–ª—è–ª –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–ª –≤–æ—Ä–∫–µ—Ä–æ–≤ Uvicorn.

–ù–æ —Ç–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ Uvicorn (–∏ –∫–æ–º–∞–Ω–¥–∞ `fastapi`) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `--workers`, –Ω–µ—Ç –ø—Ä–∏—á–∏–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π Docker-–æ–±—Ä–∞–∑ –≤–º–µ—Å—Ç–æ —Å–±–æ—Ä–∫–∏ —Å–≤–æ–µ–≥–æ (–∫–æ–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç–æ–ª—å–∫–æ –∂–µ üòÖ).

///

## –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ { #deploy-the-container-image }

–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ —É –≤–∞—Å –µ—Å—Ç—å –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (Docker), –µ–≥–æ –º–æ–∂–Ω–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏.

–ù–∞–ø—Ä–∏–º–µ—Ä:

* –° **Docker Compose** –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
* –í –∫–ª–∞—Å—Ç–µ—Ä–µ **Kubernetes**
* –í –∫–ª–∞—Å—Ç–µ—Ä–µ Docker Swarm Mode
* –° –¥—Ä—É–≥–∏–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä Nomad
* –° –æ–±–ª–∞—á–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–∞—à –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –µ–≥–æ

## Docker-–æ–±—Ä–∞–∑ —Å `uv` { #docker-image-with-uv }

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">uv</a> –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º, —Å–ª–µ–¥—É–π—Ç–µ –∏—Ö <a href="https://docs.astral.sh/uv/guides/integration/docker/" class="external-link" target="_blank">—Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤—É –ø–æ Docker –¥–ª—è uv</a>.

## –†–µ–∑—é–º–µ { #recap }

–ò—Å–ø–æ–ª—å–∑—É—è —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, **Docker** –∏ **Kubernetes**), –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç—å –≤—Å–µ **–∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è**:

* HTTPS
* –ó–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
* –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
* –†–µ–ø–ª–∏–∫–∞—Ü–∏—è (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤)
* –ü–∞–º—è—Ç—å
* –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

–í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –≤—ã, –≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–µ –∑–∞—Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫–æ–π-–ª–∏–±–æ –±–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑, –∞ –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ **—Å–æ–±–µ—Ä—ë—Ç–µ –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –Ω—É–ª—è** –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ Docker-–æ–±—Ä–∞–∑–∞ Python.

–ó–∞–±–æ—Ç—è—Å—å –æ **–ø–æ—Ä—è–¥–∫–µ**  –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –≤ `Dockerfile`–∏ –∏—Å–ø–æ–ª—å–∑—É—è **–∫—ç—à Docker**, –≤—ã –º–æ–∂–µ—Ç–µ **–º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**, —á—Ç–æ–±—ã –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–∏ –Ω–µ —Å–∫—É—á–∞—Ç—å). üòé

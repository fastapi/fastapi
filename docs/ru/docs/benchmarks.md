# Бенчмарки

Независимые бенчмарки TechEmpower показывают, что приложения на **FastAPI**, запущенные под Uvicorn, <a href="https://www.techempower.com/benchmarks/#section=test&runid=7464e520-0dc2-473d-bd34-dbdfd7e85911&hw=ph&test=query&l=zijzen-7" class="external-link" target="_blank">, являются одними из самых быстрых среди доступных Python-фреймворков</a>, медленнее только самих Starlette и Uvicorn (используемых внутри FastAPI). (*)

Но при проверке бенчмарков и срарвнений вам следует иметь в виду следующее.

## Бенчмарки и скорость

Когда вы проверяете бенчмарки, часто можно наблюдать, что несколько инструментов разных типов сравниваются как эквивалентные.

В частности, Uvicorn, Starlette и FastAPI сравниваются вместе (среди многих других инструментов).

Чем проще проблема, которую решает инструмент, тем выше его производительность. И большинство бенчмарков не тестируют дополнительные функции, предоставляемые инструментом.

Иерархия имеет следующий вид:

* **Uvicorn**: ASGI-сервер
    * **Starlette**: (использует Uvicorn) веб-микрофреймворк
        * **FastAPI**: (использует Starlette) API-микрофреймворк с несколькими дополнительными функциями для построения API с валидацией данных и т.д.

* **Uvicorn**:
    * Будет иметь лучшую производительность, так как не имеет большого количества дополнительного кода, кроме самого сервера.
    * Вы бы не написали приложение на Uvicorn напрямую. Это означало бы, что ваш код должен включать как минимум весь 
    код, предоставляемый Starlette (или **FastAPI**). И если вы это сделаете, ваше окончательное приложение будет иметь те же накладные расходы, что и при использовании фреймворка, и минимизировать код вашего приложения и ошибки.
    * Если вы сравниваете Uvicorn, сравнивайте его с Daphne, Hypercorn, uWSGI и другими серверами.
* **Starlette**:
    * Будет иметь лучшую производительность после Uvicorn. Фактически Starlette использует Uvicorn для запуска приложения. Таким образом, он, вероятно, может быть «медленнее», чем Uvicorn, только за счет выполнения большего количества кода.
    * Но он предоставляет вам инструменты для создания простых веб-приложений с маршрутизацией по путям и т.д.
    * Если вы сравниваете Starlette, сравнивайте его с Sanic, Flask, Django и другими веб-фреймворками (или микрофреймворками).
* **FastAPI**:
    * Так же как Starlette использует Uvicorn и не может быть быстрее него, **FastAPI** использует Starlette, то есть он не может быть быстрее Starlette.
    * FastAPI предоставляет больше возможностей поверх Starlette. Функции, которые вам почти всегда нужны при создании API, такие как проверка данных и сериализация. Используя его, вы получаете автоматическую документацию бесплатно (автоматическая документация даже не увеличивает накладные расходы на запущенные приложения, она создается при запуске).
    * Если вы не использовали FastAPI и использовали Starlette напрямую (или другой инструмент вроде Sanic, Flask, Responder и т.д.), вам пришлось бы самостоятельно реализовать всю валидацию и сериализацию данных. Таким образом, ваше итоговое приложение имело бы такие же накладные расходы, как если бы оно было создано с использованием FastAPI. И во многих случаях валидация и сериализация данных представляют собой самый большой объем кода, написанного в приложениях.
    * Таким образом, используя FastAPI, вы экономите время разработки, количество ошибок, количество строк кода, и вы, вероятно, получите такую же производительность (или лучше), которую получили бы, если бы не использовали его (поскольку вам пришлось бы реализовать все это самостоятельно).
    * Если вы сравниваете FastAPI, сравните его с фреймворком веб-приложений (или набором инструментов), который обеспечивает валидацию данных, сериализацию и документацию, к примеру, Flask-apispec, NestJS, Molten и другими фреймворками.

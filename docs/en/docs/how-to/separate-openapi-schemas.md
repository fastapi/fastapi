# Separate OpenAPI Schemas for Input and Output (or not)

When using **Pydantic v2**, the generated OpenAPI is a bit more exact and **correct** than before. ðŸ˜Ž

In fact, in some cases, it will even have **two JSON Schemas** in OpenAPI for the same Pydantic model, for input and output, depending on if they have **default values**.

Let's see how that works and how to change it if you need to do that.

## Pydantic Models for Input and Output

Let's say you have a Pydantic model with default values, like this one:


```Python hl_lines="9"
{!../../../docs_src/separate_openapi_schemas/tutorial001.py[ln:1-9]!}

# Code below omitted ðŸ‘‡
```

<details>
<summary>ðŸ‘€ Full file preview</summary>

```Python
{!../../../docs_src/separate_openapi_schemas/tutorial001.py!}
```

</details>

If you use this model as an input like here:

```Python hl_lines="16"
{!../../../docs_src/separate_openapi_schemas/tutorial001.py[ln:1-17]!}

# Code below omitted ðŸ‘‡
```

<details>
<summary>ðŸ‘€ Full file preview</summary>

```Python
{!../../../docs_src/separate_openapi_schemas/tutorial001.py!}
```

</details>

...then the `description` field will **not be required**. Because it has a default value of `None`.

You can confirm that in the docs:

<img src="/img/tutorial/separate-openapi-schemas/image01.png">

But if you use the same model as an output, like here:

```Python hl_lines="21"
{!../../../docs_src/separate_openapi_schemas/tutorial001.py!}
```

...then because `description` has a default value, if you **don't return anything** for that field, it will still have that **default value**.

This means that it will **always have a value**, it's just that sometimes the value could be `None` (or `null` in the JSON output).

That means that, clients using your API don't have to check if the value exists or not, they can **asume the field will always be there**, but just that in some cases it will have the default value of `None`.

The way to describe this in OpenAPI, is to mark that field as **required**, because it will always be there.

Because of that, the JSON Schema for a model can be different depending on if it's used for **input or output**, for input the `description` will **not be required**, for output it will be **required**.

You can confirm that in the docs too:

<img src="/img/tutorial/separate-openapi-schemas/image02.png">

With this feature from **Pydantic v2**, your API documentation is more **precise**, and if you have autogenerated clients and SDKs, they will be more precise too, with a better **developer experience** and consistency. ðŸŽ‰

## Do not Separate Schemas

Now, there are some cases where you might want to have the **same schema for input and output**.

Probably the main use case for this is if you already have some autogenerated client code/SDKs and you don't want to update all the models yet, you probably will want to do it at some point, but maybe not right now.

In that case, you can disable this feature in **FastAPI**, with the parameter `separate_input_output_schemas=False`.

```Python hl_lines="12"
{!../../../docs_src/separate_openapi_schemas/tutorial002.py!}
```

And now there will be one single schema for input and output for each model:

<img src="/img/tutorial/separate-openapi-schemas/image03.png">

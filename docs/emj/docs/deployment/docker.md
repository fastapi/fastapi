# FastAPI ğŸ“¦ - â˜

ğŸ•â” ğŸ›  FastAPI ğŸˆ¸ âš  ğŸ¯ ğŸ— **ğŸ’¾ ğŸ“¦ ğŸ–¼**. âš«ï¸ ğŸ› ğŸ”¨ âš™ï¸ <a href="https://www.docker.com/" class="external-link" target="_blank">**â˜**</a>. ğŸ‘† ğŸ’ª â¤´ ğŸ›  ğŸ‘ˆ ğŸ“¦ ğŸ–¼ 1âƒ£ ğŸ‘©â€â¤â€ğŸ‘¨ ğŸ’ª ğŸŒŒ.

âš™ï¸ ğŸ’¾ ğŸ“¦ âœ”ï¸ ğŸ“š ğŸ“ˆ âœ… **ğŸ’‚â€â™‚**, **ğŸ”¬**, **ğŸ¦**, &amp; ğŸ.

!!! tip
    ğŸƒ &amp; âª ğŸ’­ ğŸ‘‰ ğŸ’© â“ ğŸ¦˜ [`Dockerfile` ğŸ”› ğŸ‘¶](#build-a-docker-image-for-fastapi).

<details>
<summary>ğŸ“ ğŸ® ğŸ‘¶</summary>

```Dockerfile
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

COPY ./app /code/app

CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80"]

# If running behind a proxy like Nginx or Traefik add --proxy-headers
# CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80", "--proxy-headers"]
```

</details>

## âš«ï¸â” ğŸ“¦

ğŸ“¦ (âœ´ï¸ ğŸ’¾ ğŸ“¦) ğŸ“¶ **ğŸ’¿** ğŸŒŒ ğŸ“¦ ğŸˆ¸ âœ… ğŸŒ ğŸ‘« ğŸ”— &amp; ğŸ’ª ğŸ“ âª ğŸš§ ğŸ‘« â âšªï¸â¡ï¸ ğŸ ğŸ“¦ (ğŸ ğŸˆ¸ âš–ï¸ ğŸ¦²) ğŸ âš™ï¸.

ğŸ’¾ ğŸ“¦ ğŸƒ âš™ï¸ ğŸ ğŸ’¾ ğŸ’¾ ğŸ¦  (ğŸ°, ğŸ•¹ ğŸ°, â˜ ğŸ’½, â™’ï¸). ğŸ‘‰ â›“ ğŸ‘ˆ ğŸ‘« ğŸ“¶ ğŸ’¿ (ğŸ”¬ ğŸŒ• ğŸ•¹ ğŸ° ğŸ‘ ğŸ‚ ğŸƒâ€â™‚ âš™ï¸).

ğŸ‘‰ ğŸŒŒ, ğŸ“¦ ğŸ´ **ğŸ¥ â„¹**, ğŸ’¸ â­ ğŸƒâ€â™‚ ğŸ›  ğŸ”— (ğŸ•¹ ğŸ° ğŸ”œ ğŸ´ ğŸŒ… ğŸŒ…).

ğŸ“¦ âœ”ï¸ ğŸ‘« ğŸ‘ **â** ğŸƒâ€â™‚ ğŸ›  (ğŸ› 1âƒ£ ğŸ› ), ğŸ“ âš™ï¸, &amp; ğŸ•¸, ğŸ”¬ ğŸ› , ğŸ’‚â€â™‚, ğŸ› , â™’ï¸.

## âš«ï¸â” ğŸ“¦ ğŸ–¼

**ğŸ“¦** ğŸƒ âšªï¸â¡ï¸ **ğŸ“¦ ğŸ–¼**.

ğŸ“¦ ğŸ–¼ **ğŸ»** â¬ ğŸŒ ğŸ“, ğŸŒ ğŸ”¢, &amp; ğŸ”¢ ğŸ“‹/ğŸ“‹ ğŸ‘ˆ ğŸ”œ ğŸ ğŸ“¦. **ğŸ»** ğŸ“¥ â›“ ğŸ‘ˆ ğŸ“¦ **ğŸ–¼** ğŸš« ğŸƒ, âš«ï¸ ğŸš« â– ğŸ› , âš«ï¸ ğŸ•´ ğŸ“¦ ğŸ“ &amp; ğŸ—ƒ.

ğŸ”… "**ğŸ“¦ ğŸ–¼**" ğŸ‘ˆ ğŸª ğŸ» ğŸš,"**ğŸ“¦**" ğŸ› ğŸ”— ğŸƒâ€â™‚ ğŸ‘, ğŸ‘œ ğŸ‘ˆ â– **ğŸ› **.

ğŸ•â” **ğŸ“¦** â–¶ &amp; ğŸƒâ€â™‚ (â–¶ âšªï¸â¡ï¸ **ğŸ“¦ ğŸ–¼**) âš«ï¸ ğŸ’ª âœ âš–ï¸ ğŸ”€ ğŸ“, ğŸŒ ğŸ”¢, â™’ï¸. ğŸ‘ˆ ğŸ”€ ğŸ”œ ğŸ”€ ğŸ•´ ğŸ‘ˆ ğŸ“¦, âœ‹ï¸ ğŸ”œ ğŸš« ğŸ˜£ ğŸ‘½ ğŸ“¦ ğŸ–¼ (ğŸ”œ ğŸš« ğŸ–Š ğŸ’¾).

ğŸ“¦ ğŸ–¼ â­ **ğŸ“‹** ğŸ“ &amp; ğŸš, âœ… `python` &amp; ğŸ“ `main.py`.

&amp; **ğŸ“¦** âš«ï¸ (ğŸ”… **ğŸ“¦ ğŸ–¼**) â˜‘ ğŸƒ ğŸ‘ ğŸ–¼, â­ **ğŸ› **. ğŸ‘, ğŸ“¦ ğŸƒ ğŸ•´ ğŸ•â” âš«ï¸ âœ”ï¸ **ğŸ›  ğŸƒ** (&amp; ğŸ› âš«ï¸ ğŸ•´ ğŸ‘ ğŸ› ). ğŸ“¦ â›”ï¸ ğŸ•â” ğŸ“¤ ğŸ™…â€â™‚ ğŸ›  ğŸƒ âš«ï¸.

## ğŸ“¦ ğŸ–¼

â˜ âœ”ï¸ 1âƒ£ ğŸ‘‘ ğŸ§° âœ &amp; ğŸ›  **ğŸ“¦ ğŸ–¼** &amp; **ğŸ“¦**.

&amp; ğŸ“¤ ğŸ“¢ <a href="https://hub.docker.com/" class="external-link" target="_blank">â˜ ğŸ¡</a> â® ğŸ¤-âš’ **ğŸ›‚ ğŸ“¦ ğŸ–¼** ğŸ“š ğŸ§°, ğŸŒ, ğŸ’½, &amp; ğŸˆ¸.

ğŸ–¼, ğŸ“¤ ğŸ›‚ <a href="https://hub.docker.com/_/python" class="external-link" target="_blank">ğŸ† ğŸ–¼</a>.

&amp; ğŸ“¤ ğŸ“š ğŸ ğŸ–¼ ğŸ ğŸ‘œ ğŸ’– ğŸ’½, ğŸ–¼:

* <a href="https://hub.docker.com/_/postgres" class="external-link" target="_blank">âœ³</a>
* <a href="https://hub.docker.com/_/mysql" class="external-link" target="_blank">âœ³</a>
* <a href="https://hub.docker.com/_/mongo" class="external-link" target="_blank">âœ³</a>
* <a href="https://hub.docker.com/_/redis" class="external-link" target="_blank">âœ³</a>, â™’ï¸.

âš™ï¸ ğŸ¤-âš’ ğŸ“¦ ğŸ–¼ âš«ï¸ ğŸ“¶ â© **ğŸŒ€** &amp; âš™ï¸ ğŸ ğŸ§°. ğŸ–¼, ğŸ”„ ğŸ‘… ğŸ†• ğŸ’½. ğŸŒ… ğŸ’¼, ğŸ‘† ğŸ’ª âš™ï¸ **ğŸ›‚ ğŸ–¼**, &amp; ğŸ”— ğŸ‘« â® ğŸŒ ğŸ”¢.

ğŸ‘ˆ ğŸŒŒ, ğŸ“š ğŸ’¼ ğŸ‘† ğŸ’ª ğŸ’¡ ğŸ”ƒ ğŸ“¦ &amp; â˜ &amp; ğŸ¤-âš™ï¸ ğŸ‘ˆ ğŸ’¡ â® ğŸ“š ğŸ ğŸ§° &amp; ğŸ¦².

, ğŸ‘† ğŸ”œ ğŸƒ **ğŸ’— ğŸ“¦** â® ğŸ ğŸ‘œ, ğŸ’– ğŸ’½, ğŸ† ğŸˆ¸, ğŸ•¸ ğŸ’½ â® ğŸ˜¥ ğŸ•¸ ğŸˆ¸, &amp; ğŸ”— ğŸ‘« ğŸ‘¯â€â™‚ï¸ ğŸ“¨ ğŸ‘« ğŸ”— ğŸ•¸.

ğŸŒ ğŸ“¦ ğŸ§¾ âš™ï¸ (ğŸ’– â˜ âš–ï¸ Kubernete) âœ”ï¸ ğŸ‘« ğŸ•¸ âš’ ğŸ›  ğŸ”˜ ğŸ‘«.

## ğŸ“¦ &amp; ğŸ› 

**ğŸ“¦ ğŸ–¼** ğŸ› ğŸ”Œ ğŸš® ğŸ—ƒ ğŸ”¢ ğŸ“‹ âš–ï¸ ğŸ“‹ ğŸ‘ˆ ğŸ”œ ğŸƒ ğŸ•â” **ğŸ“¦** â–¶ &amp; ğŸ”¢ ğŸš¶â€â™€ï¸ ğŸ‘ˆ ğŸ“‹. ğŸ“¶ ğŸ âš«ï¸â” ğŸ”œ ğŸš¥ âš«ï¸ ğŸ“‹ â¸.

ğŸ•â” **ğŸ“¦** â–¶, âš«ï¸ ğŸ”œ ğŸƒ ğŸ‘ˆ ğŸ“‹/ğŸ“‹ (ğŸ‘ ğŸ‘† ğŸ’ª ğŸ” âš«ï¸ &amp; âš’ âš«ï¸ ğŸƒ ğŸ ğŸ“‹/ğŸ“‹).

ğŸ“¦ ğŸƒ ğŸ“ **ğŸ‘‘ ğŸ› ** (ğŸ“‹ âš–ï¸ ğŸ“‹) ğŸƒ.

ğŸ“¦ ğŸ› âœ”ï¸ **ğŸ‘ ğŸ› **, âœ‹ï¸ âš«ï¸ ğŸ’ª â–¶ âœ³ âšªï¸â¡ï¸ ğŸ‘‘ ğŸ› , &amp; ğŸ‘ˆ ğŸŒŒ ğŸ‘† ğŸ”œ âœ”ï¸ **ğŸ’— ğŸ› ** ğŸ ğŸ“¦.

âœ‹ï¸ âš«ï¸ ğŸš« ğŸ’ª âœ”ï¸ ğŸƒâ€â™‚ ğŸ“¦ ğŸµ **ğŸŒ˜ 1âƒ£ ğŸƒâ€â™‚ ğŸ› **. ğŸš¥ ğŸ‘‘ ğŸ›  â›”ï¸, ğŸ“¦ â›”ï¸.

## ğŸ— â˜ ğŸ–¼ FastAPI

ğŸ†—, â¡ï¸ ğŸ— ğŸ•³ ğŸ”œ â— ğŸ‘¶

ğŸ‘¤ ğŸ”œ ğŸ¦ ğŸ‘† â” ğŸ— **â˜ ğŸ–¼** FastAPI **âšªï¸â¡ï¸ ğŸ–Œ**, âš“ï¸ ğŸ”› **ğŸ›‚ ğŸ†** ğŸ–¼.

ğŸ‘‰ âš«ï¸â” ğŸ‘† ğŸ”œ ğŸ’š **ğŸ† ğŸ’¼**, ğŸ–¼:

* âš™ï¸ **Kubernete** âš–ï¸ ğŸ ğŸ§°
* ğŸ•â” ğŸƒâ€â™‚ ğŸ”› **ğŸ“ ğŸ‘²**
* âš™ï¸ â˜ ğŸ•â€ğŸ¦º ğŸ‘ˆ ğŸ”œ ğŸƒ ğŸ“¦ ğŸ–¼ ğŸ‘†, â™’ï¸.

### ğŸ“¦ ğŸ“„

ğŸ‘† ğŸ”œ ğŸ› âœ”ï¸ **ğŸ“¦ ğŸ“„** ğŸ‘† ğŸˆ¸ ğŸ“.

âš«ï¸ ğŸ”œ ğŸª€ âœ´ï¸ ğŸ”› ğŸ§° ğŸ‘† âš™ï¸ **â** ğŸ‘ˆ ğŸ“„.

ğŸŒ… âš  ğŸŒŒ âš«ï¸ âœ”ï¸ ğŸ“ `requirements.txt` â® ğŸ“¦ ğŸ“› &amp; ğŸ‘« â¬, 1âƒ£ ğŸ“ â¸.

ğŸ‘† ğŸ”œ â†—ï¸ âš™ï¸ ğŸ ğŸ’­ ğŸ‘† âœ [ğŸ”ƒ FastAPI â¬](./versions.md){.internal-link target=_blank} âš’ â†” â¬.

ğŸ–¼, ğŸ‘† `requirements.txt` ğŸ’ª ğŸ‘€ ğŸ’–:

```
fastapi>=0.68.0,<0.69.0
pydantic>=1.8.0,<2.0.0
uvicorn>=0.15.0,<0.16.0
```

&amp; ğŸ‘† ğŸ”œ ğŸ› â ğŸ‘ˆ ğŸ“¦ ğŸ”— â® `pip`, ğŸ–¼:

<div class="termy">

```console
$ pip install -r requirements.txt
---> 100%
Successfully installed fastapi pydantic uvicorn
```

</div>

!!! info
    ğŸ“¤ ğŸ ğŸ“ &amp; ğŸ§° ğŸ”¬ &amp; â ğŸ“¦ ğŸ”—.

    ğŸ‘¤ ğŸ”œ ğŸ¦ ğŸ‘† ğŸ–¼ âš™ï¸ ğŸ¶ âª ğŸ“„ ğŸ”›. ğŸ‘¶

### âœ **FastAPI** ğŸ“Ÿ

* âœ `app` ğŸ“ &amp; â›” âš«ï¸.
* âœ ğŸ› ğŸ“ `__init__.py`.
* âœ `main.py` ğŸ“ â®:

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

### ğŸ“

ğŸ”œ ğŸ ğŸ— ğŸ“ âœ ğŸ“ `Dockerfile` â®:

```{ .dockerfile .annotate }
# (1)
FROM python:3.9

# (2)
WORKDIR /code

# (3)
COPY ./requirements.txt /code/requirements.txt

# (4)
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (5)
COPY ./app /code/app

# (6)
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80"]
```

1âƒ£. â–¶ âšªï¸â¡ï¸ ğŸ›‚ ğŸ† ğŸ§¢ ğŸ–¼.

2âƒ£. âš’ â® ğŸ‘· ğŸ“ `/code`.

    ğŸ‘‰ ğŸŒâ” ğŸ‘¥ ğŸ”œ ğŸš® `requirements.txt` ğŸ“ &amp; `app` ğŸ“.

3âƒ£. ğŸ“ ğŸ“ â® ğŸ“„ `/code` ğŸ“.

    ğŸ“ **ğŸ•´** ğŸ“ â® ğŸ“„ ğŸ¥‡, ğŸš« ğŸ‚ ğŸ“Ÿ.

    ğŸ‘‰ ğŸ“ **ğŸš« ğŸ”€ ğŸ›**, â˜ ğŸ”œ ğŸ” âš«ï¸ &amp; âš™ï¸ **ğŸ’¾** ğŸ‘‰ ğŸ”, ğŸ›  ğŸ’¾ â­ ğŸ” ğŸ’â€â™‚ï¸.

4âƒ£. â ğŸ“¦ ğŸ”— ğŸ“„ ğŸ“.

     `--no-cache-dir` ğŸ› ğŸ’¬ `pip` ğŸš« ğŸ–Š â¬ ğŸ“¦ ğŸŒ, ğŸ‘ˆ ğŸ•´ ğŸš¥ `pip` ğŸ”œ ğŸƒ ğŸ”„ â ğŸ ğŸ“¦, âœ‹ï¸ ğŸ‘ˆ ğŸš« ğŸ’¼ ğŸ•â” ğŸ‘· â® ğŸ“¦.

    !!! note
         `--no-cache-dir` ğŸ•´ ğŸ”— `pip`, âš«ï¸ âœ”ï¸ ğŸ•³ â® â˜ âš–ï¸ ğŸ“¦.

     `--upgrade` ğŸ› ğŸ’¬ `pip` â™» ğŸ“¦ ğŸš¥ ğŸ‘« âª â.

    â†©ï¸ â® ğŸ” ğŸ–¨ ğŸ“ ğŸ’ª ğŸ” **â˜ ğŸ’¾**, ğŸ‘‰ ğŸ” ğŸ”œ **âš™ï¸ â˜ ğŸ’¾** ğŸ•â” ğŸ’ª.

    âš™ï¸ ğŸ’¾ ğŸ‘‰ ğŸ” ğŸ”œ **ğŸ–Š** ğŸ‘† ğŸ“š **ğŸ•°** ğŸ•â” ğŸ— ğŸ–¼ ğŸ”„ &amp; ğŸ”„ â® ğŸ› , â†©ï¸ **â¬ &amp; â** ğŸŒ ğŸ”— **ğŸ”  ğŸ•°**.

5âƒ£. ğŸ“ `./app` ğŸ“ ğŸ”˜ `/code` ğŸ“.

    ğŸ‘‰ âœ”ï¸ ğŸŒ ğŸ“Ÿ â” âš«ï¸â” **ğŸ”€ ğŸŒ… ğŸ›** â˜ **ğŸ’¾** ğŸ† ğŸš« âš™ï¸ ğŸ‘‰ âš–ï¸ ğŸ™† **ğŸ“„ ğŸ”** ğŸ’ª.

    , âš«ï¸ âš  ğŸš® ğŸ‘‰ **ğŸ˜ ğŸ”š** `Dockerfile`, ğŸ”¬ ğŸ“¦ ğŸ–¼ ğŸ— ğŸ•°.

6âƒ£. âš’ **ğŸ“‹** ğŸƒ `uvicorn` ğŸ’½.

    `CMD` âœŠ ğŸ“‡ ğŸ», ğŸ”  ğŸ‘« ğŸ» âš«ï¸â” ğŸ‘† ğŸ”œ ğŸ† ğŸ“‹ â¸ ğŸ‘½ ğŸš€.

    ğŸ‘‰ ğŸ“‹ ğŸ”œ ğŸƒ âšªï¸â¡ï¸ **â® ğŸ‘· ğŸ“**, ğŸ `/code` ğŸ“ ğŸ‘† âš’ ğŸ”› â® `WORKDIR /code`.

    â†©ï¸ ğŸ“‹ ğŸ”œ â–¶ `/code` &amp; ğŸ”˜ âš«ï¸ ğŸ“ `./app` â® ğŸ‘† ğŸ“Ÿ, **Uvicorn** ğŸ”œ ğŸ’ª ğŸ‘€ &amp; **ğŸ—„** `app` âšªï¸â¡ï¸ `app.main`.

!!! tip
    ğŸ“„ âš«ï¸â” ğŸ”  â¸ ğŸ”¨ ğŸ–Š ğŸ”  ğŸ”¢ ğŸ’­ ğŸ“Ÿ. ğŸ‘¶

ğŸ‘† ğŸ”œ ğŸ”œ âœ”ï¸ ğŸ“ ğŸ“Š ğŸ’–:

```
.
â”œâ”€â”€ app
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ main.py
â”œâ”€â”€ Dockerfile
â””â”€â”€ requirements.txt
```

#### â›… ğŸ¤ â ğŸ—³

ğŸš¥ ğŸ‘† ğŸƒâ€â™‚ ğŸ‘† ğŸ“¦ â›… ğŸ¤ â ğŸ—³ (ğŸ“ âš™) ğŸ’– ğŸ‘Œ âš–ï¸ Traefik, ğŸš® ğŸ› `--proxy-headers`, ğŸ‘‰ ğŸ”œ ğŸ’¬ Uvicorn ğŸ’™ ğŸš ğŸ“¨ ğŸ‘ˆ ğŸ—³ ğŸ’¬ âš«ï¸ ğŸ‘ˆ ğŸˆ¸ ğŸƒ â›… ğŸ‡ºğŸ‡¸ğŸ”, â™’ï¸.

```Dockerfile
CMD ["uvicorn", "app.main:app", "--proxy-headers", "--host", "0.0.0.0", "--port", "80"]
```

#### â˜ ğŸ’¾

ğŸ“¤ âš  ğŸ± ğŸ‘‰ `Dockerfile`, ğŸ‘¥ ğŸ¥‡ ğŸ“ **ğŸ“ â® ğŸ”— ğŸ˜**, ğŸš« ğŸ‚ ğŸ“Ÿ. â¡ï¸ ğŸ‘¤ ğŸ’¬ ğŸ‘† âš«ï¸â” ğŸ‘ˆ.

```Dockerfile
COPY ./requirements.txt /code/requirements.txt
```

â˜ &amp; ğŸ ğŸ§° **ğŸ—** ğŸ‘‰ ğŸ“¦ ğŸ–¼ **ğŸ”**, ğŸš® **1âƒ£ ğŸ§½ ğŸ”› ğŸ” ğŸ**, â–¶ âšªï¸â¡ï¸ ğŸ” `Dockerfile` &amp; â ğŸ™† ğŸ“ âœ ğŸ”  ğŸ‘©â€ğŸŒ¾ `Dockerfile`.

â˜ &amp; ğŸ ğŸ§° âš™ï¸ **ğŸ”— ğŸ’¾** ğŸ•â” ğŸ— ğŸ–¼, ğŸš¥ ğŸ“ ğŸš« ğŸ”€ â†©ï¸ ğŸ ğŸ•° ğŸ— ğŸ“¦ ğŸ–¼, â¤´ âš«ï¸ ğŸ”œ **ğŸ¤-âš™ï¸ ğŸ ğŸ§½** âœ ğŸ ğŸ•°, â†©ï¸ ğŸ–¨ ğŸ“ ğŸ”„ &amp; ğŸ— ğŸ†• ğŸ§½ âšªï¸â¡ï¸ ğŸ–Œ.

â ğŸ“ ğŸ“ ğŸš« ğŸ¯ ğŸ“‰ ğŸ‘œ ğŸ’â€â™‚ï¸ ğŸŒ…, âœ‹ï¸ â†©ï¸ âš«ï¸ âš™ï¸ ğŸ’¾ ğŸ‘ˆ ğŸ”, âš«ï¸ ğŸ’ª **âš™ï¸ ğŸ’¾ â­ ğŸ”**. ğŸ–¼, âš«ï¸ ğŸ’ª âš™ï¸ ğŸ’¾ ğŸ‘©â€ğŸŒ¾ ğŸ‘ˆ â ğŸ”— â®:

```Dockerfile
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt
```

ğŸ“ â® ğŸ“¦ ğŸ“„ **ğŸ† ğŸš« ğŸ”€ ğŸ›**. , ğŸ–¨ ğŸ•´ ğŸ‘ˆ ğŸ“, â˜ ğŸ”œ ğŸ’ª **âš™ï¸ ğŸ’¾** ğŸ‘ˆ ğŸ”.

&amp; â¤´, â˜ ğŸ”œ ğŸ’ª **âš™ï¸ ğŸ’¾ â­ ğŸ”** ğŸ‘ˆ â¬ &amp; â ğŸ‘ˆ ğŸ”—. &amp; ğŸ“¥ ğŸŒâ” ğŸ‘¥ **ğŸ–Š ğŸ“š ğŸ•°**. ğŸ‘¶ ...&amp; â ğŸ˜© âŒ›. ğŸ‘¶ ğŸ‘¶

â¬ &amp; â ğŸ“¦ ğŸ”— **ğŸ’ª âœŠ â²**, âœ‹ï¸ âš™ï¸ **ğŸ’¾** ğŸ”œ **âœŠ ğŸ¥ˆ** ğŸŒ….

&amp; ğŸ‘† ğŸ”œ ğŸ— ğŸ“¦ ğŸ–¼ ğŸ”„ &amp; ğŸ”„ â® ğŸ›  âœ… ğŸ‘ˆ ğŸ‘† ğŸ“Ÿ ğŸ”€ ğŸ‘·, ğŸ“¤ ğŸ“š ğŸ“ˆ ğŸ•° ğŸ‘‰ ğŸ”œ ğŸ–Š.

â¤´, ğŸ˜ ğŸ”š `Dockerfile`, ğŸ‘¥ ğŸ“ ğŸŒ ğŸ“Ÿ. ğŸ‘‰ âš«ï¸â” **ğŸ”€ ğŸ† ğŸ›**, ğŸ‘¥ ğŸš® âš«ï¸ ğŸ˜ ğŸ”š, â†©ï¸ ğŸŒ– ğŸ•§, ğŸ•³ â® ğŸ‘‰ ğŸ” ğŸ”œ ğŸš« ğŸ’ª âš™ï¸ ğŸ’¾.

```Dockerfile
COPY ./app /code/app
```

### ğŸ— â˜ ğŸ–¼

ğŸ”œ ğŸ‘ˆ ğŸŒ ğŸ“ ğŸ¥‰, â¡ï¸ ğŸ— ğŸ“¦ ğŸ–¼.

* ğŸš¶ ğŸ— ğŸ“ (ğŸŒâ” ğŸ‘† `Dockerfile` , âš— ğŸ‘† `app` ğŸ“).
* ğŸ— ğŸ‘† FastAPI ğŸ–¼:

<div class="termy">

```console
$ docker build -t myimage .

---> 100%
```

</div>

!!! tip
    ğŸ‘€ `.` ğŸ”š, âš«ï¸ ğŸŒ“ `./`, âš«ï¸ ğŸ’¬ â˜ ğŸ“ âš™ï¸ ğŸ— ğŸ“¦ ğŸ–¼.

    ğŸ‘‰ ğŸ’¼, âš«ï¸ ğŸ â® ğŸ“ (`.`).

### â–¶ â˜ ğŸ“¦

* ğŸƒ ğŸ“¦ âš“ï¸ ğŸ”› ğŸ‘† ğŸ–¼:

<div class="termy">

```console
$ docker run -d --name mycontainer -p 80:80 myimage
```

</div>

## âœ… âš«ï¸

ğŸ‘† ğŸ”œ ğŸ’ª âœ… âš«ï¸ ğŸ‘† â˜ ğŸ“¦ ğŸ“›, ğŸ–¼: <a href="http://192.168.99.100/items/5?q=somequery" class="external-link" target="_blank">Http://192.168.99.100/items/5?q=somequery</a> âš–ï¸ <a href="http://127.0.0.1/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1/items/5?q=somequery</a> (âš–ï¸ ğŸŒ“, âš™ï¸ ğŸ‘† â˜ ğŸ¦ ).

ğŸ‘† ğŸ”œ ğŸ‘€ ğŸ•³ ğŸ’–:

```JSON
{"item_id": 5, "q": "somequery"}
```

## ğŸ“ ğŸ›  ğŸ©º

ğŸ”œ ğŸ‘† ğŸ’ª ğŸš¶ <a href="http://192.168.99.100/docs" class="external-link" target="_blank">Http://192.168.99.100/docs</a> âš–ï¸ <a href="http://127.0.0.1/docs" class="external-link" target="_blank">http://127.0.0.1/docs</a> (âš–ï¸ ğŸŒ“, âš™ï¸ ğŸ‘† â˜ ğŸ¦ ).

ğŸ‘† ğŸ”œ ğŸ‘€ ğŸ§ ğŸ“ ğŸ›  ğŸ§¾ (ğŸšš <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">ğŸ¦ ğŸš</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

## ğŸ› ğŸ›  ğŸ©º

&amp; ğŸ‘† ğŸ’ª ğŸš¶ <a href="http://192.168.99.100/redoc" class="external-link" target="_blank">Http://192.168.99.100/redoc</a> âš–ï¸ <a href="http://127.0.0.1/redoc" class="external-link" target="_blank">http://127.0.0.1/redoc</a> (âš–ï¸ ğŸŒ“, âš™ï¸ ğŸ‘† â˜ ğŸ¦ ).

ğŸ‘† ğŸ”œ ğŸ‘€ ğŸ› ğŸ§ ğŸ§¾ (ğŸšš <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ğŸ“„</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## ğŸ— â˜ ğŸ–¼ â® ğŸ‘-ğŸ“ FastAPI

ğŸš¥ ğŸ‘† FastAPI ğŸ‘ ğŸ“, ğŸ–¼, `main.py` ğŸµ `./app` ğŸ“, ğŸ‘† ğŸ“ ğŸ“Š ğŸ’ª ğŸ‘€ ğŸ’– ğŸ‘‰:

```
.
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ main.py
â””â”€â”€ requirements.txt
```

â¤´ ğŸ‘† ğŸ”œ âœ”ï¸ ğŸ”€ ğŸ”— â¡ ğŸ“ ğŸ“ ğŸ”˜ `Dockerfile`:

```{ .dockerfile .annotate hl_lines="10  13" }
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (1)
COPY ./main.py /code/

# (2)
CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "80"]
```

1âƒ£. ğŸ“ `main.py` ğŸ“ `/code` ğŸ“ ğŸ”— (ğŸµ ğŸ™† `./app` ğŸ“).

2âƒ£. ğŸƒ Uvicorn &amp; ğŸ’¬ âš«ï¸ ğŸ—„ `app` ğŸš âšªï¸â¡ï¸ `main` (â†©ï¸ ğŸ­ âšªï¸â¡ï¸ `app.main`).

â¤´ ğŸ”† Uvicorn ğŸ“‹ âš™ï¸ ğŸ†• ğŸ•¹ `main` â†©ï¸ `app.main` ğŸ—„ FastAPI ğŸš `app`.

## ğŸ›  ğŸ”§

â¡ï¸ ğŸ’¬ ğŸ”„ ğŸ”ƒ ğŸ [ğŸ›  ğŸ”§](./concepts.md){.internal-link target=_blank} âš– ğŸ“¦.

ğŸ“¦ âœ´ï¸ ğŸ§° ğŸ“‰ ğŸ›  **ğŸ— &amp; ğŸ› ** ğŸˆ¸, âœ‹ï¸ ğŸ‘« ğŸš« ğŸ›  ğŸ¯ ğŸ¯ ğŸµ ğŸ‘‰ **ğŸ›  ğŸ”§**, &amp; ğŸ“¤ ğŸ“š ğŸ’ª ğŸ›.

**ğŸ‘ ğŸ“°** ğŸ‘ˆ â® ğŸ”  ğŸ ğŸ› ğŸ“¤ ğŸŒŒ ğŸ“” ğŸŒ ğŸ›  ğŸ”§. ğŸ‘¶

â¡ï¸ ğŸ“„ ğŸ‘‰ **ğŸ›  ğŸ”§** âš– ğŸ“¦:

* ğŸ‡ºğŸ‡¸ğŸ”
* ğŸƒâ€â™‚ ğŸ”› ğŸ•´
* â
* ğŸ§¬ (ğŸ”¢ ğŸ›  ğŸƒ)
* ğŸ’¾
* â® ğŸ” â­ â–¶

## ğŸ‡ºğŸ‡¸ğŸ”

ğŸš¥ ğŸ‘¥ ğŸ¯ ğŸ”› **ğŸ“¦ ğŸ–¼** FastAPI ğŸˆ¸ (&amp; âª ğŸƒâ€â™‚ **ğŸ“¦**), ğŸ‡ºğŸ‡¸ğŸ” ğŸ› ğŸ”œ ğŸµ **ğŸ—œ** â•1ï¸âƒ£ ğŸ§°.

âš«ï¸ ğŸ’ª â•1ï¸âƒ£ ğŸ“¦, ğŸ–¼ â® <a href="https://traefik.io/" class="external-link" target="_blank">Traefik</a>, ğŸšš **ğŸ‡ºğŸ‡¸ğŸ”** &amp; **ğŸ§** ğŸ›  **ğŸ“„**.

!!! tip
    Traefik âœ”ï¸ ğŸ›  â® â˜, Kubernete, &amp; ğŸ, âš«ï¸ ğŸ“¶ â© âš’ ğŸ†™ &amp; ğŸ”— ğŸ‡ºğŸ‡¸ğŸ” ğŸ‘† ğŸ“¦ â® âš«ï¸.

ğŸ‘, ğŸ‡ºğŸ‡¸ğŸ” ğŸ’ª ğŸµ â˜ ğŸ•â€ğŸ¦º 1âƒ£ ğŸ‘« ğŸ•â€ğŸ¦º (âª ğŸƒ ğŸˆ¸ ğŸ“¦).

## ğŸƒâ€â™‚ ğŸ”› ğŸ•´ &amp; â

ğŸ“¤ ğŸ› â•1ï¸âƒ£ ğŸ§° ğŸˆš **â–¶ &amp; ğŸƒâ€â™‚** ğŸ‘† ğŸ“¦.

âš«ï¸ ğŸ’ª **â˜** ğŸ”—, **â˜ âœ**, **Kubernete**, **â˜ ğŸ•â€ğŸ¦º**, â™’ï¸.

ğŸŒ… (âš–ï¸ ğŸŒ) ğŸ’¼, ğŸ“¤ ğŸ™… ğŸ› ğŸ›  ğŸƒ ğŸ“¦ ğŸ”› ğŸ•´ &amp; ğŸ›  â ğŸ”› âŒ. ğŸ–¼, â˜, âš«ï¸ ğŸ“‹ â¸ ğŸ› `--restart`.

ğŸµ âš™ï¸ ğŸ“¦, âš’ ğŸˆ¸ ğŸƒ ğŸ”› ğŸ•´ &amp; â® â ğŸ’ª âš  &amp; âš . âœ‹ï¸ ğŸ•â” **ğŸ‘· â® ğŸ“¦** ğŸŒ… ğŸ’¼ ğŸ‘ˆ ğŸ›  ğŸ”Œ ğŸ”¢. ğŸ‘¶

## ğŸ§¬ - ğŸ”¢ ğŸ› 

ğŸš¥ ğŸ‘† âœ”ï¸ <abbr title="A group of machines that are configured to be connected and work together in some way.">ğŸŒ‘</abbr> ğŸ° â® **â˜**, â˜ ğŸ ğŸ“³, ğŸ––, âš–ï¸ â•1ï¸âƒ£ ğŸ ğŸ— âš™ï¸ ğŸ›  ğŸ“ ğŸ“¦ ğŸ”› ğŸ’— ğŸ°, â¤´ ğŸ‘† ğŸ”œ ğŸ² ğŸ’š **ğŸµ ğŸ§¬** **ğŸŒ‘ ğŸš** â†©ï¸ âš™ï¸ **ğŸ›  ğŸ‘¨â€ğŸ’¼** (ğŸ’– ğŸ â® ğŸ‘¨â€ğŸ­) ğŸ”  ğŸ“¦.

1âƒ£ ğŸ“š ğŸ“ ğŸ“¦ ğŸ§¾ âš™ï¸ ğŸ’– Kubernete ğŸ› âœ”ï¸ ğŸ›  ğŸŒŒ ğŸšš **ğŸ§¬ ğŸ“¦** âª ğŸ”— **ğŸ“ âš–** ğŸ“¨ ğŸ“¨. ğŸŒ **ğŸŒ‘ ğŸš**.

ğŸ“š ğŸ’¼, ğŸ‘† ğŸ”œ ğŸ² ğŸ’š ğŸ— **â˜ ğŸ–¼ âšªï¸â¡ï¸ ğŸ–Œ** [ğŸ”¬ ğŸ”›](#dockerfile), â ğŸ‘† ğŸ”—, &amp; ğŸƒâ€â™‚ **ğŸ‘ Uvicorn ğŸ› ** â†©ï¸ ğŸƒâ€â™‚ ğŸ•³ ğŸ’– ğŸ â® Uvicorn ğŸ‘¨â€ğŸ­.

### ğŸ“ âš™

ğŸ•â” âš™ï¸ ğŸ“¦, ğŸ‘† ğŸ”œ ğŸ› âœ”ï¸ ğŸ¦² **ğŸ‘‚ ğŸ”› ğŸ‘‘ â›´**. âš«ï¸ ğŸ’ª ğŸ² â•1ï¸âƒ£ ğŸ“¦ ğŸ‘ˆ **ğŸ¤ â ğŸ—³** ğŸµ **ğŸ‡ºğŸ‡¸ğŸ”** âš–ï¸ ğŸ ğŸ§°.

ğŸ‘‰ ğŸ¦² ğŸ”œ âœŠ **ğŸ“** ğŸ“¨ &amp; ğŸ“ ğŸ‘ˆ ğŸ‘ª ğŸ‘¨â€ğŸ­ (ğŸ¤) **âš–** ğŸŒŒ, âš«ï¸ ğŸ› ğŸ¤™ **ğŸ“ âš™**.

!!! tip
    ğŸ **ğŸ¤ â ğŸ—³** ğŸ¦² âš™ï¸ ğŸ‡ºğŸ‡¸ğŸ” ğŸ”œ ğŸ² **ğŸ“ âš™**.

&amp; ğŸ•â” ğŸ‘· â® ğŸ“¦, ğŸ âš™ï¸ ğŸ‘† âš™ï¸ â–¶ &amp; ğŸ›  ğŸ‘« ğŸ”œ âª âœ”ï¸ ğŸ”— ğŸ§° ğŸ“¶ **ğŸ•¸ ğŸ“»** (âœ… ğŸ‡ºğŸ‡¸ğŸ” ğŸ“¨) âšªï¸â¡ï¸ ğŸ‘ˆ **ğŸ“ âš™** (ğŸ‘ˆ ğŸ’ª **ğŸ¤ â ğŸ—³**) ğŸ“¦(â“‚) â® ğŸ‘† ğŸ“±.

### 1âƒ£ ğŸ“ âš™ - ğŸ’— ğŸ‘¨â€ğŸ­ ğŸ“¦

ğŸ•â” ğŸ‘· â® **Kubernete** âš–ï¸ ğŸ ğŸ“ ğŸ“¦ ğŸ§¾ âš™ï¸, âš™ï¸ ğŸ‘« ğŸ”— ğŸ•¸ ğŸ›  ğŸ”œ âœ” ğŸ‘ **ğŸ“ âš™** ğŸ‘ˆ ğŸ‘‚ ğŸ”› ğŸ‘‘ **â›´** ğŸ“¶ ğŸ“» (ğŸ“¨) ğŸ² **ğŸ’— ğŸ“¦** ğŸƒ ğŸ‘† ğŸ“±.

ğŸ”  ğŸ‘« ğŸ“¦ ğŸƒâ€â™‚ ğŸ‘† ğŸ“± ğŸ”œ ğŸ› âœ”ï¸ **1âƒ£ ğŸ› ** (âœ… Uvicorn ğŸ›  ğŸƒ ğŸ‘† FastAPI ğŸˆ¸). ğŸ‘« ğŸ”œ ğŸŒ **ğŸŒ“ ğŸ“¦**, ğŸƒâ€â™‚ ğŸ ğŸ‘œ, âœ‹ï¸ ğŸ”  â® ğŸš® ğŸ‘ ğŸ› , ğŸ’¾, â™’ï¸. ğŸ‘ˆ ğŸŒŒ ğŸ‘† ğŸ”œ âœŠ ğŸ“ˆ **ğŸ› ** **ğŸ ğŸš** ğŸ’½, âš–ï¸ **ğŸ ğŸ°**.

&amp; ğŸ“ ğŸ“¦ âš™ï¸ â® **ğŸ“ âš™** ğŸ”œ **ğŸ“ ğŸ“¨** ğŸ”  1âƒ£ ğŸ“¦ â® ğŸ‘† ğŸ“± **ğŸ”„**. , ğŸ”  ğŸ“¨ ğŸ’ª ğŸµ 1âƒ£ ğŸ’— **ğŸ” ğŸ“¦** ğŸƒ ğŸ‘† ğŸ“±.

&amp; ğŸ› ğŸ‘‰ **ğŸ“ âš™** ğŸ”œ ğŸ’ª ğŸµ ğŸ“¨ ğŸ‘ˆ ğŸš¶ *ğŸ* ğŸ“± ğŸ‘† ğŸŒ‘ (âœ… ğŸ ğŸ†”, âš–ï¸ ğŸ”½ ğŸ ğŸ“› â¡ ğŸ”¡), &amp; ğŸ”œ ğŸ“¶ ğŸ‘ˆ ğŸ“» â–¶ï¸ ğŸ“¦ *ğŸ‘ˆ ğŸ* ğŸˆ¸ ğŸƒâ€â™‚ ğŸ‘† ğŸŒ‘.

### 1âƒ£ ğŸ›  ğŸ“ ğŸ“¦

ğŸ‘‰ ğŸ† ğŸ˜, ğŸ‘† ğŸ² ğŸ”œ ğŸ’š âœ”ï¸ **ğŸ‘ (Uvicorn) ğŸ›  ğŸ“ ğŸ“¦**, ğŸ‘† ğŸ”œ âª ğŸšš ğŸ§¬ ğŸŒ‘ ğŸš.

, ğŸ‘‰ ğŸ’¼, ğŸ‘† **ğŸ”œ ğŸš«** ğŸ’š âœ”ï¸ ğŸ›  ğŸ‘¨â€ğŸ’¼ ğŸ’– ğŸ â® Uvicorn ğŸ‘¨â€ğŸ­, âš–ï¸ Uvicorn âš™ï¸ ğŸš® ğŸ‘ Uvicorn ğŸ‘¨â€ğŸ­. ğŸ‘† ğŸ”œ ğŸ’š âœ”ï¸ **ğŸ‘ Uvicorn ğŸ› ** ğŸ“ ğŸ“¦ (âœ‹ï¸ ğŸ² ğŸ’— ğŸ“¦).

âœ”ï¸ â•1ï¸âƒ£ ğŸ›  ğŸ‘¨â€ğŸ’¼ ğŸ”˜ ğŸ“¦ (ğŸ”œ â® ğŸ âš–ï¸ Uvicorn ğŸ›  Uvicorn ğŸ‘¨â€ğŸ­) ğŸ”œ ğŸ•´ ğŸš® **ğŸ™ƒ ğŸ”€** ğŸ‘ˆ ğŸ‘† ğŸŒ… ğŸ² âª âœŠ ğŸ’… â® ğŸ‘† ğŸŒ‘ âš™ï¸.

### ğŸ“¦ â® ğŸ’— ğŸ›  &amp; ğŸ ğŸ’¼

â†—ï¸, ğŸ“¤ **ğŸ ğŸ’¼** ğŸŒâ” ğŸ‘† ğŸ’ª ğŸ’š âœ”ï¸ **ğŸ“¦** â® **ğŸ ğŸ›  ğŸ‘¨â€ğŸ’¼** â–¶ ğŸ“š **Uvicorn ğŸ‘¨â€ğŸ­ ğŸ› ** ğŸ”˜.

ğŸ“š ğŸ’¼, ğŸ‘† ğŸ’ª âš™ï¸ **ğŸ›‚ â˜ ğŸ–¼** ğŸ‘ˆ ğŸ”Œ **ğŸ** ğŸ›  ğŸ‘¨â€ğŸ’¼ ğŸƒâ€â™‚ ğŸ’— **Uvicorn ğŸ‘¨â€ğŸ­ ğŸ› **, &amp; ğŸ”¢ âš’ ğŸ”† ğŸ”¢ ğŸ‘¨â€ğŸ­ âš“ï¸ ğŸ”› â® ğŸ’½ ğŸš ğŸ”. ğŸ‘¤ ğŸ”œ ğŸ’¬ ğŸ‘† ğŸŒ… ğŸ”ƒ âš«ï¸ ğŸ”› [ğŸ›‚ â˜ ğŸ–¼ â® ğŸ - Uvicorn](#official-docker-image-with-gunicorn-uvicorn).

ğŸ“¥ ğŸ–¼ ğŸ•â” ğŸ‘ˆ ğŸ’ª âš’ ğŸ”‘:

#### ğŸ™… ğŸ“±

ğŸ‘† ğŸ’ª ğŸ’š ğŸ›  ğŸ‘¨â€ğŸ’¼ ğŸ“¦ ğŸš¥ ğŸ‘† ğŸˆ¸ **ğŸ™… ğŸ¥ƒ** ğŸ‘ˆ ğŸ‘† ğŸš« ğŸ’ª (ğŸ¥ ğŸš«) ğŸ‘Œ-ğŸ¶ ğŸ”¢ ğŸ›  ğŸ’â€â™‚ï¸ ğŸŒ…, &amp; ğŸ‘† ğŸ’ª âš™ï¸ ğŸ§ ğŸ”¢ (â® ğŸ›‚ â˜ ğŸ–¼), &amp; ğŸ‘† ğŸƒâ€â™‚ âš«ï¸ ğŸ”› **ğŸ‘ ğŸ’½**, ğŸš« ğŸŒ‘.

#### â˜ âœ

ğŸ‘† ğŸ’ª ğŸ›  **ğŸ‘ ğŸ’½** (ğŸš« ğŸŒ‘) â® **â˜ âœ**, ğŸ‘† ğŸš«ğŸ”œ âœ”ï¸ â© ğŸŒŒ ğŸ›  ğŸ§¬ ğŸ“¦ (â® â˜ âœ) âª ğŸ›¡ ğŸ”— ğŸ•¸ &amp; **ğŸ“ âš–**.

â¤´ ğŸ‘† ğŸ’ª ğŸ’š âœ”ï¸ **ğŸ‘ ğŸ“¦** â® **ğŸ›  ğŸ‘¨â€ğŸ’¼** â–¶ **ğŸ“š ğŸ‘¨â€ğŸ­ ğŸ› ** ğŸ”˜.

#### ğŸ¤´ &amp; ğŸ ğŸ¤”

ğŸ‘† ğŸ’ª âœ”ï¸ **ğŸ ğŸ¤”** ğŸ‘ˆ ğŸ”œ âš’ âš«ï¸ â© âœ”ï¸ **ğŸ‘ ğŸ“¦** â® **ğŸ’— ğŸ› ** â†©ï¸ âœ”ï¸ **ğŸ’— ğŸ“¦** â® **ğŸ‘ ğŸ› ** ğŸ”  ğŸ‘«.

ğŸ–¼ (ğŸª€ ğŸ”› ğŸ‘† ğŸ–¥) ğŸ‘† ğŸ’ª âœ”ï¸ ğŸ§° ğŸ’– ğŸ¤´ ğŸ­ ğŸ ğŸ“¦ ğŸ‘ˆ ğŸ”œ âœ”ï¸ ğŸ” **ğŸ”  ğŸ“¨** ğŸ‘ˆ ğŸ‘Ÿ.

ğŸ‘‰ ğŸ’¼, ğŸš¥ ğŸ‘† âœ”ï¸ **ğŸ’— ğŸ“¦**, ğŸ”¢, ğŸ•â” ğŸ¤´ ğŸ‘Ÿ **âœ âš–**, âš«ï¸ ğŸ”œ ğŸ¤š ğŸ• **ğŸ‘ ğŸ“¦ ğŸ”  ğŸ•°** (ğŸ“¦ ğŸ‘ˆ ğŸµ ğŸ‘ˆ ğŸ¯ ğŸ“¨), â†©ï¸ ğŸ¤š **ğŸ“ˆ âš–** ğŸŒ ğŸ” ğŸ“¦.

â¤´, ğŸ‘ˆ ğŸ’¼, âš«ï¸ ğŸ’ª ğŸ™… âœ”ï¸ **1âƒ£ ğŸ“¦** â® **ğŸ’— ğŸ› **, &amp; ğŸ‡§ğŸ‡¿ ğŸ§° (âœ… ğŸ¤´ ğŸ­) ğŸ”› ğŸ ğŸ“¦ ğŸ“ˆ ğŸ¤´ âš– ğŸŒ ğŸ”— ğŸ›  &amp; ğŸ¦ ğŸ‘ˆ âš– ğŸ”› ğŸ‘ˆ ğŸ‘ ğŸ“¦.

---

ğŸ‘‘ â˜, **ğŸ‘Œ** ğŸ‘‰ **ğŸš« âœ ğŸ—¿** ğŸ‘ˆ ğŸ‘† âœ”ï¸ ğŸ˜„ â©. ğŸ‘† ğŸ’ª âš™ï¸ ğŸ‘« ğŸ’­ **ğŸ”¬ ğŸ‘† ğŸ‘ âš™ï¸ ğŸ’¼** &amp; ğŸ’­ âš«ï¸â” ğŸ‘ ğŸ¯ ğŸ‘† âš™ï¸, âœ… ğŸ‘… â” ğŸ›  ğŸ”§:

* ğŸ’‚â€â™‚ - ğŸ‡ºğŸ‡¸ğŸ”
* ğŸƒâ€â™‚ ğŸ”› ğŸ•´
* â
* ğŸ§¬ (ğŸ”¢ ğŸ›  ğŸƒ)
* ğŸ’¾
* â® ğŸ” â­ â–¶

## ğŸ’¾

ğŸš¥ ğŸ‘† ğŸƒ **ğŸ‘ ğŸ›  ğŸ“ ğŸ“¦** ğŸ‘† ğŸ”œ âœ”ï¸ ğŸŒ… âš–ï¸ ğŸŒ˜ ğŸ‘-ğŸ”¬, âš–, &amp; ğŸ“‰ ğŸ’¸ ğŸ’¾ ğŸ´ ğŸ”  ğŸ‘ˆ ğŸ“¦ (ğŸŒ… ğŸŒ˜ 1âƒ£ ğŸš¥ ğŸ‘« ğŸ”).

&amp; â¤´ ğŸ‘† ğŸ’ª âš’ ğŸ‘ˆ ğŸ ğŸ’¾ ğŸ“‰ &amp; ğŸ“„ ğŸ‘† ğŸ“³ ğŸ‘† ğŸ“¦ ğŸ§¾ âš™ï¸ (ğŸ–¼ **Kubernete**). ğŸ‘ˆ ğŸŒŒ âš«ï¸ ğŸ”œ ğŸ’ª **ğŸ” ğŸ“¦** **ğŸ’ª ğŸ°** âœŠ ğŸ”˜ ğŸ§ ğŸ’¸ ğŸ’¾ ğŸ’ª ğŸ‘«, &amp; ğŸ’¸ ğŸ’ª ğŸ° ğŸŒ‘.

ğŸš¥ ğŸ‘† ğŸˆ¸ **ğŸ™…**, ğŸ‘‰ ğŸ”œ ğŸ² **ğŸš« âš **, &amp; ğŸ‘† ğŸ’ª ğŸš« ğŸ’ª âœ” ğŸ‹ï¸ ğŸ’¾ ğŸ“‰. âœ‹ï¸ ğŸš¥ ğŸ‘† **âš™ï¸ ğŸ“š ğŸ’¾** (ğŸ–¼ â® **ğŸ° ğŸ«** ğŸ·), ğŸ‘† ğŸ”œ âœ… â” ğŸŒ… ğŸ’¾ ğŸ‘† ğŸ˜© &amp; ğŸ”† **ğŸ”¢ ğŸ“¦** ğŸ‘ˆ ğŸƒ **ğŸ”  ğŸ°** (&amp; ğŸ² ğŸš® ğŸŒ– ğŸ° ğŸ‘† ğŸŒ‘).

ğŸš¥ ğŸ‘† ğŸƒ **ğŸ’— ğŸ›  ğŸ“ ğŸ“¦** (ğŸ–¼ â® ğŸ›‚ â˜ ğŸ–¼) ğŸ‘† ğŸ”œ âœ”ï¸ âš’ ğŸ’­ ğŸ‘ˆ ğŸ”¢ ğŸ›  â–¶ ğŸš« **ğŸ´ ğŸŒ– ğŸ’¾** ğŸŒ˜ âš«ï¸â” ğŸ’ª.

## â® ğŸ” â­ â–¶ &amp; ğŸ“¦

ğŸš¥ ğŸ‘† âš™ï¸ ğŸ“¦ (âœ… â˜, Kubernete), â¤´ ğŸ“¤ 2âƒ£ ğŸ‘‘ ğŸ¯ ğŸ‘† ğŸ’ª âš™ï¸.

### ğŸ’— ğŸ“¦

ğŸš¥ ğŸ‘† âœ”ï¸ **ğŸ’— ğŸ“¦**, ğŸ² ğŸ”  1âƒ£ ğŸƒ **ğŸ‘ ğŸ› ** (ğŸ–¼, **Kubernete** ğŸŒ‘), â¤´ ğŸ‘† ğŸ”œ ğŸ² ğŸ’š âœ”ï¸ **ğŸ ğŸ“¦** ğŸ”¨ ğŸ‘· **â® ğŸ“¶** ğŸ‘ ğŸ“¦, ğŸƒ ğŸ‘ ğŸ› , **â­** ğŸƒ ğŸ” ğŸ‘¨â€ğŸ­ ğŸ“¦.

!!! info
    ğŸš¥ ğŸ‘† âš™ï¸ Kubernete, ğŸ‘‰ ğŸ”œ ğŸ² <a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/" class="external-link" target="_blank">ğŸ•‘ ğŸ“¦</a>.

ğŸš¥ ğŸ‘† âš™ï¸ ğŸ’¼ ğŸ“¤ ğŸ™…â€â™‚ âš  ğŸƒâ€â™‚ ğŸ‘ˆ â® ğŸ“¶ **ğŸ’— ğŸ•° ğŸ”—** (ğŸ–¼ ğŸš¥ ğŸ‘† ğŸš« ğŸƒ ğŸ’½ ğŸ› , âœ‹ï¸ âœ… ğŸš¥ ğŸ’½ ğŸ”œ), â¤´ ğŸ‘† ğŸ’ª ğŸš® ğŸ‘« ğŸ”  ğŸ“¦ â–¶ï¸ â­ â–¶ ğŸ‘‘ ğŸ› .

### ğŸ‘ ğŸ“¦

ğŸš¥ ğŸ‘† âœ”ï¸ ğŸ™… ğŸ–¥, â® **ğŸ‘ ğŸ“¦** ğŸ‘ˆ â¤´ â–¶ ğŸ’— **ğŸ‘¨â€ğŸ­ ğŸ› ** (âš–ï¸ 1âƒ£ ğŸ› ), â¤´ ğŸ‘† ğŸ’ª ğŸƒ ğŸ‘ˆ â® ğŸ” ğŸ ğŸ“¦, â–¶ï¸ â­ â–¶ ğŸ›  â® ğŸ“±. ğŸ›‚ â˜ ğŸ–¼ ğŸ•â€ğŸ¦º ğŸ‘‰ ğŸ”˜.

## ğŸ›‚ â˜ ğŸ–¼ â® ğŸ - Uvicorn

ğŸ“¤ ğŸ›‚ â˜ ğŸ–¼ ğŸ‘ˆ ğŸ”Œ ğŸ ğŸƒâ€â™‚ â® Uvicorn ğŸ‘¨â€ğŸ­, â„¹ â® ğŸ“ƒ: [ğŸ’½ ğŸ‘¨â€ğŸ­ - ğŸ â® Uvicorn](./server-workers.md){.internal-link target=_blank}.

ğŸ‘‰ ğŸ–¼ ğŸ”œ âš  âœ´ï¸ âš  ğŸ”¬ ğŸ”›: [ğŸ“¦ â® ğŸ’— ğŸ›  &amp; ğŸ ğŸ’¼](#containers-with-multiple-processes-and-special-cases).

* <a href="https://github.com/tiangolo/uvicorn-gunicorn-fastapi-docker" class="external-link" target="_blank">tiangolo/uvicorn-ğŸ-fastapi</a>.

!!! warning
    ğŸ“¤ â†• ğŸ¤ ğŸ‘ˆ ğŸ‘† **ğŸš«** ğŸ’ª ğŸ‘‰ ğŸ§¢ ğŸ–¼ âš–ï¸ ğŸ™† ğŸ ğŸ 1âƒ£, &amp; ğŸ”œ ğŸ‘» ğŸ“† ğŸ— ğŸ–¼ âšªï¸â¡ï¸ ğŸ–Œ [ğŸ”¬ ğŸ”›: ğŸ— â˜ ğŸ–¼ FastAPI](#build-a-docker-image-for-fastapi).

ğŸ‘‰ ğŸ–¼ âœ”ï¸ **ğŸš˜-ğŸ“³** ğŸ›  ğŸ”Œ âš’ **ğŸ”¢ ğŸ‘¨â€ğŸ­ ğŸ› ** âš“ï¸ ğŸ”› ğŸ’½ ğŸš ğŸ’ª.

âš«ï¸ âœ”ï¸ **ğŸ¤” ğŸ”¢**, âœ‹ï¸ ğŸ‘† ğŸ’ª ğŸ”€ &amp; â„¹ ğŸŒ ğŸ“³ â® **ğŸŒ ğŸ”¢** âš–ï¸ ğŸ“³ ğŸ“.

âš«ï¸ ğŸ•â€ğŸ¦º ğŸƒ <a href="https://github.com/tiangolo/uvicorn-gunicorn-fastapi-docker#pre_start_path" class="external-link" target="_blank">**â® ğŸ” â­ â–¶**</a> â® âœ.

!!! tip
    ğŸ‘€ ğŸŒ ğŸ“³ &amp; ğŸ›, ğŸš¶ â˜ ğŸ–¼ ğŸ“ƒ: <a href="https://github.com/tiangolo/uvicorn-gunicorn-fastapi-docker" class="external-link" target="_blank">Tiangolo/uvicorn-ğŸ-fastapi</a>.

### ğŸ”¢ ğŸ›  ğŸ”› ğŸ›‚ â˜ ğŸ–¼

**ğŸ”¢ ğŸ› ** ğŸ”› ğŸ‘‰ ğŸ–¼ **ğŸ“Š ğŸ”** âšªï¸â¡ï¸ ğŸ’½ **ğŸš** ğŸ’ª.

ğŸ‘‰ â›“ ğŸ‘ˆ âš«ï¸ ğŸ”œ ğŸ”„ **ğŸ—œ** ğŸŒ… **ğŸ­** âšªï¸â¡ï¸ ğŸ’½ ğŸ’ª.

ğŸ‘† ğŸ’ª ğŸ”† âš«ï¸ â® ğŸ“³ âš™ï¸ **ğŸŒ ğŸ”¢**, â™’ï¸.

âœ‹ï¸ âš«ï¸ â›“ ğŸ‘ˆ ğŸ”¢ ğŸ›  ğŸª€ ğŸ”› ğŸ’½ ğŸ“¦ ğŸƒ, **ğŸ’¸ ğŸ’¾ ğŸ´** ğŸ”œ ğŸª€ ğŸ”› ğŸ‘ˆ.

, ğŸš¥ ğŸ‘† ğŸˆ¸ ğŸ´ ğŸ“š ğŸ’¾ (ğŸ–¼ â® ğŸ° ğŸ« ğŸ·), &amp; ğŸ‘† ğŸ’½ âœ”ï¸ ğŸ“š ğŸ’½ ğŸš **âœ‹ï¸ ğŸ¥ ğŸ’¾**, â¤´ ğŸ‘† ğŸ“¦ ğŸ’ª ğŸ”š ğŸ†™ ğŸ”„ âš™ï¸ ğŸŒ… ğŸ’¾ ğŸŒ˜ âš«ï¸â” ğŸ’ª, &amp; ğŸ¤• ğŸ­ ğŸ“š (âš–ï¸ ğŸ’¥). ğŸ‘¶

### âœ `Dockerfile`

ğŸ“¥ â” ğŸ‘† ğŸ”œ âœ `Dockerfile` âš“ï¸ ğŸ”› ğŸ‘‰ ğŸ–¼:

```Dockerfile
FROM tiangolo/uvicorn-gunicorn-fastapi:python3.9

COPY ./requirements.txt /app/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /app/requirements.txt

COPY ./app /app
```

### ğŸ¦ ğŸˆ¸

ğŸš¥ ğŸ‘† â© ğŸ“„ ğŸ”ƒ ğŸ— [ğŸ¦ ğŸˆ¸ â® ğŸ’— ğŸ“](../tutorial/bigger-applications.md){.internal-link target=_blank}, ğŸ‘† `Dockerfile` ğŸ’ª â†©ï¸ ğŸ‘€ ğŸ’–:

```Dockerfile hl_lines="7"
FROM tiangolo/uvicorn-gunicorn-fastapi:python3.9

COPY ./requirements.txt /app/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /app/requirements.txt

COPY ./app /app/app
```

### ğŸ•â” âš™ï¸

ğŸ‘† ğŸ”œ ğŸ² **ğŸš«** âš™ï¸ ğŸ‘‰ ğŸ›‚ ğŸ§¢ ğŸ–¼ (âš–ï¸ ğŸ™† ğŸ ğŸ 1âƒ£) ğŸš¥ ğŸ‘† âš™ï¸ **Kubernete** (âš–ï¸ ğŸ) &amp; ğŸ‘† âª âš’ **ğŸ§¬** ğŸŒ‘ ğŸš, â® ğŸ’— **ğŸ“¦**. ğŸ“š ğŸ’¼, ğŸ‘† ğŸ‘ ğŸ“† **ğŸ— ğŸ–¼ âšªï¸â¡ï¸ ğŸ–Œ** ğŸ”¬ ğŸ”›: [ğŸ— â˜ ğŸ–¼ FastAPI](#build-a-docker-image-for-fastapi).

ğŸ‘‰ ğŸ–¼ ğŸ”œ âš  âœ´ï¸ ğŸ ğŸ’¼ ğŸ”¬ ğŸ”› [ğŸ“¦ â® ğŸ’— ğŸ›  &amp; ğŸ ğŸ’¼](#containers-with-multiple-processes-and-special-cases). ğŸ–¼, ğŸš¥ ğŸ‘† ğŸˆ¸ **ğŸ™… ğŸ¥ƒ** ğŸ‘ˆ âš’ ğŸ”¢ ğŸ”¢ ğŸ›  âš“ï¸ ğŸ”› ğŸ’½ ğŸ‘· ğŸ‘, ğŸ‘† ğŸš« ğŸ’š ğŸ˜¥ â® â ğŸ›  ğŸ§¬ ğŸŒ‘ ğŸš, &amp; ğŸ‘† ğŸš« ğŸƒ ğŸŒ… ğŸŒ˜ 1âƒ£ ğŸ“¦ â® ğŸ‘† ğŸ“±. âš–ï¸ ğŸš¥ ğŸ‘† ğŸ›  â® **â˜ âœ**, ğŸƒ ğŸ”› ğŸ‘ ğŸ’½, â™’ï¸.

## ğŸ›  ğŸ“¦ ğŸ–¼

â® âœ”ï¸ ğŸ“¦ (â˜) ğŸ–¼ ğŸ“¤ ğŸ“š ğŸŒŒ ğŸ›  âš«ï¸.

ğŸ–¼:

* â® **â˜ âœ** ğŸ‘ ğŸ’½
* â® **Kubernete** ğŸŒ‘
* â® â˜ ğŸ ğŸ“³ ğŸŒ‘
* â® â•1ï¸âƒ£ ğŸ§° ğŸ’– ğŸ––
* â® â˜ ğŸ•â€ğŸ¦º ğŸ‘ˆ âœŠ ğŸ‘† ğŸ“¦ ğŸ–¼ &amp; ğŸ›  âš«ï¸

## â˜ ğŸ–¼ â® ğŸ¶

ğŸš¥ ğŸ‘† âš™ï¸ <a href="https://python-poetry.org/" class="external-link" target="_blank">ğŸ¶</a> ğŸ›  ğŸ‘† ğŸ— ğŸ”—, ğŸ‘† ğŸ’ª âš™ï¸ â˜ ğŸ‘-â–¶ ğŸ—:

```{ .dockerfile .annotate }
# (1)
FROM python:3.9 as requirements-stage

# (2)
WORKDIR /tmp

# (3)
RUN pip install poetry

# (4)
COPY ./pyproject.toml ./poetry.lock* /tmp/

# (5)
RUN poetry export -f requirements.txt --output requirements.txt --without-hashes

# (6)
FROM python:3.9

# (7)
WORKDIR /code

# (8)
COPY --from=requirements-stage /tmp/requirements.txt /code/requirements.txt

# (9)
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (10)
COPY ./app /code/app

# (11)
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "80"]
```

1âƒ£. ğŸ‘‰ ğŸ¥‡ â–¶, âš«ï¸ ğŸŒŸ `requirements-stage`.

2âƒ£. âš’ `/tmp` â® ğŸ‘· ğŸ“.

    ğŸ“¥ ğŸŒâ” ğŸ‘¥ ğŸ”œ ğŸ— ğŸ“ `requirements.txt`

3âƒ£. â ğŸ¶ ğŸ‘‰ â˜ â–¶.

4âƒ£. ğŸ“ `pyproject.toml` &amp; `poetry.lock` ğŸ“ `/tmp` ğŸ“.

    â†©ï¸ âš«ï¸ âš™ï¸ `./poetry.lock*` (â–¶ â® `*`), âš«ï¸ ğŸ† ğŸš« ğŸ’¥ ğŸš¥ ğŸ‘ˆ ğŸ“ ğŸš« ğŸ’ª.

5âƒ£. ğŸ— `requirements.txt` ğŸ“.

6âƒ£. ğŸ‘‰ ğŸ â–¶, ğŸ•³ ğŸ“¥ ğŸ”œ ğŸ›¡ ğŸ ğŸ“¦ ğŸ–¼.

7âƒ£. âš’ â® ğŸ‘· ğŸ“ `/code`.

8âƒ£. ğŸ“ `requirements.txt` ğŸ“ `/code` ğŸ“.

    ğŸ‘‰ ğŸ“ ğŸ•´ ğŸ–– â® â˜ â–¶, ğŸ‘ˆ âš«ï¸â” ğŸ‘¥ âš™ï¸ `--from-requirements-stage` ğŸ“ âš«ï¸.

9âƒ£. â ğŸ“¦ ğŸ”— ğŸ— `requirements.txt` ğŸ“.

1âƒ£0âƒ£. ğŸ“ `app` ğŸ“ `/code` ğŸ“.

1âƒ£1âƒ£. ğŸƒ `uvicorn` ğŸ“‹, ğŸ’¬ âš«ï¸ âš™ï¸ `app` ğŸš ğŸ—„ âšªï¸â¡ï¸ `app.main`.

!!! tip
    ğŸ–Š ğŸ’­ ğŸ”¢ ğŸ‘€ âš«ï¸â” ğŸ”  â¸ ğŸ”¨.

**â˜ â–¶** ğŸ• `Dockerfile` ğŸ‘ˆ ğŸ‘· **ğŸ• ğŸ“¦ ğŸ–¼** ğŸ‘ˆ ğŸ•´ âš™ï¸ ğŸ— ğŸ“ âš™ï¸ âª.

ğŸ¥‡ â–¶ ğŸ”œ ğŸ•´ âš™ï¸ **â ğŸ¶** &amp; **ğŸ— `requirements.txt`** â® ğŸ‘† ğŸ— ğŸ”— âšªï¸â¡ï¸ ğŸ¶ `pyproject.toml` ğŸ“.

ğŸ‘‰ `requirements.txt` ğŸ“ ğŸ”œ âš™ï¸ â® `pip` âª **â­ â–¶**.

ğŸ ğŸ“¦ ğŸ–¼ **ğŸ•´ ğŸ â–¶** ğŸ›¡. â® â–¶(â“‚) ğŸ”œ â.

ğŸ•â” âš™ï¸ ğŸ¶, âš«ï¸ ğŸ”œ âš’ ğŸ”‘ âš™ï¸ **â˜ ğŸ‘-â–¶ ğŸ—** â†©ï¸ ğŸ‘† ğŸš« ğŸ¤™ ğŸ’ª âœ”ï¸ ğŸ¶ &amp; ğŸš® ğŸ”— â ğŸ ğŸ“¦ ğŸ–¼, ğŸ‘† **ğŸ•´ ğŸ’ª** âœ”ï¸ ğŸ— `requirements.txt` ğŸ“ â ğŸ‘† ğŸ— ğŸ”—.

â¤´ â­ (&amp; ğŸ) â–¶ ğŸ‘† ğŸ”œ ğŸ— ğŸ–¼ ğŸŒ… âš–ï¸ ğŸŒ˜ ğŸ ğŸŒŒ ğŸ”¬ â­.

### â›… ğŸ¤ â ğŸ—³ - ğŸ¶

ğŸ”„, ğŸš¥ ğŸ‘† ğŸƒâ€â™‚ ğŸ‘† ğŸ“¦ â›… ğŸ¤ â ğŸ—³ (ğŸ“ âš™) ğŸ’– ğŸ‘Œ âš–ï¸ Traefik, ğŸš® ğŸ› `--proxy-headers` ğŸ“‹:

```Dockerfile
CMD ["uvicorn", "app.main:app", "--proxy-headers", "--host", "0.0.0.0", "--port", "80"]
```

## ğŸŒƒ

âš™ï¸ ğŸ“¦ âš™ï¸ (âœ… â® **â˜** &amp; **Kubernete**) âš«ï¸ â–¶ï¸ ğŸ“¶ ğŸ¯ ğŸµ ğŸŒ **ğŸ›  ğŸ”§**:

* ğŸ‡ºğŸ‡¸ğŸ”
* ğŸƒâ€â™‚ ğŸ”› ğŸ•´
* â
* ğŸ§¬ (ğŸ”¢ ğŸ›  ğŸƒ)
* ğŸ’¾
* â® ğŸ” â­ â–¶

ğŸŒ… ğŸ’¼, ğŸ‘† ğŸ² ğŸ† ğŸš« ğŸ’š âš™ï¸ ğŸ™† ğŸ§¢ ğŸ–¼, &amp; â†©ï¸ **ğŸ— ğŸ“¦ ğŸ–¼ âšªï¸â¡ï¸ ğŸ–Œ** 1âƒ£ âš“ï¸ ğŸ”› ğŸ›‚ ğŸ† â˜ ğŸ–¼.

âœŠ ğŸ’… **âœ”** ğŸ‘©â€ğŸŒ¾ `Dockerfile` &amp; **â˜ ğŸ’¾** ğŸ‘† ğŸ’ª **ğŸ“‰ ğŸ— ğŸ•°**, ğŸ“‰ ğŸ‘† ğŸ“ˆ (&amp; â ğŸ˜©). ğŸ‘¶

ğŸ¯ ğŸ ğŸ’¼, ğŸ‘† ğŸ’ª ğŸ’š âš™ï¸ ğŸ›‚ â˜ ğŸ–¼ FastAPI. ğŸ‘¶

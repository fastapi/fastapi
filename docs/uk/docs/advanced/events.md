# –ü–æ–¥—ñ—ó –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É { #lifespan-events }

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –ª–æ–≥—ñ–∫—É (–∫–æ–¥), —è–∫—É —Å–ª—ñ–¥ –≤–∏–∫–æ–Ω–∞—Ç–∏ –ø–µ—Ä–µ–¥ **–∑–∞–ø—É—Å–∫–æ–º** –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —Ü–µ–π –∫–æ–¥ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ **–æ–¥–∏–Ω —Ä–∞–∑**, **–¥–æ —Ç–æ–≥–æ**, —è–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **–ø–æ—á–Ω–µ –ø—Ä–∏–π–º–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏**.

–¢–∞–∫ —Å–∞–º–æ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –ª–æ–≥—ñ–∫—É (–∫–æ–¥), —è–∫—É —Å–ª—ñ–¥ –≤–∏–∫–æ–Ω–∞—Ç–∏ –ø—ñ–¥ —á–∞—Å **–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏** –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É. –£ —Ü—å–æ–º—É —Ä–∞–∑—ñ —Ü–µ–π –∫–æ–¥ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ **–æ–¥–∏–Ω —Ä–∞–∑**, **–ø—ñ—Å–ª—è** –æ–±—Ä–æ–±–∫–∏, –π–º–æ–≤—ñ—Ä–Ω–æ, **–±–∞–≥–∞—Ç—å–æ—Ö –∑–∞–ø–∏—Ç—ñ–≤**.

–û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ–π –∫–æ–¥ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –¥–æ —Ç–æ–≥–æ, —è–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **–ø–æ—á–Ω–µ** –ø—Ä–∏–π–º–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏, —ñ –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –≤—ñ–Ω **–∑–∞–≤–µ—Ä—à–∏—Ç—å** —ó—Ö –æ–±—Ä–æ–±–∫—É, –≤—ñ–Ω –æ—Ö–æ–ø–ª—é—î –≤–µ—Å—å **–∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª** –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (—Å–ª–æ–≤–æ ¬´lifespan¬ª –∑–∞ –º–∏—Ç—å —Å—Ç–∞–Ω–µ –≤–∞–∂–ª–∏–≤–∏–º).

–¶–µ –º–æ–∂–µ –±—É—Ç–∏ –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è **—Ä–µ—Å—É—Ä—Å—ñ–≤**, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –≤–∞–º –¥–ª—è –≤—Å—å–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —è–∫—ñ —î **—Å–ø—ñ–ª—å–Ω–∏–º–∏** –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤, —Ç–∞/–∞–±–æ —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ—Ç—ñ–º **–æ—á–∏—Å—Ç–∏—Ç–∏**. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—É–ª –ø—ñ–¥–∫–ª—é—á–µ–Ω—å –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–ø—ñ–ª—å–Ω–æ—ó –º–æ–¥–µ–ª—ñ –º–∞—à–∏–Ω–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è.

## –í–∏–ø–∞–¥–æ–∫ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è { #use-case }

–ü–æ—á–Ω—ñ–º–æ –∑ –ø—Ä–∏–∫–ª–∞–¥—É **–≤–∏–ø–∞–¥–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**, –∞ –ø–æ—Ç—ñ–º –ø–æ–¥–∏–≤—ñ–º–æ—Å—è, —è–∫ —Ü–µ —Ä–æ–∑–≤‚Äô—è–∑–∞—Ç–∏.

–£—è–≤—ñ–º–æ, —â–æ —É –≤–∞—Å —î –∫—ñ–ª—å–∫–∞ **–º–æ–¥–µ–ª–µ–π –º–∞—à–∏–Ω–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è**, —è–∫—ñ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤.

–¶—ñ —Å–∞–º—ñ –º–æ–¥–µ–ª—ñ —î —Å–ø—ñ–ª—å–Ω–∏–º–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤, —Ç–æ–±—Ç–æ —Ü–µ –Ω–µ –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å –Ω–∞ –∑–∞–ø–∏—Ç —á–∏ –æ–¥–Ω–∞ –Ω–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∞–±–æ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ.

–£—è–≤—ñ–º–æ, —â–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ –º–æ–∂–µ **–∑–∞–π–º–∞—Ç–∏ –¥–æ—Å–∏—Ç—å –±–∞–≥–∞—Ç–æ —á–∞—Å—É**, –±–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —á–∏—Ç–∞—Ç–∏ –±–∞–≥–∞—Ç–æ **–¥–∞–Ω–∏—Ö —ñ–∑ –¥–∏—Å–∫–∞**. –¢–æ–∂ –≤–∏ –Ω–µ —Ö–æ—á–µ—Ç–µ —Ä–æ–±–∏—Ç–∏ —Ü–µ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É.

–í–∏ –º–æ–≥–ª–∏ –± –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —ó—ó –Ω–∞ –≤–µ—Ä—Ö–Ω—å–æ–º—É —Ä—ñ–≤–Ω—ñ –º–æ–¥—É–ª—è/—Ñ–∞–π–ª—É, –∞–ª–µ —Ü–µ —Ç–∞–∫–æ–∂ –æ–∑–Ω–∞—á–∞–ª–æ –±, —â–æ –º–æ–¥–µ–ª—å **–∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏–º–µ—Ç—å—Å—è** –Ω–∞–≤—ñ—Ç—å —Ç–æ–¥—ñ, –∫–æ–ª–∏ –≤–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ –ø—Ä–æ—Å—Ç–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π —Ç–µ—Å—Ç. –¢–æ–¥—ñ —Ç–µ—Å—Ç –±—É–≤ –±–∏ **–ø–æ–≤—ñ–ª—å–Ω–∏–º**, –±–æ –π–æ–º—É –¥–æ–≤–µ–ª–æ—Å—è –± —á–µ–∫–∞—Ç–∏ –Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–µ–∑–∞–ª–µ–∂–Ω–æ—ó —á–∞—Å—Ç–∏–Ω–∏ –∫–æ–¥—É.

–°–∞–º–µ —Ü–µ –º–∏ –π —Ä–æ–∑–≤‚Äô—è–∂–µ–º–æ: –∑–∞–≤–∞–Ω—Ç–∞–∂–∏–º–æ –º–æ–¥–µ–ª—å –¥–æ –ø–æ—á–∞—Ç–∫—É –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤, –∞–ª–µ –ª–∏—à–µ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –ø–æ—á–Ω–µ —ó—Ö –ø—Ä–∏–π–º–∞—Ç–∏, –∞ –Ω–µ –ø—ñ–¥ —á–∞—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ–¥—É.

## Lifespan { #lifespan }

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —Ü—é –ª–æ–≥—ñ–∫—É *startup* —ñ *shutdown* –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `lifespan` –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É `FastAPI` —Ç–∞ ¬´context manager¬ª (–∑–∞ –º–∏—Ç—å –ø–æ–∫–∞–∂—É, —â–æ —Ü–µ —Ç–∞–∫–µ).

–ü–æ—á–Ω—ñ–º–æ –∑ –ø—Ä–∏–∫–ª–∞–¥—É, –∞ –ø–æ—Ç—ñ–º —Ä–æ–∑–±–µ—Ä–µ–º–æ –π–æ–≥–æ –¥–µ—Ç–∞–ª—å–Ω–æ.

–°—Ç–≤–æ—Ä—ñ–º–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é `lifespan()` –∑ `yield` –æ—Å—å —Ç–∞–∫:

{* ../../docs_src/events/tutorial003_py39.py hl[16,19] *}

–¢—É—Ç –º–∏ —ñ–º—ñ—Ç—É—î–º–æ –¥–æ—Ä–æ–≥—É –æ–ø–µ—Ä–∞—Ü—ñ—é *startup* —ñ–∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º –º–æ–¥–µ–ª—ñ, –¥–æ–¥–∞—é—á–∏ (—Ñ–µ–π–∫–æ–≤—É) —Ñ—É–Ω–∫—Ü—ñ—é –º–æ–¥–µ–ª—ñ –≤ —Å–ª–æ–≤–Ω–∏–∫ —ñ–∑ –º–æ–¥–µ–ª—è–º–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –Ω–∞–≤—á–∞–Ω–Ω—è –ø–µ—Ä–µ–¥ `yield`. –¶–µ–π –∫–æ–¥ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ **–¥–æ —Ç–æ–≥–æ**, —è–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **–ø–æ—á–Ω–µ –ø—Ä–∏–π–º–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏**, –ø—ñ–¥ —á–∞—Å *startup*.

–ê –ø–æ—Ç—ñ–º, –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è `yield`, –º–∏ –≤–∏–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –º–æ–¥–µ–ª—å. –¶–µ–π –∫–æ–¥ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ **–ø—ñ—Å–ª—è** —Ç–æ–≥–æ, —è–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **–∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–±—Ä–æ–±–∫—É –∑–∞–ø–∏—Ç—ñ–≤**, –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –ø–µ—Ä–µ–¥ *shutdown*. –¶–µ –º–æ–∂–µ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–≤—ñ–ª—å–Ω–∏—Ç–∏ —Ä–µ—Å—É—Ä—Å–∏ –Ω–∞ –∫—à—Ç–∞–ª—Ç –ø–∞–º‚Äô—è—Ç—ñ –∞–±–æ GPU.

/// tip | –ü–æ—Ä–∞–¥–∞

`shutdown` –≤—ñ–¥–±—É–¥–µ—Ç—å—Å—è, –∫–æ–ª–∏ –≤–∏ **–∑—É–ø–∏–Ω—è—î—Ç–µ** –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫.

–ú–æ–∂–ª–∏–≤–æ, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –Ω–æ–≤—É –≤–µ—Ä—Å—ñ—é, –∞–±–æ –≤–∏ –ø—Ä–æ—Å—Ç–æ –≤—Ç–æ–º–∏–ª–∏—Å—è –π–æ–≥–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏.

///

### –§—É–Ω–∫—Ü—ñ—è lifespan { #lifespan-function }

–ü–µ—Ä—à–µ, –Ω–∞ —â–æ —Å–ª—ñ–¥ –∑–≤–µ—Ä–Ω—É—Ç–∏ —É–≤–∞–≥—É: –º–∏ –≤–∏–∑–Ω–∞—á–∞—î–º–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é –∑ `yield`. –¶–µ –¥—É–∂–µ —Å—Ö–æ–∂–µ –Ω–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ `yield`.

{* ../../docs_src/events/tutorial003_py39.py hl[14:19] *}

–ü–µ—Ä—à–∞ —á–∞—Å—Ç–∏–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—ó, –¥–æ `yield`, –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∞ **–¥–æ** –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

–ê —á–∞—Å—Ç–∏–Ω–∞ –ø—ñ—Å–ª—è `yield` –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∞ **–ø—ñ—Å–ª—è** —Ç–æ–≥–æ, —è–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–æ–±–æ—Ç—É.

### Async Context Manager { #async-context-manager }

–Ø–∫—â–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —Ñ—É–Ω–∫—Ü—ñ—è –¥–µ–∫–æ—Ä–æ–≤–∞–Ω–∞ `@asynccontextmanager`.

–¶–µ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î —Ñ—É–Ω–∫—Ü—ñ—é –Ω–∞ —Ç–µ, —â–æ –Ω–∞–∑–∏–≤–∞—é—Ç—å ¬´**async context manager**¬ª.

{* ../../docs_src/events/tutorial003_py39.py hl[1,13] *}

**Context manager** —É Python ‚Äî —Ü–µ —Ç–µ, —â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ `with`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `open()` –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —è–∫ context manager:

```Python
with open("file.txt") as file:
    file.read()
```

–£ –Ω–æ–≤–∏—Ö –≤–µ—Ä—Å—ñ—è—Ö Python —Ç–∞–∫–æ–∂ —î **async context manager**. –ô–æ–≥–æ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑ `async with`:

```Python
async with lifespan(app):
    await do_stuff()
```

–ö–æ–ª–∏ –≤–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ context manager –∞–±–æ async context manager, —è–∫ –≤–∏—â–µ, –≤—ñ–Ω —Ä–æ–±–∏—Ç—å —Ç–∞–∫–µ: –ø–µ—Ä–µ–¥ –≤—Ö–æ–¥–æ–º —É –±–ª–æ–∫ `with` –≤–∏–∫–æ–Ω–∞—î –∫–æ–¥ –¥–æ `yield`, –∞ –ø—ñ—Å–ª—è –≤–∏—Ö–æ–¥—É –∑ –±–ª–æ–∫—É `with` –≤–∏–∫–æ–Ω–∞—î –∫–æ–¥ –ø—ñ—Å–ª—è `yield`.

–£ –Ω–∞—à–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –∫–æ–¥—É –≤–∏—â–µ –º–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –π–æ–≥–æ –Ω–∞–ø—Ä—è–º—É, –∞–ª–µ –ø–µ—Ä–µ–¥–∞—î–º–æ FastAPI, —â–æ–± –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–≤ –π–æ–≥–æ.

–ü–∞—Ä–∞–º–µ—Ç—Ä `lifespan` –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É `FastAPI` –ø—Ä–∏–π–º–∞—î **async context manager**, —Ç–æ–∂ –º–∏ –º–æ–∂–µ–º–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –π–æ–º—É –Ω–∞—à –Ω–æ–≤–∏–π async context manager `lifespan`.

{* ../../docs_src/events/tutorial003_py39.py hl[22] *}

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –ø–æ–¥—ñ—ó (–∑–∞—Å—Ç–∞—Ä—ñ–ª–æ) { #alternative-events-deprecated }

/// warning | –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è

–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π —Å–ø–æ—Å—ñ–± –æ–±—Ä–æ–±–ª—è—Ç–∏ *startup* —ñ *shutdown* ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `lifespan` –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É `FastAPI`, —è–∫ –æ–ø–∏—Å–∞–Ω–æ –≤–∏—â–µ. –Ø–∫—â–æ –≤–∏ –Ω–∞–¥–∞—Å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `lifespan`, –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π `startup` —ñ `shutdown` –±—ñ–ª—å—à–µ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏–º—É—Ç—å—Å—è. –ê–±–æ –≤–µ—Å—å –ø—ñ–¥—Ö—ñ–¥ —á–µ—Ä–µ–∑ `lifespan`, –∞–±–æ –≤–µ—Å—å –ø—ñ–¥—Ö—ñ–¥ —á–µ—Ä–µ–∑ –ø–æ–¥—ñ—ó ‚Äî –Ω–µ –æ–±–∏–¥–≤–∞ –æ–¥–Ω–æ—á–∞—Å–Ω–æ.

–ô–º–æ–≤—ñ—Ä–Ω–æ, –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç–∏ —Ü—é —á–∞—Å—Ç–∏–Ω—É.

///

–Ñ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π —Å–ø–æ—Å—ñ–± –≤–∏–∑–Ω–∞—á–∏—Ç–∏ —Ü—é –ª–æ–≥—ñ–∫—É, —è–∫–∞ –º–∞—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—è –ø—ñ–¥ —á–∞—Å *startup* —ñ –ø—ñ–¥ —á–∞—Å *shutdown*.

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π (—Ñ—É–Ω–∫—Ü—ñ—ó), —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥–æ –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –∞–±–æ –ø—ñ–¥ —á–∞—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –π–æ–≥–æ —Ä–æ–±–æ—Ç–∏.

–¶—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –º–æ–∂–Ω–∞ –æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏ —è–∫ `async def` –∞–±–æ —è–∫ –∑–≤–∏—á–∞–π–Ω—ñ `def`.

### –ü–æ–¥—ñ—è `startup` { #startup-event }

–©–æ–± –¥–æ–¥–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –æ–≥–æ–ª–æ—Å—ñ—Ç—å —ó—ó –∑ –ø–æ–¥—ñ—î—é `"startup"`:

{* ../../docs_src/events/tutorial001_py39.py hl[8] *}

–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É —Ñ—É–Ω–∫—Ü—ñ—è-–æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó `startup` —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î –µ–ª–µ–º–µ–Ω—Ç `"database"` (—Ü–µ –ø—Ä–æ—Å—Ç–æ `dict`) –¥–µ—è–∫–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏.

–í–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ –Ω—ñ–∂ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é-–æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó.

–Ü –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–µ –ø–æ—á–Ω–µ –ø—Ä–∏–π–º–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏, –¥–æ–∫–∏ –Ω–µ –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è –≤—Å—ñ –æ–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ—ó `startup`.

### –ü–æ–¥—ñ—è `shutdown` { #shutdown-event }

–©–æ–± –¥–æ–¥–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—ñ–¥ —á–∞—Å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –æ–≥–æ–ª–æ—Å—ñ—Ç—å —ó—ó –∑ –ø–æ–¥—ñ—î—é `"shutdown"`:

{* ../../docs_src/events/tutorial002_py39.py hl[6] *}

–¢—É—Ç —Ñ—É–Ω–∫—Ü—ñ—è-–æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó `shutdown` –∑–∞–ø–∏—à–µ —Ä—è–¥–æ–∫ —Ç–µ–∫—Å—Ç—É `"Application shutdown"` —É —Ñ–∞–π–ª `log.txt`.

/// info | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–£ —Ñ—É–Ω–∫—Ü—ñ—ó `open()` –ø–∞—Ä–∞–º–µ—Ç—Ä `mode="a"` –æ–∑–Ω–∞—á–∞—î ¬´append¬ª, —Ç–æ–±—Ç–æ —Ä—è–¥–æ–∫ –±—É–¥–µ –¥–æ–¥–∞–Ω–æ –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —â–æ –≤–∂–µ —î —É —Ñ–∞–π–ª—ñ, –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –≤–º—ñ—Å—Ç—É.

///

/// tip | –ü–æ—Ä–∞–¥–∞

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É: —É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é Python `open()`, —è–∫–∞ –≤–∑–∞—î–º–æ–¥—ñ—î –∑ —Ñ–∞–π–ª–æ–º.

–û—Ç–∂–µ, —Ç—É—Ç —î I/O (input/output), —â–æ –ø–æ—Ç—Ä–µ–±—É—î ¬´–æ—á—ñ–∫—É–≤–∞–Ω–Ω—è¬ª, –¥–æ–∫–∏ –¥–∞–Ω—ñ –±—É–¥—É—Ç—å –∑–∞–ø–∏—Å–∞–Ω—ñ –Ω–∞ –¥–∏—Å–∫.

–ê–ª–µ `open()` –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `async` —Ç–∞ `await`.

–¢–æ–º—É –º–∏ –æ–≥–æ–ª–æ—à—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é-–æ–±—Ä–æ–±–Ω–∏–∫ –ø–æ–¥—ñ—ó —è–∫ –∑–≤–∏—á–∞–π–Ω—É `def`, –∞ –Ω–µ `async def`.

///

### `startup` —ñ `shutdown` —Ä–∞–∑–æ–º { #startup-and-shutdown-together }

–Ñ –≤–∏—Å–æ–∫–∞ –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å, —â–æ –ª–æ–≥—ñ–∫–∞ –¥–ª—è –≤–∞—à–∏—Ö *startup* —ñ *shutdown* –ø–æ–≤‚Äô—è–∑–∞–Ω–∞: –≤–∏ –º–æ–∂–µ—Ç–µ —Ö–æ—Ç—ñ—Ç–∏ —â–æ—Å—å –∑–∞–ø—É—Å—Ç–∏—Ç–∏, –∞ –ø–æ—Ç—ñ–º –∑–∞–≤–µ—Ä—à–∏—Ç–∏, –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ä–µ—Å—É—Ä—Å, –∞ –ø–æ—Ç—ñ–º –∑–≤—ñ–ª—å–Ω–∏—Ç–∏ –π–æ–≥–æ —Ç–æ—â–æ.

–†–æ–±–∏—Ç–∏ —Ü–µ –≤ —Ä–æ–∑–¥—ñ–ª–µ–Ω–∏—Ö —Ñ—É–Ω–∫—Ü—ñ—è—Ö, —è–∫—ñ –Ω–µ –¥—ñ–ª—è—Ç—å –º—ñ–∂ —Å–æ–±–æ—é –ª–æ–≥—ñ–∫—É –∞–±–æ –∑–º—ñ–Ω–Ω—ñ, —Å–∫–ª–∞–¥–Ω—ñ—à–µ, –±–æ –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö –∑–º—ñ–Ω–Ω–∏—Ö –∞–±–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –ø–æ–¥—ñ–±–Ω—ñ –ø—Ä–∏–π–æ–º–∏.

–¢–æ–º—É –∑–∞—Ä–∞–∑ —Ä–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –Ω–∞—Ç–æ–º—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `lifespan`, —è–∫ –ø–æ—è—Å–Ω–µ–Ω–æ –≤–∏—â–µ.

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ { #technical-details }

–õ–∏—à–µ —Ç–µ—Ö–Ω—ñ—á–Ω–∞ –¥–µ—Ç–∞–ª—å –¥–ª—è –¥–æ–ø–∏—Ç–ª–∏–≤–∏—Ö “ë—ñ–∫—ñ–≤.

–ü—ñ–¥ –∫–∞–ø–æ—Ç–æ–º, —É —Ç–µ—Ö–Ω—ñ—á–Ω—ñ–π —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó ASGI, —Ü–µ —á–∞—Å—Ç–∏–Ω–∞ <a href="https://asgi.readthedocs.io/en/latest/specs/lifespan.html" class="external-link" target="_blank">Lifespan Protocol</a>, —ñ –≤–æ–Ω–∞ –≤–∏–∑–Ω–∞—á–∞—î –ø–æ–¥—ñ—ó –∑ –Ω–∞–∑–≤–∞–º–∏ `startup` —Ç–∞ `shutdown`.

/// info | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–î–æ–∫–ª–∞–¥–Ω—ñ—à–µ –ø—Ä–æ –æ–±—Ä–æ–±–Ω–∏–∫–∏ `lifespan` —É Starlette —á–∏—Ç–∞–π—Ç–µ –≤ <a href="https://www.starlette.dev/lifespan/" class="external-link" target="_blank">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Lifespan —É Starlette</a>.

–ó–æ–∫—Ä–µ–º–∞, —è–∫ –æ–±—Ä–æ–±–ª—è—Ç–∏ —Å—Ç–∞–Ω lifespan, —è–∫–∏–π –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤ —ñ–Ω—à–∏—Ö —á–∞—Å—Ç–∏–Ω–∞—Ö –≤–∞—à–æ–≥–æ –∫–æ–¥—É.

///

## –ü—ñ–¥–∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏ { #sub-applications }

üö® –ú–∞–π—Ç–µ –Ω–∞ —É–≤–∞–∑—ñ, —â–æ —Ü—ñ –ø–æ–¥—ñ—ó –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É (startup —ñ shutdown) –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏–º—É—Ç—å—Å—è –ª–∏—à–µ –¥–ª—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –∞ –Ω–µ –¥–ª—è [–ü—ñ–¥–∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ ‚Äî –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—è](sub-applications.md){.internal-link target=_blank}.

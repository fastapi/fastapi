# Повертайте відповідь напряму { #return-a-response-directly }

Коли ви створюєте **FastAPI** *операцію шляху*, зазвичай ви можете повертати з неї будь-які дані: `dict`, `list`, модель Pydantic, модель бази даних тощо.

За замовчуванням **FastAPI** автоматично перетворює це значення, що повертається, на JSON за допомогою `jsonable_encoder`, описаного в розділі [JSON-сумісний енкодер](../tutorial/encoder.md){.internal-link target=_blank}.

Потім «за лаштунками» він помістить ці JSON-сумісні дані (наприклад, `dict`) всередину `JSONResponse`, який буде використано для надсилання відповіді клієнту.

Але ви можете повертати `JSONResponse` безпосередньо з ваших *операцій шляху*.

Це може бути корисно, наприклад, щоб повертати власні заголовки або cookies.

## Повернення `Response` { #return-a-response }

Насправді ви можете повернути будь-який `Response` або будь-який його підклас.

/// tip | Порада

`JSONResponse` сам по собі є підкласом `Response`.

///

І коли ви повертаєте `Response`, **FastAPI** передасть його напряму.

Він не виконуватиме жодних перетворень даних за допомогою моделей Pydantic, не конвертуватиме вміст у будь-які типи тощо.

Це дає вам багато гнучкості. Ви можете повертати будь-який тип даних, перевизначати будь-які декларації даних або валідацію тощо.

## Використання `jsonable_encoder` у `Response` { #using-the-jsonable-encoder-in-a-response }

Оскільки **FastAPI** не вносить жодних змін у `Response`, який ви повертаєте, вам потрібно переконатися, що його вміст уже готовий.

Наприклад, ви не можете покласти модель Pydantic у `JSONResponse`, не перетворивши її спочатку на `dict` із конвертацією всіх типів даних (як-от `datetime`, `UUID` тощо) у JSON-сумісні типи.

Для таких випадків ви можете використати `jsonable_encoder`, щоб перетворити ваші дані перед передаванням їх у відповідь:

{* ../../docs_src/response_directly/tutorial001_py310.py hl[5:6,20:21] *}

/// note | Технічні деталі

Ви також можете використати `from starlette.responses import JSONResponse`.

**FastAPI** надає ті самі `starlette.responses` як `fastapi.responses` лише для зручності для вас, розробника. Але більшість доступних відповідей надходять безпосередньо зі Starlette.

///

## Повернення власного `Response` { #returning-a-custom-response }

Приклад вище показує всі потрібні частини, але він поки що не дуже корисний, адже ви могли б просто повернути `item` напряму, і **FastAPI** помістив би його в `JSONResponse` для вас, перетворивши його на `dict` тощо. Усе це — за замовчуванням.

Тепер подивімося, як ви могли б використати це, щоб повернути власну відповідь.

Скажімо, ви хочете повернути відповідь у форматі <a href="https://en.wikipedia.org/wiki/XML" class="external-link" target="_blank">XML</a>.

Ви можете помістити ваш XML-вміст у рядок, покласти його в `Response` і повернути:

{* ../../docs_src/response_directly/tutorial002_py39.py hl[1,18] *}

## Примітки { #notes }

Коли ви повертаєте `Response` напряму, його дані не валідовуються, не конвертуються (серіалізуються) і не документуються автоматично.

Але ви все одно можете задокументувати це, як описано в [Додаткові відповіді в OpenAPI](additional-responses.md){.internal-link target=_blank}.

У наступних розділах ви побачите, як використовувати/оголошувати ці власні `Response`, зберігаючи при цьому автоматичну конвертацію даних, документацію тощо.

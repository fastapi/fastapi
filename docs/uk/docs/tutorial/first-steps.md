# Перші кроки

Найпростіший файл FastAPI може виглядати так:

```Python
{!../../../docs_src/first_steps/tutorial001.py!}
```

Скопіюйте це у файл `main.py`.

Запустіть розробницький сервер:

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
<span style="color: green;">INFO</span>:     Started reloader process [28720]
<span style="color: green;">INFO</span>:     Started server process [28722]
<span style="color: green;">INFO</span>:     Waiting for application startup.
<span style="color: green;">INFO</span>:     Application startup complete.
```

</div>

!!! note
    Команда `uvicorn main:app` зсилається на:

    * `main`: файл `main.py` ("модуль" Python).
    * `app`: об'єкт створений всередині `main.py` строкою `app = FastAPI()`.
    * `--reload`: перезавантажує сервер після зміни коду. Використовуйте тільки для розробки.

У виводі є рядок із чимось на кшталт:

```hl_lines="4"
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

Цей рядок показує URL-адресу, де запущено ваш додаток, на вашому локальному комп’ютері.

### Перевірте

Відкрийте свій браузер за адресою <a href="http://127.0.0.1:8000" class="external-link" target="_blank">http://127.0.0.1:8000</a>.

Ви побачите JSON відповідь:

```JSON
{"message": "Hello World"}
```

### Інтерактивна API документація

Тепер перейдіть на <a href="http://127.0.0.1:8000/docs" class="external-link" target="_blank">http://127.0.0.1:8000/docs</a>.

Ви побачите автоматично згенеровану інтерактивну API документацію (надану <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

### Альтернативна API документація

А зараз, перейдіть на <a href="http://127.0.0.1:8000/redoc" class="external-link" target="_blank">http://127.0.0.1:8000/redoc</a>.

Ви побачите альтернативну автоматично згенеровану документацію (надану <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

### OpenAPI

**FastAPI** генерує "схему" з усіма вашими API за допомогою **OpenAPI** стандарту для визначення API.

#### "Схема"

"Схема" - це визначення або опис чогось. Не код, який це реалізує, а просто абстрактний опис.

#### API "схема"

У цьому випадку, <a href="https://github.com/OAI/OpenAPI-Specification" class="external-link" target="_blank">OpenAPI</a> це специфікація, яка диктує, як визначити схему вашого API.

Це визначення схеми включає ваші шляхи API, можливі параметри, які вони беруть, тощо.

#### "Схема" даних

Термін "схема" також може стосуватися форми деяких даних, наприклад вмісту JSON.

У цьому випадку це означатиме атрибути JSON, типи даних, які вони мають, тощо.

#### OpenAPI та JSON схеми

OpenAPI визначає схему API для вашого API. І ця схема включає визначення (або "схеми") даних, які надсилаються та отримуються вашим API за допомогою **JSON схеми**, стандарту для схем даних JSON.

#### Перегляньте `openapi.json`

Якщо вам цікаво, як виглядає необроблена схема OpenAPI, FastAPI автоматично генерує JSON (схему) з описами всього вашого API.

Ви можете побачити це безпосередньо на: <a href="http://127.0.0.1:8000/openapi.json" class="external-link" target="_blank">http://127.0.0.1:8000/openapi.json</a>.

Він покаже JSON, починаючи з чогось на кшталт:

```JSON
{
    "openapi": "3.0.2",
    "info": {
        "title": "FastAPI",
        "version": "0.1.0"
    },
    "paths": {
        "/items/": {
            "get": {
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {



...
```

#### Для чого потрібен OpenAPI

Схема OpenAPI — це те, що забезпечує роботу двох інтерактивних систем документації.

І є десятки альтернатив, всі засновані на OpenAPI. Ви можете легко додати будь-яку з цих альтернатив до своєї програми, створеної за допомогою **FastAPI**.

Ви також можете використовувати його для автоматичного створення коду для клієнтів, які спілкуються з вашим API. Наприклад, інтерфейс, мобільні або IoT-додатки.

## Підсумок, крок за кроком

### Крок 1: імпортуйте `FastAPI`

```Python hl_lines="1"
{!../../../docs_src/first_steps/tutorial001.py!}
```

`FastAPI` це клас Python, який надає всю функціональність для вашого API.

!!! note "Технічні деталі"
    `FastAPI` це клас, який наслідується безпосередньо від `Starlette`.

    Ви можете використовувати весь функціонал <a href="https://www.starlette.io/" class="external-link" target="_blank">Starlette</a> разом з `FastAPI`.

### Крок 2: створіть "екземпляр" `FastAPI`

```Python hl_lines="3"
{!../../../docs_src/first_steps/tutorial001.py!}
```

Тут змінна `app` буде "екземпляром" класу `FastAPI`.

Це буде основним моментом взаємодії для створення всього вашого API.

Ця `app` та сама, на яку посилається `uvicorn` у команді:

<div class="termy">

```console
$ uvicorn main:app --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

Якщо ви створюєте свою програму, як:

```Python hl_lines="3"
{!../../../docs_src/first_steps/tutorial002.py!}
```

І помістили її у файл `main.py`, тоді ви б викликали `uvicorn` як:

<div class="termy">

```console
$ uvicorn main:my_awesome_api --reload

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

### Крок 3: створіть *операцію шляху*

#### Шлях

"Шлях" тут відноситься до останньої частини URL-адреси, починаючи з першого `/`.

Отже, в URL-адресі, наприклад:

```
https://example.com/items/foo
```

...шлях буде:

```
/items/foo
```

!!! info
    «Шлях» також зазвичай називають «ендпоінтом», «ручкою» або «маршрутом».

Під час створення API "шлях" є основним способом розділити "турботи" і "ресурси".

#### Операції

"Операція" тут відноситься до одного з "методів" HTTP.

Один з:

* `POST`
* `GET`
* `PUT`
* `DELETE`

...і більш екзотичні:

* `OPTIONS`
* `HEAD`
* `PATCH`
* `TRACE`

У протоколі HTTP ви можете спілкуватися з кожним шляхом за допомогою одного (або кількох) із цих «методів».

---

Створюючи API, ви зазвичай використовуєте ці конкретні методи HTTP для виконання певної дії.

Зазвичай ви використовуєте:

* `POST`: для створення даних.
* `GET`: для отримання даних.
* `PUT`: для оновлення даних.
* `DELETE`: для видалення даних.

Отже, в OpenAPI кожен із методів HTTP називається «операцією».

Ми також будемо називати їх «**операціями**».

#### Визначте *декоратор операції шляху*

```Python hl_lines="6"
{!../../../docs_src/first_steps/tutorial001.py!}
```

`@app.get("/")` повідомляє **FastAPI**, що функція прямо нижче відповідає за обробку запитів, які надходять до:

* шляху `/`
* використовуючи <abbr title="HTTP GET метод"><code>get</code> операцію</abbr>

!!! info "`@decorator` Info"
    Синтаксис `@something` у Python називається "декоратором".

    Ви розміщуєте його поверх функції. Як гарний декоративний капелюх (я здогадуюсь, звідки пішов цей термін).

    «Декоратор» бере наведену нижче функцію і щось з нею робить.

    У нашому випадку цей декоратор повідомляє **FastAPI**, що наведена нижче функція відповідає **шляху** `/` з **операцією** `get`.

    Це "**декоратор операції шляху**".

Ви також можете використовувати інші операції:

* `@app.post()`
* `@app.put()`
* `@app.delete()`

І найбільш екзотичні:

* `@app.options()`
* `@app.head()`
* `@app.patch()`
* `@app.trace()`

!!! tip
    Ви можете використовувати кожну операцію (метод HTTP) за своїм бажанням.

    **FastAPI** не передбачає жодного конкретного значення.

    Інформація тут представлена як рекомендація, а не вимога.

    Наприклад, при використанні GraphQL ви зазвичай виконуєте всі дії, використовуючи лише операції `POST`.

### Крок 4: визначте **функцію операції шляху**

Це наша "**функція операції шляху**":

* **шлях**: це `/`.
* **операція**: це `get`.
* **функція**: це функція під "декоратором" (під `@app.get("/")`).

```Python hl_lines="7"
{!../../../docs_src/first_steps/tutorial001.py!}
```

Це функція Python.

**FastAPI** викликає її щоразу, коли отримує запит на URL-адресу "`/`" за допомогою операції `GET`.

У цьому випадку це «асинхронна» функція.

---

Ви також можете визначити її як звичайну функцію замість `async def`:

```Python hl_lines="7"
{!../../../docs_src/first_steps/tutorial003.py!}
```

!!! note
    Якщо ви не знаєте різниці, перегляньте [Асинхронність: *"Поспіхом?"*](../async.md#in-a-hurry){.internal-link target=_blank}.

### Крок 5: поверніть вміст

```Python hl_lines="8"
{!../../../docs_src/first_steps/tutorial001.py!}
```

Ви можете повернути `dict`, `list`, одиничні значення як `str`, `int` тощо.

Ви також можете повернути моделі Pydantic (докладніше про це ви дізнаєтеся пізніше).

Існує багато інших об’єктів і моделей, які автоматично конвертуються в JSON (включаючи ORM тощо). Спробуйте використовувати свої улюблені, імовірно, що вони вже підтримуються.

## Підсумок

* Імпортуйте `FastAPI`.
* Створіть екземпляр `app`.
* Напишіть **декоратор операції шляху** (наприклад `@app.get("/")`).
* Напишіть **функцію операції шляху** (наприклад `def root(): ...` вище).
* Запустіть сервер розробки (наприклад `uvicorn main:app --reload`).

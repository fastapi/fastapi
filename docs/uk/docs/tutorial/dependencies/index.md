# –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ { #dependencies }

**FastAPI** –º–∞—î –¥—É–∂–µ –ø–æ—Ç—É–∂–Ω—É, –∞–ª–µ —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω—É —Å–∏—Å—Ç–µ–º—É **<dfn title="—Ç–∞–∫–æ–∂ –≤—ñ–¥–æ–º–æ —è–∫: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, —Ä–µ—Å—É—Ä—Å–∏, –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏, —Å–µ—Ä–≤—ñ—Å–∏, —ñ–Ω–∂–µ–∫—Ç–æ–≤–∞–Ω—ñ –æ–±'—î–∫—Ç–∏">–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π</dfn>**.

–í–æ–Ω–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞ —Ç–∞–∫, —â–æ–± –±—É—Ç–∏ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–æ—é —É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ —Ç–∞ —â–æ–± –ø–æ–ª–µ–≥—à–∏—Ç–∏ –±—É–¥—å-—è–∫–æ–º—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—É —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é —ñ–Ω—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –∑ **FastAPI**.

## –©–æ —Ç–∞–∫–µ ¬´–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π¬ª { #what-is-dependency-injection }

–£ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—ñ **¬´–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π¬ª** –æ–∑–Ω–∞—á–∞—î, —â–æ —ñ—Å–Ω—É—î —Å–ø–æ—Å—ñ–± –¥–ª—è –≤–∞—à–æ–≥–æ –∫–æ–¥—É (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤–∞—à–∏—Ö *—Ñ—É–Ω–∫—Ü—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*) –∑–∞–¥–µ–∫–ª–∞—Ä—É–≤–∞—Ç–∏ —Ä–µ—á—ñ, —è–∫—ñ –π–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è —Ä–æ–±–æ—Ç–∏: ¬´–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ¬ª.

–ê –ø–æ—Ç—ñ–º —Ü—è —Å–∏—Å—Ç–µ–º–∞ (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É **FastAPI**) –ø–æ–¥–±–∞—î –ø—Ä–æ –≤—Å–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–µ, —â–æ–± –Ω–∞–¥–∞—Ç–∏ –≤–∞—à–æ–º—É –∫–æ–¥—É —Ü—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (¬´—ñ–Ω–∂–µ–∫—Ç—É–≤–∞—Ç–∏¬ª –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ).

–¶–µ –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–æ, –∫–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ:

* –ú–∞—Ç–∏ —Å–ø—ñ–ª—å–Ω—É –ª–æ–≥—ñ–∫—É (–æ–¥–Ω–∞ –π —Ç–∞ —Å–∞–º–∞ –ª–æ–≥—ñ–∫–∞ –∑–Ω–æ–≤—É —ñ –∑–Ω–æ–≤—É).
* –î—ñ–ª–∏—Ç–∏—Å—è –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è–º–∏ –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.
* –ü—Ä–∏–º—É—Å–æ–≤–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –±–µ–∑–ø–µ–∫—É, –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é, –≤–∏–º–æ–≥–∏ –¥–æ —Ä–æ–ª–µ–π —Ç–æ—â–æ.
* –Ü –±–∞–≥–∞—Ç–æ —ñ–Ω—à–æ–≥–æ...

–í—Å–µ —Ü–µ –∑ –º—ñ–Ω—ñ–º—ñ–∑–∞—Ü—ñ—î—é –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É.

## –ü–µ—Ä—à—ñ –∫—Ä–æ–∫–∏ { #first-steps }

–†–æ–∑–≥–ª—è–Ω—å–º–æ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥. –í—ñ–Ω –±—É–¥–µ —Ç–∞–∫–∏–º –ø—Ä–æ—Å—Ç–∏–º, —â–æ –ø–æ–∫–∏ —â–æ –Ω–µ –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–∏–º.

–ê–ª–µ —Ç–∞–∫ –º–∏ –∑–º–æ–∂–µ–º–æ –∑–æ—Å–µ—Ä–µ–¥–∏—Ç–∏—Å—è –Ω–∞ —Ç–æ–º—É, —è–∫ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞ **–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**.

### –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –∞–±–æ ¬´–∑–∞–ª–µ–∂–Ω–∏–π¬ª { #create-a-dependency-or-dependable }

–°–ø–æ—á–∞—Ç–∫—É –∑–æ—Å–µ—Ä–µ–¥—å–º–æ—Å—è –Ω–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.

–¶–µ –ø—Ä–æ—Å—Ç–æ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –º–æ–∂–µ –ø—Ä–∏–π–º–∞—Ç–∏ —Ç—ñ —Å–∞–º—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —â–æ –π *—Ñ—É–Ω–∫—Ü—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*:

{* ../../docs_src/dependencies/tutorial001_an_py310.py hl[8:9] *}

–û—Å—å —ñ –≤—Å–µ.

**2 —Ä—è–¥–∫–∏**.

–Ü –≤–æ–Ω–∞ –º–∞—î —Ç—É —Å–∞–º—É —Ñ–æ—Ä–º—É —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —â–æ –π —É—Å—ñ –≤–∞—à—ñ *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*.

–ú–æ–∂–µ—Ç–µ –¥—É–º–∞—Ç–∏ –ø—Ä–æ –Ω–µ—ó —è–∫ –ø—Ä–æ *—Ñ—É–Ω–∫—Ü—ñ—é –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É* –±–µ–∑ ¬´–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞¬ª (–±–µ–∑ `@app.get("/some-path")`).

–Ü –≤–æ–Ω–∞ –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –±—É–¥—å-—â–æ.

–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É —Ü—è –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –æ—á—ñ–∫—É—î:

* –ù–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–ø–∏—Ç—É `q` —Ç–∏–ø—É `str`.
* –ù–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–ø–∏—Ç—É `skip` —Ç–∏–ø—É `int`, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `0`.
* –ù–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –∑–∞–ø–∏—Ç—É `limit` —Ç–∏–ø—É `int`, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `100`.

–ü–æ—Ç—ñ–º –≤–æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î `dict`, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Ü—ñ –∑–Ω–∞—á–µ–Ω–Ω—è.

/// info | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

FastAPI –¥–æ–¥–∞–≤ –ø—ñ–¥—Ç—Ä–∏–º–∫—É `Annotated` (—ñ –ø–æ—á–∞–≤ —ó—ó —Ä–µ–∫–æ–º–µ–Ω–¥—É–≤–∞—Ç–∏) —É –≤–µ—Ä—Å—ñ—ó 0.95.0.

–Ø–∫—â–æ —É –≤–∞—Å —Å—Ç–∞—Ä—ñ—à–∞ –≤–µ—Ä—Å—ñ—è, –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –ø–æ–º–∏–ª–∫–∏ –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `Annotated`.

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ [–û–Ω–æ–≤—ñ—Ç—å –≤–µ—Ä—Å—ñ—é FastAPI](../../deployment/versions.md#upgrading-the-fastapi-versions){.internal-link target=_blank} —â–æ–Ω–∞–π–º–µ–Ω—à–µ –¥–æ 0.95.1 –ø–µ—Ä–µ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º `Annotated`.

///

### –Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ `Depends` { #import-depends }

{* ../../docs_src/dependencies/tutorial001_an_py310.py hl[3] *}

### –û–≥–æ–ª–æ—Å—ñ—Ç—å –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —É ¬´–∑–∞–ª–µ–∂–Ω–æ–º—É¬ª { #declare-the-dependency-in-the-dependant }

–¢–∞–∫ —Å–∞–º–æ, —è–∫ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `Body`, `Query` —Ç–æ—â–æ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤–∞—à–æ—ó *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `Depends` –∑ –Ω–æ–≤–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º:

{* ../../docs_src/dependencies/tutorial001_an_py310.py hl[13,18] *}

–•–æ—á–∞ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `Depends` —É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞–∫ —Å–∞–º–æ, —è–∫ `Body`, `Query` —Ç–æ—â–æ, `Depends` –ø—Ä–∞—Ü—é—î —Ç—Ä–æ—Ö–∏ —ñ–Ω–∞–∫—à–µ.

–í–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ –≤ `Depends` –ª–∏—à–µ –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä.

–¶–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞—î –±—É—Ç–∏ —á–∏–º–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç —Ñ—É–Ω–∫—Ü—ñ—ó.

–í–∏ —ó—ó –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ (–Ω–µ –¥–æ–¥–∞–≤–∞–π—Ç–µ –¥—É–∂–∫–∏ –≤ –∫—ñ–Ω—Ü—ñ), –≤–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —ó—ó —è–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä —É `Depends()`.

–Ü —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∏–π–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–∞–∫ —Å–∞–º–æ, —è–∫ —ñ *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*.

/// tip | –ü–æ—Ä–∞–¥–∞

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ, —è–∫—ñ —â–µ ¬´—Ä–µ—á—ñ¬ª, –æ–∫—Ä—ñ–º —Ñ—É–Ω–∫—Ü—ñ–π, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —è–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.

///

–©–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –Ω–∞–¥—Ö–æ–¥–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç, **FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ:

* –í–∏–∫–ª–∏–∫ –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó-–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (¬´–∑–∞–ª–µ–∂–Ω–æ–≥–æ¬ª) –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
* –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∑ –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó.
* –ü—Ä–∏—Å–≤–æ—î–Ω–Ω—è —Ü—å–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É —É –≤–∞—à—ñ–π *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*.

```mermaid
graph TB

common_parameters(["common_parameters"])
read_items["/items/"]
read_users["/users/"]

common_parameters --> read_items
common_parameters --> read_users
```

–¢–∞–∫–∏–º —á–∏–Ω–æ–º –≤–∏ –ø–∏—à–µ—Ç–µ —Å–ø—ñ–ª—å–Ω–∏–π –∫–æ–¥ –æ–¥–∏–Ω —Ä–∞–∑, –∞ **FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ –π–æ–≥–æ –≤–∏–∫–ª–∏–∫ –¥–ª—è –≤–∞—à–∏—Ö *–æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*.

/// check | –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –∫–ª–∞—Å —ñ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –π–æ–≥–æ –∫—É–¥–∏—Å—å —É **FastAPI**, —â–æ–± ¬´–∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏¬ª –π–æ–≥–æ —á–∏ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ.

–í–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î—Ç–µ –π–æ–≥–æ –≤ `Depends`, —ñ **FastAPI** –∑–Ω–∞—î, —â–æ —Ä–æ–±–∏—Ç–∏ –¥–∞–ª—ñ.

///

## –°–ø—ñ–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π `Annotated` { #share-annotated-dependencies }

–£ –Ω–∞–≤–µ–¥–µ–Ω–∏—Ö –≤–∏—â–µ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö –≤–∏–¥–Ω–æ –Ω–µ–≤–µ–ª–∏–∫–µ **–¥—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É**.

–ö–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å `common_parameters()`, –¥–æ–≤–æ–¥–∏—Ç—å—Å—è –ø–∏—Å–∞—Ç–∏ –≤–µ—Å—å –ø–∞—Ä–∞–º–µ—Ç—Ä –∑ –∞–Ω–æ—Ç–∞—Ü—ñ—î—é —Ç–∏–ø—É —Ç–∞ `Depends()`:

```Python
commons: Annotated[dict, Depends(common_parameters)]
```

–ê–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `Annotated`, –º–∏ –º–æ–∂–µ–º–æ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è `Annotated` —É –∑–º—ñ–Ω–Ω—ñ–π —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –≤ –∫—ñ–ª—å–∫–æ—Ö –º—ñ—Å—Ü—è—Ö:

{* ../../docs_src/dependencies/tutorial001_02_an_py310.py hl[12,16,21] *}

/// tip | –ü–æ—Ä–∞–¥–∞

–¶–µ –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π Python, —Ü–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è ¬´–ø—Å–µ–≤–¥–æ–Ω—ñ–º —Ç–∏–ø—É¬ª —ñ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –Ω–µ —î —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–º –¥–ª—è **FastAPI**.

–ê–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ **FastAPI** –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞—Ö Python, –≤–∫–ª—é—á–Ω–æ –∑ `Annotated`, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ü–µ–π —Ç—Ä—é–∫ —É —Å–≤–æ—î–º—É –∫–æ–¥—ñ. üòé

///

–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø—Ä–æ–¥–æ–≤–∂–∞—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —è–∫ –æ—á—ñ–∫—É—î—Ç—å—Å—è, —ñ **–Ω–∞–π–∫—Ä–∞—â–µ** —Ç–µ, —â–æ **—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–∏–ø–∏ –±—É–¥–µ –∑–±–µ—Ä–µ–∂–µ–Ω–∞**, –∞ —Ü–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä –∑–º–æ–∂–µ –π –Ω–∞–¥–∞–ª—ñ –Ω–∞–¥–∞–≤–∞—Ç–∏ **–∞–≤—Ç–æ–∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è**, **–ø–æ–º–∏–ª–∫–∏ –≤ —Ä—è–¥–∫—É** —Ç–æ—â–æ. –¢–µ —Å–∞–º–µ —ñ –¥–ª—è —ñ–Ω—à–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤, —è–∫-–æ—Ç `mypy`.

–¶–µ –±—É–¥–µ –æ—Å–æ–±–ª–∏–≤–æ –∫–æ—Ä–∏—Å–Ω–æ —É **–≤–µ–ª–∏–∫—ñ–π –∫–æ–¥–æ–≤—ñ–π –±–∞–∑—ñ**, –¥–µ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ **–æ–¥–Ω—ñ –π —Ç—ñ —Å–∞–º—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ** –∑–Ω–æ–≤—É —ñ –∑–Ω–æ–≤—É –≤ **–±–∞–≥–∞—Ç—å–æ—Ö *–æ–ø–µ—Ä–∞—Ü—ñ—è—Ö —à–ª—è—Ö—É***.

## –ë—É—Ç–∏ `async` —á–∏ –Ω–µ –±—É—Ç–∏ `async` { #to-async-or-not-to-async }

–û—Å–∫—ñ–ª—å–∫–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞–∫–æ–∂ –≤–∏–∫–ª–∏–∫–∞—Ç–∏–º—É—Ç—å—Å—è **FastAPI** (—Ç–∞–∫ —Å–∞–º–æ, —è–∫ —ñ –≤–∞—à—ñ *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*), –ø—ñ–¥ —á–∞—Å –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π –¥—ñ—é—Ç—å —Ç—ñ —Å–∞–º—ñ –ø—Ä–∞–≤–∏–ª–∞.

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `async def` –∞–±–æ –∑–≤–∏—á–∞–π–Ω–∏–π `def`.

–Ü –≤–∏ –º–æ–∂–µ—Ç–µ –æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ `async def` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∑–≤–∏—á–∞–π–Ω–∏—Ö *—Ñ—É–Ω–∫—Ü—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É* –∑ `def`, –∞–±–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ `def` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ *—Ñ—É–Ω–∫—Ü—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É* –∑ `async def` —Ç–æ—â–æ.

–¶–µ –Ω–µ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è. **FastAPI** –∑–Ω–∞—Ç–∏–º–µ, —â–æ —Ä–æ–±–∏—Ç–∏.

/// note | –ü—Ä–∏–º—ñ—Ç–∫–∞

–Ø–∫—â–æ –≤–∏ –Ω–µ –≤–ø–µ–≤–Ω–µ–Ω—ñ, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —Ä–æ–∑–¥—ñ–ª [Async: *"In a hurry?"*](../../async.md#in-a-hurry){.internal-link target=_blank} –ø—Ä–æ `async` —ñ `await` —É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó.

///

## –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∑ OpenAPI { #integrated-with-openapi }

–£—Å—ñ –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∞ –≤–∏–º–æ–≥–∏ –≤–∞—à–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (—ñ —Å—É–±–∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π) –±—É–¥—É—Ç—å —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –≤ —Ç—É —Å–∞–º—É —Å—Ö–µ–º—É OpenAPI.

–¢–æ–∂ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–∞–∫–æ–∂ –º—ñ—Å—Ç–∏—Ç–∏–º–µ –≤—Å—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ —Ü–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:

<img src="/img/tutorial/dependencies/image01.png">

## –ü—Ä–æ—Å—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è { #simple-usage }

–Ø–∫—â–æ –ø—Ä–∏–¥–∏–≤–∏—Ç–∏—Å—è, *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É* –æ–≥–æ–ª–æ—à—É—é—Ç—å—Å—è –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —â–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –∑–±—ñ–≥–∞—é—Ç—å—Å—è *—à–ª—è—Ö* —Ç–∞ *–æ–ø–µ—Ä–∞—Ü—ñ—è*, –∞ –ø–æ—Ç—ñ–º **FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –≤–∏—Ç—è–≥—É—é—á–∏ –¥–∞–Ω—ñ —ñ–∑ –∑–∞–ø–∏—Ç—É.

–ù–∞—Å–ø—Ä–∞–≤–¥—ñ –≤—Å—ñ (–∞–±–æ –±—ñ–ª—å—à—ñ—Å—Ç—å) –≤–µ–±—Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤ –ø—Ä–∞—Ü—é—é—Ç—å —Ç–∞–∫ —Å–∞–º–æ.

–í–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ —Ü—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ. –á—Ö –≤–∏–∫–ª–∏–∫–∞—î –≤–∞—à —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É **FastAPI**).

–ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–∏—Å—Ç–µ–º–∏ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ –≤–∫–∞–∑–∞—Ç–∏ **FastAPI**, —â–æ –≤–∞—à–∞ *—Ñ—É–Ω–∫—Ü—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É* —Ç–∞–∫–æ–∂ ¬´–∑–∞–ª–µ–∂–∏—Ç—å¬ª –≤—ñ–¥ —á–æ–≥–æ—Å—å, —â–æ –º–∞—î –±—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ –¥–æ –≤–∞—à–æ—ó *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*, —ñ **FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü—å–æ–≥–æ —Ç–∞ ¬´—ñ–Ω–∂–µ–∫—Ç—É–≤–∞–Ω–Ω—è¬ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.

–Ü–Ω—à—ñ –ø–æ—à–∏—Ä–µ–Ω—ñ —Ç–µ—Ä–º—ñ–Ω–∏ –¥–ª—è —Ü—ñ—î—ó —Å–∞–º–æ—ó —ñ–¥–µ—ó ¬´–≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π¬ª:

* —Ä–µ—Å—É—Ä—Å–∏
* –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∏
* —Å–µ—Ä–≤—ñ—Å–∏
* —ñ–Ω–∂–µ–∫—Ç–æ–≤–∞–Ω—ñ –æ–±‚Äô—î–∫—Ç–∏
* –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

## –ü–ª–∞–≥—ñ–Ω–∏ **FastAPI** { #fastapi-plug-ins }

–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó —Ç–∞ ¬´–ø–ª–∞–≥—ñ–Ω–∏¬ª –º–æ–∂–Ω–∞ –±—É–¥—É–≤–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–∏—Å—Ç–µ–º–∏ **–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**. –ê–ª–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ **–Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ ¬´–ø–ª–∞–≥—ñ–Ω–∏¬ª**, –æ—Å–∫—ñ–ª—å–∫–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –º–æ–∂–Ω–∞ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ –±–µ–∑–º–µ–∂–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π —Ç–∞ –≤–∑–∞—î–º–æ–¥—ñ–π, —è–∫—ñ —Å—Ç–∞—é—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –¥–ª—è –≤–∞—à–∏—Ö *—Ñ—É–Ω–∫—Ü—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*.

–Ü –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞ —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–æ, —â–æ –¥–æ–∑–≤–æ–ª—è—î –≤–∞–º –ø—Ä–æ—Å—Ç–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–∞–∫—É–Ω–∫–∏ Python —ñ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ —ó—Ö –∑ –≤–∞—à–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏ API –∑–∞ –∫—ñ–ª—å–∫–∞ —Ä—è–¥–∫—ñ–≤ –∫–æ–¥—É, –±—É–∫–≤–∞–ª—å–Ω–æ.

–í–∏ –ø–æ–±–∞—á–∏—Ç–µ –ø—Ä–∏–∫–ª–∞–¥–∏ —Ü—å–æ–≥–æ –≤ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª–∞—Ö, –ø—Ä–æ —Ä–µ–ª—è—Ü—ñ–π–Ω—ñ —Ç–∞ NoSQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –±–µ–∑–ø–µ–∫—É —Ç–æ—â–æ.

## –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å **FastAPI** { #fastapi-compatibility }

–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Å–∏—Å—Ç–µ–º–∏ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Ä–æ–±–∏—Ç—å **FastAPI** —Å—É–º—ñ—Å–Ω–∏–º –∑:

* —É—Å—ñ–º–∞ —Ä–µ–ª—è—Ü—ñ–π–Ω–∏–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö
* NoSQL –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö
* –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ –ø–∞–∫—É–Ω–∫–∞–º–∏
* –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ API
* —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
* —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API
* —Å–∏—Å—Ç–µ–º–∞–º–∏ —ñ–Ω–∂–µ–∫—Ü—ñ—ó –¥–∞–Ω–∏—Ö —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å
* —Ç–æ—â–æ.

## –ü—Ä–æ—Å—Ç–æ —ñ –ø–æ—Ç—É–∂–Ω–æ { #simple-and-powerful }

–•–æ—á–∞ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥—É–∂–µ –ø—Ä–æ—Å—Ç–∞ —É –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—ñ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ, –≤–æ–Ω–∞ –≤—Å–µ —â–µ –¥—É–∂–µ –ø–æ—Ç—É–∂–Ω–∞.

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, —è–∫—ñ —Å–≤–æ—î—é —á–µ—Ä–≥–æ—é –º–æ–∂—É—Ç—å –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.

–ó—Ä–µ—à—Ç–æ—é –±—É–¥—É—î—Ç—å—Å—è —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–µ –¥–µ—Ä–µ–≤–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π, —ñ —Å–∏—Å—Ç–µ–º–∞ **–í–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π** –ø–æ–¥–±–∞—î –ø—Ä–æ —Ä–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ü–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (—ñ —ó—Ö–Ω—ñ—Ö —Å—É–±–∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π) —Ç–∞ –Ω–∞–¥–∞–Ω–Ω—è (—ñ–Ω–∂–µ–∫—Ç—É–≤–∞–Ω–Ω—è) —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –Ω–∞ –∫–æ–∂–Ω–æ–º—É –∫—Ä–æ—Ü—ñ.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–∏–ø—É—Å—Ç—ñ–º–æ, —É –≤–∞—Å —î 4 –∫—ñ–Ω—Ü–µ–≤—ñ —Ç–æ—á–∫–∏ API (*–æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*):

* `/items/public/`
* `/items/private/`
* `/users/{user_id}/activate`
* `/items/pro/`

—Ç–æ–¥—ñ –≤–∏ –º–æ–≥–ª–∏ –± –¥–æ–¥–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –≤–∏–º–æ–≥–∏ –¥–æ –¥–æ–∑–≤–æ–ª—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∑ –Ω–∏—Ö –ª–∏—à–µ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —ñ —Å—É–±–∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:

```mermaid
graph TB

current_user(["current_user"])
active_user(["active_user"])
admin_user(["admin_user"])
paying_user(["paying_user"])

public["/items/public/"]
private["/items/private/"]
activate_user["/users/{user_id}/activate"]
pro_items["/items/pro/"]

current_user --> active_user
active_user --> admin_user
active_user --> paying_user

current_user --> public
active_user --> private
admin_user --> activate_user
paying_user --> pro_items
```

## –Ü–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –∑ **OpenAPI** { #integrated-with-openapi_1 }

–£—Å—ñ —Ü—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –¥–µ–∫–ª–∞—Ä—É—é—á–∏ —Å–≤–æ—ó –≤–∏–º–æ–≥–∏, —Ç–∞–∫–æ–∂ –¥–æ–¥–∞—é—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–æ—â–æ –¥–æ –≤–∞—à–∏—Ö *–æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*.

**FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ —Ü—å–æ–≥–æ –¥–æ —Å—Ö–µ–º–∏ OpenAPI, —â–æ–± —Ü–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞–ª–æ—Å—è –≤ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó.

# –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ { #dependencies }

**FastAPI** –º–∞—î –¥—É–∂–µ –ø–æ—Ç—É–∂–Ω—É, –∞–ª–µ —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω—É —Å–∏—Å—Ç–µ–º—É **<abbr title="also known as components, resources, providers, services, injectables">Dependency Injection</abbr>**.

–á—ó —Å–ø—Ä–æ—î–∫—Ç–æ–≤–∞–Ω–æ —Ç–∞–∫, —â–æ–± –≤–æ–Ω–∞ –±—É–ª–∞ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–æ—é —É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ —Ç–∞ —â–æ–± –±—É–¥—å-—è–∫–æ–º—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—É –±—É–ª–æ –¥—É–∂–µ –ª–µ–≥–∫–æ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∑ **FastAPI**.

## –©–æ —Ç–∞–∫–µ ¬´Dependency Injection¬ª { #what-is-dependency-injection }

**¬´Dependency Injection¬ª** —É –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—ñ –æ–∑–Ω–∞—á–∞—î, —â–æ —î —Å–ø–æ—Å—ñ–±, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —è–∫–æ–≥–æ –≤–∞—à –∫–æ–¥ (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤–∞—à—ñ *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*) –º–æ–∂–µ –æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏ —Ä–µ—á—ñ, —è–∫—ñ –π–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è —Ä–æ–±–æ—Ç–∏ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è: ¬´dependencies¬ª.

–ê –ø–æ—Ç—ñ–º —Ü—è —Å–∏—Å—Ç–µ–º–∞ (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É **FastAPI**) –ø–æ–¥–±–∞—î –ø—Ä–æ –≤—Å–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–µ, —â–æ–± –Ω–∞–¥–∞—Ç–∏ –≤–∞—à–æ–º—É –∫–æ–¥—É –ø–æ—Ç—Ä—ñ–±–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—Ç–æ–±—Ç–æ ¬´—ñ–Ω º—î–∫—Ç—É–≤–∞—Ç–∏¬ª –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ).

–¶–µ –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–æ, –∫–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ:

* –ú–∞—Ç–∏ —Å–ø—ñ–ª—å–Ω—É –ª–æ–≥—ñ–∫—É (–æ–¥–Ω–∞ –π —Ç–∞ —Å–∞–º–∞ –ª–æ–≥—ñ–∫–∞ –∫–æ–¥—É –∑–Ω–æ–≤—É —ñ –∑–Ω–æ–≤—É).
* –°–ø—ñ–ª—å–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.
* –ó–∞–±–µ–∑–ø–µ—á—É–≤–∞—Ç–∏ –±–µ–∑–ø–µ–∫—É, –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é, –≤–∏–º–æ–≥–∏ —Ä–æ–ª–µ–π —Ç–æ—â–æ.
* –Ü –±–∞–≥–∞—Ç–æ —ñ–Ω—à–∏—Ö —Ä–µ—á–µ–π...

–£—Å–µ —Ü–µ ‚Äî –º—ñ–Ω—ñ–º—ñ–∑—É—é—á–∏ –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è –∫–æ–¥—É.

## –ü–µ—Ä—à—ñ –∫—Ä–æ–∫–∏ { #first-steps }

–†–æ–∑–≥–ª—è–Ω—å–º–æ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥. –ù–∞—Ä–∞–∑—ñ –≤—ñ–Ω –±—É–¥–µ –Ω–∞—Å—Ç—ñ–ª—å–∫–∏ –ø—Ä–æ—Å—Ç–∏–º, —â–æ –Ω–µ –Ω–∞–¥—Ç–æ –∫–æ—Ä–∏—Å–Ω–∏–º.

–ê–ª–µ —Ç–∞–∫ –º–∏ –∑–º–æ–∂–µ–º–æ –∑–æ—Å–µ—Ä–µ–¥–∏—Ç–∏—Å—è –Ω–∞ —Ç–æ–º—É, —è–∫ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞ **Dependency Injection**.

### –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å, –∞–±–æ ¬´dependable¬ª { #create-a-dependency-or-dependable }

–°–ø–æ—á–∞—Ç–∫—É –∑–æ—Å–µ—Ä–µ–¥—å–º–æ—Å—è –Ω–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.

–¶–µ –ø—Ä–æ—Å—Ç–æ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –º–æ–∂–µ –ø—Ä–∏–π–º–∞—Ç–∏ –≤—Å—ñ —Ç—ñ —Å–∞–º—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —â–æ –π *—Ñ—É–Ω–∫—Ü—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*:

{* ../../docs_src/dependencies/tutorial001_an_py310.py hl[8:9] *}

–û—Ç —ñ –≤—Å–µ.

**2 —Ä—è–¥–∫–∏**.

–Ü –≤–æ–Ω–∞ –º–∞—î —Ç—É —Å–∞–º—É —Ñ–æ—Ä–º—É —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É, —â–æ –π —É—Å—ñ –≤–∞—à—ñ *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*.

–í–∏ –º–æ–∂–µ—Ç–µ –¥—É–º–∞—Ç–∏ –ø—Ä–æ –Ω–µ—ó —è–∫ –ø—Ä–æ *—Ñ—É–Ω–∫—Ü—ñ—é –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É* –±–µ–∑ ¬´–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞¬ª (–±–µ–∑ `@app.get("/some-path")`).

–Ü –≤–æ–Ω–∞ –º–æ–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –±—É–¥—å-—â–æ, —â–æ –≤–∏ –∑–∞—Ö–æ—á–µ—Ç–µ.

–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É —Ü—è –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –æ—á—ñ–∫—É—î:

* –ù–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π query-–ø–∞—Ä–∞–º–µ—Ç—Ä `q`, —è–∫–∏–π —î `str`.
* –ù–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π query-–ø–∞—Ä–∞–º–µ—Ç—Ä `skip`, —è–∫–∏–π —î `int`, —ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–æ—Ä—ñ–≤–Ω—é—î `0`.
* –ù–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–∏–π query-–ø–∞—Ä–∞–º–µ—Ç—Ä `limit`, —è–∫–∏–π —î `int`, —ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–æ—Ä—ñ–≤–Ω—é—î `100`.

–ê –ø–æ—Ç—ñ–º –≤–æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –ø–æ–≤–µ—Ä—Ç–∞—î `dict`, —â–æ –º—ñ—Å—Ç–∏—Ç—å —Ü—ñ –∑–Ω–∞—á–µ–Ω–Ω—è.

/// info | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

FastAPI –¥–æ–¥–∞–≤ –ø—ñ–¥—Ç—Ä–∏–º–∫—É `Annotated` (—ñ –ø–æ—á–∞–≤ —Ä–µ–∫–æ–º–µ–Ω–¥—É–≤–∞—Ç–∏ —ó—ó) —É –≤–µ—Ä—Å—ñ—ó 0.95.0.

–Ø–∫—â–æ —É –≤–∞—Å —Å—Ç–∞—Ä—ñ—à–∞ –≤–µ—Ä—Å—ñ—è, –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –ø–æ–º–∏–ª–∫–∏ –ø—ñ–¥ —á–∞—Å —Å–ø—Ä–æ–±–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `Annotated`.

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ [–æ–Ω–æ–≤–∏–ª–∏ –≤–µ—Ä—Å—ñ—é FastAPI](../../deployment/versions.md#upgrading-the-fastapi-versions){.internal-link target=_blank} —â–æ–Ω–∞–π–º–µ–Ω—à–µ –¥–æ 0.95.1, –ø–µ—Ä—à –Ω—ñ–∂ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `Annotated`.

///

### –Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ `Depends` { #import-depends }

{* ../../docs_src/dependencies/tutorial001_an_py310.py hl[3] *}

### –û–≥–æ–ª–æ—Å—ñ—Ç—å –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —É ¬´dependant¬ª { #declare-the-dependency-in-the-dependant }

–¢–∞–∫ —Å–∞–º–æ, —è–∫ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `Body`, `Query` —Ç–æ—â–æ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤–∞—à–æ—ó *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `Depends` –∑ –Ω–æ–≤–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º:

{* ../../docs_src/dependencies/tutorial001_an_py310.py hl[13,18] *}

–•–æ—á–∞ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `Depends` —É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞–∫ —Å–∞–º–æ, —è–∫ `Body`, `Query` —Ç–æ—â–æ, `Depends` –ø—Ä–∞—Ü—é—î —Ç—Ä–æ—Ö–∏ —ñ–Ω–∞–∫—à–µ.

–í–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ –≤ `Depends` –ª–∏—à–µ –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä.

–¶–µ–π –ø–∞—Ä–∞–º–µ—Ç—Ä –º–∞—î –±—É—Ç–∏ —á–∏–º–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç —Ñ—É–Ω–∫—Ü—ñ—ó.

–í–∏ **–Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ —ó—ó** –Ω–∞–ø—Ä—è–º—É (–Ω–µ –¥–æ–¥–∞—î—Ç–µ –∫—Ä—É–≥–ª—ñ –¥—É–∂–∫–∏ –≤ –∫—ñ–Ω—Ü—ñ), –≤–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —ó—ó —è–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä —É `Depends()`.

–Ü —Ü—è —Ñ—É–Ω–∫—Ü—ñ—è –ø—Ä–∏–π–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–∞–∫ —Å–∞–º–æ, —è–∫ *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*.

/// tip | –ü–æ—Ä–∞–¥–∞

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ, —è–∫—ñ —â–µ ¬´—Ä–µ—á—ñ¬ª, –æ–∫—Ä—ñ–º —Ñ—É–Ω–∫—Ü—ñ–π, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —è–∫ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.

///

–©–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –Ω–∞–¥—Ö–æ–¥–∏—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç, **FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ:

* –í–∏–∫–ª–∏–∫ –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (¬´dependable¬ª) –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
* –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∑ –≤–∞—à–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó.
* –ü—Ä–∏—Å–≤–æ—î–Ω–Ω—è —Ü—å–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ø–∞—Ä–∞–º–µ—Ç—Ä—É —É –≤–∞—à—ñ–π *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*.

```mermaid
graph TB

common_parameters(["common_parameters"])
read_items["/items/"]
read_users["/users/"]

common_parameters --> read_items
common_parameters --> read_users
```

–¢–∞–∫–∏–º —á–∏–Ω–æ–º –≤–∏ –ø–∏—à–µ—Ç–µ —Å–ø—ñ–ª—å–Ω–∏–π –∫–æ–¥ –æ–¥–∏–Ω —Ä–∞–∑, –∞ **FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ –π–æ–≥–æ –≤–∏–∫–ª–∏–∫ –¥–ª—è –≤–∞—à–∏—Ö *–æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*.

/// check

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ –≤–∞–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –∫–ª–∞—Å —ñ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –π–æ–≥–æ –∫—É–¥–∏—Å—å —É **FastAPI**, —â–æ–± ¬´–∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏¬ª –π–æ–≥–æ —á–∏ –∑—Ä–æ–±–∏—Ç–∏ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ.

–í–∏ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î—Ç–µ –π–æ–≥–æ –≤ `Depends`, —ñ **FastAPI** –∑–Ω–∞—î, —è–∫ –∑—Ä–æ–±–∏—Ç–∏ –≤—Å–µ —ñ–Ω—à–µ.

///

## –°–ø—ñ–ª—å–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π `Annotated` { #share-annotated-dependencies }

–£ –ø—Ä–∏–∫–ª–∞–¥–∞—Ö –≤–∏—â–µ –≤–∏ –±–∞—á–∏—Ç–µ, —â–æ —î –º–∞–ª–µ–Ω—å–∫–∞ —á–∞—Å—Ç–∫–∞ **–¥—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É**.

–ö–æ–ª–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å `common_parameters()`, –≤–∞–º —Ç—Ä–µ–±–∞ –Ω–∞–ø–∏—Å–∞—Ç–∏ –≤–µ—Å—å –ø–∞—Ä–∞–º–µ—Ç—Ä —ñ–∑ type annotation —Ç–∞ `Depends()`:

```Python
commons: Annotated[dict, Depends(common_parameters)]
```

–ê–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `Annotated`, –º–∏ –º–æ–∂–µ–º–æ –∑–±–µ—Ä–µ–≥—Ç–∏ —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è `Annotated` —É –∑–º—ñ–Ω–Ω—ñ–π —ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –π–æ–≥–æ –≤ –∫—ñ–ª—å–∫–æ—Ö –º—ñ—Å—Ü—è—Ö:

{* ../../docs_src/dependencies/tutorial001_02_an_py310.py hl[12,16,21] *}

/// tip | –ü–æ—Ä–∞–¥–∞

–¶–µ –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π Python ‚Äî —Ü–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è ¬´type alias¬ª —ñ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –Ω–µ —î —á–∏–º–æ—Å—å —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–º –¥–ª—è **FastAPI**.

–ê–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ **FastAPI** –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞—Ö Python, –∑–æ–∫—Ä–µ–º–∞ –Ω–∞ `Annotated`, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ü–µ–π –ø—Ä–∏–π–æ–º —É —Å–≤–æ—î–º—É –∫–æ–¥—ñ. üòé

///

–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –π –Ω–∞–¥–∞–ª—ñ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º—É—Ç—å —è–∫ –æ—á—ñ–∫—É—î—Ç—å—Å—è, –∞ **–Ω–∞–π–∫—Ä–∞—â–∞ —á–∞—Å—Ç–∏–Ω–∞** –≤ —Ç–æ–º—É, —â–æ **—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–∏–ø–∏ –±—É–¥–µ –∑–±–µ—Ä–µ–∂–µ–Ω–∞**, —Ç–æ–±—Ç–æ –≤–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä –∑–º–æ–∂–µ –π –Ω–∞–¥–∞–ª—ñ –Ω–∞–¥–∞–≤–∞—Ç–∏ **–∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è**, **inline-–ø–æ–º–∏–ª–∫–∏** —Ç–æ—â–æ. –¢–µ —Å–∞–º–µ —Å—Ç–æ—Å—É—î—Ç—å—Å—è –π —ñ–Ω—à–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤, —è–∫-–æ—Ç `mypy`.

–¶–µ –±—É–¥–µ –æ—Å–æ–±–ª–∏–≤–æ –∫–æ—Ä–∏—Å–Ω–æ, –∫–æ–ª–∏ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ —Ü–µ —É **–≤–µ–ª–∏–∫—ñ–π –∫–æ–¥–æ–≤—ñ–π –±–∞–∑—ñ**, –¥–µ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ **—Ç—ñ —Å–∞–º—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ** –∑–Ω–æ–≤—É —ñ –∑–Ω–æ–≤—É –≤ **–±–∞–≥–∞—Ç—å–æ—Ö *–æ–ø–µ—Ä–∞—Ü—ñ—è—Ö —à–ª—è—Ö—É***.

## `async` —á–∏ –Ω–µ `async` { #to-async-or-not-to-async }

–û—Å–∫—ñ–ª—å–∫–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞–∫–æ–∂ –±—É–¥—É—Ç—å –≤–∏–∫–ª–∏–∫–∞—Ç–∏—Å—è **FastAPI** (—Ç–∞–∫ —Å–∞–º–æ, —è–∫ —ñ –≤–∞—à—ñ *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*), –ø—ñ–¥ —á–∞—Å –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –≤–∞—à–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π –¥—ñ—é—Ç—å —Ç—ñ —Å–∞–º—ñ –ø—Ä–∞–≤–∏–ª–∞.

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `async def` –∞–±–æ –∑–≤–∏—á–∞–π–Ω–∏–π `def`.

–Ü –≤–∏ –º–æ–∂–µ—Ç–µ –æ–≥–æ–ª–æ—à—É–≤–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ `async def` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∑–≤–∏—á–∞–π–Ω–∏—Ö `def` *—Ñ—É–Ω–∫—Ü—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*, –∞–±–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑ `def` –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `async def` *—Ñ—É–Ω–∫—Ü—ñ–π –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É* —Ç–æ—â–æ.

–¶–µ –Ω–µ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è. **FastAPI** –∑–Ω–∞—Ç–∏–º–µ, —â–æ —Ä–æ–±–∏—Ç–∏.

/// note | –ü—Ä–∏–º—ñ—Ç–∫–∞

–Ø–∫—â–æ –≤–∏ –Ω–µ –∑–Ω–∞—î—Ç–µ, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ —Ä–æ–∑–¥—ñ–ª [Async: *¬´–ü–æ—Å–ø—ñ—à–∞—î—Ç–µ?¬ª*](../../async.md#in-a-hurry){.internal-link target=_blank} –ø—Ä–æ `async` —ñ `await` —É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó.

///

## –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ OpenAPI { #integrated-with-openapi }

–£—Å—ñ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤, –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–∞ –≤–∏–º–æ–≥–∏ –≤–∞—à–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (—ñ –ø—ñ–¥–∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π) –±—É–¥—É—Ç—å —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –≤ —Ç—É —Å–∞–º—É —Å—Ö–µ–º—É OpenAPI.

–û—Ç–∂–µ, —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è —Ç–∞–∫–æ–∂ –º–∞—Ç–∏–º–µ –≤—Å—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ —Ü–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:

<img src="/img/tutorial/dependencies/image01.png">

## –ü—Ä–æ—Å—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è { #simple-usage }

–Ø–∫—â–æ –ø—Ä–∏–¥–∏–≤–∏—Ç–∏—Å—è, *—Ñ—É–Ω–∫—Ü—ñ—ó –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É* –æ–≥–æ–ª–æ—à—É—é—Ç—å—Å—è –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —â–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –∑–±—ñ–≥–∞—é—Ç—å—Å—è *—à–ª—è—Ö* —ñ *–æ–ø–µ—Ä–∞—Ü—ñ—è*, –∞ –ø–æ—Ç—ñ–º **FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –≤–∏—Ç—è–≥—É—é—á–∏ –¥–∞–Ω—ñ —ñ–∑ –∑–∞–ø–∏—Ç—É.

–ù–∞—Å–ø—Ä–∞–≤–¥—ñ –≤—Å—ñ (–∞–±–æ –±—ñ–ª—å—à—ñ—Å—Ç—å) –≤–µ–±—Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤ –ø—Ä–∞—Ü—é—é—Ç—å —Ç–∞–∫ —Å–∞–º–æ.

–í–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç–µ —Ü—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–∞–ø—Ä—è–º—É. –á—Ö –≤–∏–∫–ª–∏–∫–∞—î –≤–∞—à —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É **FastAPI**).

–Ü–∑ —Å–∏—Å—Ç–µ–º–æ—é Dependency Injection –≤–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ—Ç–µ —Å–∫–∞–∑–∞—Ç–∏ **FastAPI**, —â–æ –≤–∞—à–∞ *—Ñ—É–Ω–∫—Ü—ñ—è –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É* —Ç–∞–∫–æ–∂ ¬´–∑–∞–ª–µ–∂–∏—Ç—å¬ª –≤—ñ–¥ —á–æ–≥–æ—Å—å —ñ–Ω—à–æ–≥–æ, —â–æ –º–∞—î –±—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–æ –ø–µ—Ä–µ–¥ –≤–∞—à–æ—é *—Ñ—É–Ω–∫—Ü—ñ—î—é –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*, —ñ **FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Ü—å–æ–≥–æ —Ç–∞ ¬´—ñ–Ω º—î–∫—Ü—ñ—é¬ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.

–Ü–Ω—à—ñ –ø–æ—à–∏—Ä–µ–Ω—ñ —Ç–µ—Ä–º—ñ–Ω–∏ –¥–ª—è —Ü—ñ—î—ó —Å–∞–º–æ—ó —ñ–¥–µ—ó ¬´dependency injection¬ª:

* resources
* providers
* services
* injectables
* components

## –ü–ª–∞–≥—ñ–Ω–∏ **FastAPI** { #fastapi-plug-ins }

–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó —Ç–∞ ¬´plug-ins¬ª –º–æ–∂–Ω–∞ –±—É–¥—É–≤–∞—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —Å–∏—Å—Ç–µ–º–∏ **Dependency Injection**. –ê–ª–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ **–Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ ¬´plug-ins¬ª**, –∞–¥–∂–µ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –º–æ–∂–Ω–∞ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π —ñ –≤–∑–∞—î–º–æ–¥—ñ–π, —è–∫—ñ —Å—Ç–∞–Ω—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∏–º–∏ –≤–∞—à–∏–º *—Ñ—É–Ω–∫—Ü—ñ—è–º –æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*.

–ê –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–æ –π —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–æ, —Ç–∞–∫ —â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –ø–∞–∫–µ—Ç–∏ Python —ñ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ —ó—Ö –∑ –≤–∞—à–∏–º–∏ API-—Ñ—É–Ω–∫—Ü—ñ—è–º–∏ –±—É–∫–≤–∞–ª—å–Ω–æ –≤ –∫—ñ–ª—å–∫–∞ —Ä—è–¥–∫—ñ–≤ –∫–æ–¥—É.

–ü—Ä–∏–∫–ª–∞–¥–∏ —Ü—å–æ–≥–æ –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –≤ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª–∞—Ö ‚Äî –ø—Ä–æ —Ä–µ–ª—è—Ü—ñ–π–Ω—ñ —Ç–∞ NoSQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –±–µ–∑–ø–µ–∫—É —Ç–æ—â–æ.

## –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å **FastAPI** { #fastapi-compatibility }

–ü—Ä–æ—Å—Ç–æ—Ç–∞ —Å–∏—Å—Ç–µ–º–∏ dependency injection —Ä–æ–±–∏—Ç—å **FastAPI** —Å—É–º—ñ—Å–Ω–∏–º –∑:

* —É—Å—ñ–º–∞ —Ä–µ–ª—è—Ü—ñ–π–Ω–∏–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö
* NoSQL –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö
* –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏
* –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ API
* —Å–∏—Å—Ç–µ–º–∞–º–∏ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
* —Å–∏—Å—Ç–µ–º–∞–º–∏ –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API
* —Å–∏—Å—Ç–µ–º–∞–º–∏ —ñ–Ω º—î–∫—Ü—ñ—ó –¥–∞–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
* —Ç–æ—â–æ.

## –ü—Ä–æ—Å—Ç–æ—Ç–∞ —Ç–∞ –ø–æ—Ç—É–∂–Ω—ñ—Å—Ç—å { #simple-and-powerful }

–•–æ—á–∞ —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ dependency injection –¥—É–∂–µ –ø—Ä–æ—Å—Ç–∞ –≤ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—ñ —Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—ñ, –≤–æ–Ω–∞ –≤—Å–µ –æ–¥–Ω–æ –¥—É–∂–µ –ø–æ—Ç—É–∂–Ω–∞.

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, —è–∫—ñ —Å–≤–æ—î—é —á–µ—Ä–≥–æ—é –º–æ–∂—É—Ç—å –≤–∏–∑–Ω–∞—á–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ.

–ó—Ä–µ—à—Ç–æ—é –±—É–¥—É—î—Ç—å—Å—è —ñ—î—Ä–∞—Ä—Ö—ñ—á–Ω–µ –¥–µ—Ä–µ–≤–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π, —ñ —Å–∏—Å—Ç–µ–º–∞ **Dependency Injection** –ø–æ–¥–±–∞—î –ø—Ä–æ —Ä–æ–∑–≤‚Äô—è–∑–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ü–∏—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –≤–∞—Å (—ñ —ó—Ö–Ω—ñ—Ö –ø—ñ–¥–∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π) —Ç–∞ –ø—Ä–æ –Ω–∞–¥–∞–Ω–Ω—è (—ñ–Ω º—î–∫—Ü—ñ—é) —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –Ω–∞ –∫–æ–∂–Ω–æ–º—É –∫—Ä–æ—Ü—ñ.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —Å–∫–∞–∂—ñ–º–æ, —É –≤–∞—Å —î 4 API endpoint-–∏ (*–æ–ø–µ—Ä–∞—Ü—ñ—ó —à–ª—è—Ö—É*):

* `/items/public/`
* `/items/private/`
* `/users/{user_id}/activate`
* `/items/pro/`

—Ç–æ–¥—ñ –≤–∏ –º–æ–≥–ª–∏ –± –¥–æ–¥–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –≤–∏–º–æ–≥–∏ —â–æ–¥–æ –¥–æ–∑–≤–æ–ª—ñ–≤ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑ –Ω–∏—Ö –ª–∏—à–µ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —ñ –ø—ñ–¥–∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:

```mermaid
graph TB

current_user(["current_user"])
active_user(["active_user"])
admin_user(["admin_user"])
paying_user(["paying_user"])

public["/items/public/"]
private["/items/private/"]
activate_user["/users/{user_id}/activate"]
pro_items["/items/pro/"]

current_user --> active_user
active_user --> admin_user
active_user --> paying_user

current_user --> public
active_user --> private
admin_user --> activate_user
paying_user --> pro_items
```

## –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ **OpenAPI** { #integrated-with-openapi_1 }

–£—Å—ñ —Ü—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, –æ–≥–æ–ª–æ—à—É—é—á–∏ —Å–≤–æ—ó –≤–∏–º–æ–≥–∏, —Ç–∞–∫–æ–∂ –¥–æ–¥–∞—é—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–æ—â–æ –¥–æ –≤–∞—à–∏—Ö *–æ–ø–µ—Ä–∞—Ü—ñ–π —à–ª—è—Ö—É*.

**FastAPI** –ø–æ–¥–±–∞—î –ø—Ä–æ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ —Ü—å–æ–≥–æ –¥–æ —Å—Ö–µ–º–∏ OpenAPI, —â–æ–± —Ü–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞–ª–æ—Å—è –≤ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó.

# SQL (—Ä–µ–ª—è—Ü—ñ–π–Ω—ñ) –±–∞–∑–∏ –¥–∞–Ω–∏—Ö { #sql-relational-databases }

**FastAPI** –Ω–µ –≤–∏–º–∞–≥–∞—î –≤—ñ–¥ –≤–∞—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è SQL (—Ä–µ–ª—è—Ü—ñ–π–Ω–æ—ó) –±–∞–∑–∏ –¥–∞–Ω–∏—Ö. –ê–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–±—É–¥—å-—è–∫—É –±–∞–∑—É –¥–∞–Ω–∏—Ö**, —è–∫—É –∑–∞–±–∞–∂–∞—î—Ç–µ.

–¢—É—Ç –º–∏ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –ø—Ä–∏–∫–ª–∞–¥ —ñ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º <a href="https://sqlmodel.tiangolo.com/" class="external-link" target="_blank">SQLModel</a>.

**SQLModel** –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –ø–æ–≤–µ—Ä—Ö <a href="https://www.sqlalchemy.org/" class="external-link" target="_blank">SQLAlchemy</a> —Ç–∞ Pydantic. –ô–æ–≥–æ —Å—Ç–≤–æ—Ä–∏–≤ —Ç–æ–π —Å–∞–º–∏–π –∞–≤—Ç–æ—Ä **FastAPI**, —â–æ–± –≤—ñ–Ω —ñ–¥–µ–∞–ª—å–Ω–æ –ø—ñ–¥—Ö–æ–¥–∏–≤ –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ FastAPI, —è–∫–∏–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **SQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**.

/// tip | –ü–æ—Ä–∞–¥–∞

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É —ñ–Ω—à—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –¥–ª—è SQL –∞–±–æ NoSQL –±–∞–∑ –¥–∞–Ω–∏—Ö (—É –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö —ó—Ö –Ω–∞–∑–∏–≤–∞—é—Ç—å <abbr title="Object Relational Mapper - –û–±'—î–∫—Ç–Ω–æ-—Ä–µ–ª—è—Ü—ñ–π–Ω–∏–π –º–∞–ø–µ—Ä: –º–æ–¥–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –¥–ª—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, –¥–µ –¥–µ—è–∫—ñ –∫–ª–∞—Å–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å SQL-—Ç–∞–±–ª–∏—Ü—ñ, –∞ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ ‚Äî —Ä—è–¥–∫–∏ –≤ —Ü–∏—Ö —Ç–∞–±–ª–∏—Ü—è—Ö">"ORMs"</abbr>), FastAPI –Ω–µ –∑–º—É—à—É—î –≤–∞—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —â–æ—Å—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–µ. üòé

///

–û—Å–∫—ñ–ª—å–∫–∏ SQLModel –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ SQLAlchemy, –≤–∏ –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–±—É–¥—å-—è–∫—É –±–∞–∑—É –¥–∞–Ω–∏—Ö, —è–∫—É –ø—ñ–¥—Ç—Ä–∏–º—É—î** SQLAlchemy (–∞ –æ—Ç–∂–µ, —ñ SQLModel), –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

* PostgreSQL
* MySQL
* SQLite
* Oracle
* Microsoft SQL Server —Ç–æ—â–æ.

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ **SQLite**, –±–æ –≤–æ–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –æ–¥–∏–Ω —Ñ–∞–π–ª —ñ –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É –≤ Python. –¢–æ–∂ –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ü–µ–π –ø—Ä–∏–∫–ª–∞–¥ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –π–æ–≥–æ —è–∫ —î.

–ü—ñ–∑–Ω—ñ—à–µ, –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –≤–∞–º, —ñ–º–æ–≤—ñ—Ä–Ω–æ, –∑–∞—Ö–æ—á–µ—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ **PostgreSQL**.

/// tip | –ü–æ—Ä–∞–¥–∞

–Ü—Å–Ω—É—î –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—î–∫—Ç—É –∑ **FastAPI** —Ç–∞ **PostgreSQL**, —è–∫–∏–π –≤–∫–ª—é—á–∞—î frontend —ñ –±—ñ–ª—å—à–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤: <a href="https://github.com/fastapi/full-stack-fastapi-template" class="external-link" target="_blank">https://github.com/fastapi/full-stack-fastapi-template</a>

///

–¶–µ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–∏–π —ñ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç—É—Ç–æ—Ä—ñ–∞–ª. –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –ø—Ä–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∑–∞–≥–∞–ª–æ–º, –ø—Ä–æ SQL –∞–±–æ –ø—Ä–æ –±—ñ–ª—å—à –ø—Ä–æ—Å—É–Ω—É—Ç—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ <a href="https://sqlmodel.tiangolo.com/" class="external-link" target="_blank">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó SQLModel</a>.

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `SQLModel` { #install-sqlmodel }

–°–ø–µ—Ä—à—É –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ [–≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ](../virtual-environments.md){.internal-link target=_blank}, –∞–∫—Ç–∏–≤—É–≤–∞–ª–∏ –π–æ–≥–æ, –∞ –ø–æ—Ç—ñ–º –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `sqlmodel`:

<div class="termy">

```console
$ pip install sqlmodel
---> 100%
```

</div>

## –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –∑ –æ–¥–Ω—ñ—î—é –º–æ–¥–µ–ª–ª—é { #create-the-app-with-a-single-model }

–°–ø–µ—Ä—à—É —Å—Ç–≤–æ—Ä–∏–º–æ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à—É –ø–µ—Ä—à—É –≤–µ—Ä—Å—ñ—é –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –∑ –æ–¥–Ω—ñ—î—é –º–æ–¥–µ–ª–ª—é **SQLModel**.

–ü—ñ–∑–Ω—ñ—à–µ –º–∏ —ó—ó –ø–æ–∫—Ä–∞—â–∏–º–æ, –ø—ñ–¥–≤–∏—â–∏–≤—à–∏ –±–µ–∑–ø–µ–∫—É —Ç–∞ –≥–Ω—É—á–∫—ñ—Å—Ç—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **–∫—ñ–ª—å–∫–æ—Ö –º–æ–¥–µ–ª–µ–π** –Ω–∏–∂—á–µ. ü§ì

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π { #create-models }

–Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ `SQLModel` —ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[1:11] hl[7:11] *}

–ö–ª–∞—Å `Hero` –¥—É–∂–µ —Å—Ö–æ–∂–∏–π –Ω–∞ –º–æ–¥–µ–ª—å Pydantic (—Ñ–∞–∫—Ç–∏—á–Ω–æ, –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ, –≤—ñ–Ω *—ñ —î –º–æ–¥–µ–ª–ª—é Pydantic*).

–Ñ –∫—ñ–ª—å–∫–∞ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç–µ–π:

* `table=True` –ø–æ–≤—ñ–¥–æ–º–ª—è—î SQLModel, —â–æ —Ü–µ *—Ç–∞–±–ª–∏—á–Ω–∞ –º–æ–¥–µ–ª—å* ‚Äî –≤–æ–Ω–∞ –º–∞—î –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç–∏ **—Ç–∞–±–ª–∏—Ü—é** –≤ SQL –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ *–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö* (—è–∫ –±—É–¥—å-—è–∫–∏–π —ñ–Ω—à–∏–π –∑–≤–∏—á–∞–π–Ω–∏–π –∫–ª–∞—Å Pydantic).

* `Field(primary_key=True)` –ø–æ–≤—ñ–¥–æ–º–ª—è—î SQLModel, —â–æ `id` ‚Äî —Ü–µ **–ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á** —É SQL –±–∞–∑—ñ –¥–∞–Ω–∏—Ö (–¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –ø—Ä–æ –ø–µ—Ä–≤–∏–Ω–Ω—ñ –∫–ª—é—á—ñ –º–æ–∂–Ω–∞ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó SQLModel).

    **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `int | None` –¥–ª—è –ø–æ–ª—è –ø–µ—Ä–≤–∏–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞, —â–æ–± —É Python-–∫–æ–¥—ñ –º–æ–∂–Ω–∞ –±—É–ª–æ *—Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±'—î–∫—Ç –±–µ–∑ `id`* (`id=None`), –ø—Ä–∏–ø—É—Å–∫–∞—é—á–∏, —â–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö *–∑–≥–µ–Ω–µ—Ä—É—î –π–æ–≥–æ –ø—ñ–¥ —á–∞—Å –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è*. SQLModel —Ä–æ–∑—É–º—ñ—î, —â–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–∞–¥–∞—Å—Ç—å `id`, —ñ *–≤–∏–∑–Ω–∞—á–∞—î –∫–æ–ª–æ–Ω–∫—É —è–∫ –Ω–µ–Ω—É–ª—å–æ–≤–∏–π `INTEGER`* —É —Å—Ö–µ–º—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö. –î–∏–≤. –ø–æ–¥—Ä–æ–±–∏—Ü—ñ –≤ <a href="https://sqlmodel.tiangolo.com/tutorial/create-db-and-table/#primary-key-id" class="external-link" target="_blank">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó SQLModel –ø—Ä–æ –ø–µ—Ä–≤–∏–Ω–Ω—ñ –∫–ª—é—á—ñ</a>.

* `Field(index=True)` –ø–æ–≤—ñ–¥–æ–º–ª—è—î SQLModel, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **SQL-—ñ–Ω–¥–µ–∫—Å** –¥–ª—è —Ü—ñ—î—ó –∫–æ–ª–æ–Ω–∫–∏, —â–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å —à–≤–∏–¥—à–µ —à—É–∫–∞—Ç–∏ –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –ø—ñ–¥ —á–∞—Å —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –∑–∞ —Ü—ñ—î—é –∫–æ–ª–æ–Ω–∫–æ—é.

    SQLModel –∑–Ω–∞—Ç–∏–º–µ, —â–æ –æ–≥–æ–ª–æ—à–µ–Ω–µ —è–∫ `str` –±—É–¥–µ SQL-–∫–æ–ª–æ–Ω–∫–æ—é —Ç–∏–ø—É `TEXT` (–∞–±–æ `VARCHAR`, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö).

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Engine { #create-an-engine }

`engine` —É SQLModel (–ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º —Ü–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ `engine` SQLAlchemy) ‚Äî —Ü–µ —Ç–µ, —â–æ **—É—Ç—Ä–∏–º—É—î –∑'—î–¥–Ω–∞–Ω–Ω—è** –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–£ –≤–∞—Å –±—É–¥–µ **–æ–¥–∏–Ω-—î–¥–∏–Ω–∏–π –æ–±'—î–∫—Ç `engine`** –¥–ª—è –≤—Å—å–æ–≥–æ –∫–æ–¥—É, —â–æ–± –ø—ñ–¥–∫–ª—é—á–∞—Ç–∏—Å—è –¥–æ –æ–¥–Ω—ñ—î—ó –π —Ç—ñ—î—ó —Å–∞–º–æ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[14:18] hl[14:15,17:18] *}

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `check_same_thread=False` –¥–æ–∑–≤–æ–ª—è—î FastAPI –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –æ–¥–Ω—É –π —Ç—É —Å–∞–º—É –±–∞–∑—É –¥–∞–Ω–∏—Ö SQLite —É —Ä—ñ–∑–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö. –¶–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ, –æ—Å–∫—ñ–ª—å–∫–∏ **–æ–¥–∏–Ω –∑–∞–ø–∏—Ç** –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–±—ñ–ª—å—à–µ –Ω—ñ–∂ –æ–¥–∏–Ω –ø–æ—Ç—ñ–∫** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è—Ö).

–ù–µ —Ö–≤–∏–ª—é–π—Ç–µ—Å—è: –∑ –æ–≥–ª—è–¥—É –Ω–∞ —Ç–µ, —è–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–æ –∫–æ–¥, –∑–≥–æ–¥–æ–º –º–∏ –≥–∞—Ä–∞–Ω—Ç—É—î–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **–æ–¥–Ω—ñ—î—ó SQLModel *session* –Ω–∞ –∑–∞–ø–∏—Ç** ‚Äî —Å–∞–º–µ —Ü—å–æ–≥–æ –π –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è –¥–æ—Å—è–≥—Ç–∏ `check_same_thread`.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å { #create-the-tables }

–î–∞–ª—ñ –¥–æ–¥–∞–º–æ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `SQLModel.metadata.create_all(engine)` –¥–ª—è **—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å** –¥–ª—è –≤—Å—ñ—Ö *—Ç–∞–±–ª–∏—á–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π*.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[21:22] hl[21:22] *}

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ Session { #create-a-session-dependency }

**`Session`** –∑–±–µ—Ä—ñ–≥–∞—î **–æ–±'—î–∫—Ç–∏ –≤ –ø–∞–º'—è—Ç—ñ** –π –≤—ñ–¥—Å—Ç–µ–∂—É—î –∑–º—ñ–Ω–∏, –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è –¥–∞–Ω–∏—Ö, –∞ –ø–æ—Ç—ñ–º **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `engine`** –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–ú–∏ —Å—Ç–≤–æ—Ä–∏–º–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å FastAPI –∑ `yield`, —è–∫–∞ –Ω–∞–¥–∞–≤–∞—Ç–∏–º–µ –Ω–æ–≤—É `Session` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É. –¶–µ –π –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ–¥–Ω—É —Å–µ—Å—ñ—é –Ω–∞ –∑–∞–ø–∏—Ç. ü§ì

–ü–æ—Ç—ñ–º —Å—Ç–≤–æ—Ä–∏–º–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å `Annotated` ‚Äî `SessionDep`, —â–æ–± —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ —Ä–µ—à—Ç—É –∫–æ–¥—É, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ —Ü—é –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[25:30]  hl[25:27,30] *}

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –ø—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É { #create-database-tables-on-startup }

–ú–∏ —Å—Ç–≤–æ—Ä–∏–º–æ —Ç–∞–±–ª–∏—Ü—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[32:37] hl[35:37] *}

–¢—É—Ç –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ —Ç–∞–±–ª–∏—Ü—ñ –≤ –ø–æ–¥—ñ—ó –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω—É –≤–∏, –π–º–æ–≤—ñ—Ä–Ω–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ–π–Ω–∏–π —Å–∫—Ä–∏–ø—Ç, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –¥–æ —Å—Ç–∞—Ä—Ç—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É. ü§ì

/// tip | –ü–æ—Ä–∞–¥–∞

SQLModel –º–∞—Ç–∏–º–µ —É—Ç–∏–ª—ñ—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ–π, —è–∫—ñ –æ–±–≥–æ—Ä—Ç–∞—é—Ç—å Alembic, –∞–ª–µ –Ω–∞—Ä–∞–∑—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ø—Ä—è–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ <a href="https://alembic.sqlalchemy.org/en/latest/" class="external-link" target="_blank">Alembic</a>.

///

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Hero { #create-a-hero }

–û—Å–∫—ñ–ª—å–∫–∏ –∫–æ–∂–Ω–∞ –º–æ–¥–µ–ª—å SQLModel —Ç–∞–∫–æ–∂ —î –º–æ–¥–µ–ª–ª—é Pydantic, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—ó –≤ —Ç–∏—Ö —Å–∞–º–∏—Ö **–∞–Ω–æ—Ç–∞—Ü—ñ—è—Ö —Ç–∏–ø—ñ–≤**, —â–æ –π –º–æ–¥–µ–ª—ñ Pydantic.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∏ –æ–≥–æ–ª–æ—Å–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–∏–ø—É `Hero`, –≤—ñ–Ω –±—É–¥–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–∏–π –∑ **—Ç—ñ–ª–∞ JSON**.

–¢–∞–∫ —Å–∞–º–æ –≤–∏ –º–æ–∂–µ—Ç–µ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ –π–æ–≥–æ —è–∫ **—Ç–∏–ø –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è** —Ñ—É–Ω–∫—Ü—ñ—ó, —ñ —Ç–æ–¥—ñ —Ñ–æ—Ä–º–∞ –¥–∞–Ω–∏—Ö –∑‚Äô—è–≤–∏—Ç—å—Å—è –≤ UI –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó API.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[40:45] hl[40:45] *}

–¢—É—Ç –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å `SessionDep` (—Ü–µ `Session`), —â–æ–± –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–æ–≥–æ `Hero` –¥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ `Session`, –∑–∞–∫–æ–º—ñ—Ç–∏—Ç–∏ –∑–º—ñ–Ω–∏ –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö, –æ–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ –≤ `hero`, –∞ –ø–æ—Ç—ñ–º –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –π–æ–≥–æ.

### –ß–∏—Ç–∞–Ω–Ω—è Heroes { #read-heroes }

–ú–∏ –º–æ–∂–µ–º–æ **—á–∏—Ç–∞—Ç–∏** `Hero` –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `select()`. –ú–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ `limit` —ñ `offset`, —â–æ–± —Ä–æ–±–∏—Ç–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[48:55] hl[51:52,54] *}

### –ß–∏—Ç–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ Hero { #read-one-hero }

–ú–∏ –º–æ–∂–µ–º–æ **–ø—Ä–æ—á–∏—Ç–∞—Ç–∏** –æ–¥–Ω–æ–≥–æ `Hero`.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[58:63] hl[60] *}

### –í–∏–¥–∞–ª–µ–Ω–Ω—è Hero { #delete-a-hero }

–ú–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ–º–æ **–≤–∏–¥–∞–ª–∏—Ç–∏** `Hero`.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[66:73] hl[71] *}

### –ó–∞–ø—É—Å–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É { #run-the-app }

–í–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫:

<div class="termy">

```console
$ fastapi dev main.py

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

–ü–æ—Ç—ñ–º –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ UI `/docs` ‚Äî –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ, —â–æ **FastAPI** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ü—ñ **–º–æ–¥–µ–ª—ñ**, —â–æ–± **–¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏** API, –∞ —Ç–∞–∫–æ–∂ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ —ó—Ö –¥–ª—è **—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó** —Ç–∞ **–≤–∞–ª—ñ–¥–∞—Ü—ñ—ó** –¥–∞–Ω–∏—Ö.

<div class="screenshot">
<img src="/img/tutorial/sql-databases/image01.png">
</div>

## –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –∑ –∫—ñ–ª—å–∫–æ–º–∞ –º–æ–¥–µ–ª—è–º–∏ { #update-the-app-with-multiple-models }

–¢–µ–ø–µ—Ä —Ç—Ä–æ—Ö–∏ **—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–º–æ** —Ü–µ–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫, —â–æ–± –ø—ñ–¥–≤–∏—â–∏—Ç–∏ **–±–µ–∑–ø–µ–∫—É** —Ç–∞ **–≥–Ω—É—á–∫—ñ—Å—Ç—å**.

–Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–µ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫, –≤ UI –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏, —â–æ –¥–æ—Å—ñ –≤—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î –∫–ª—ñ—î–Ω—Ç—É –≤–∏—Ä—ñ—à—É–≤–∞—Ç–∏, —è–∫–∏–π `id` –º–∞—Ç–∏ `Hero`, —â–æ —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è. üò±

–ù–µ –≤–∞—Ä—Ç–æ —Ü—å–æ–≥–æ –¥–æ–∑–≤–æ–ª—è—Ç–∏ ‚Äî –∫–ª—ñ—î–Ω—Ç –º—ñ–≥ –±–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ `id`, —è–∫–∏–π –º–∏ –≤–∂–µ –º–∞—î–º–æ –≤ –ë–î. –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è `id` –º–∞—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—è **–±–µ–∫–µ–Ω–¥–æ–º** –∞–±–æ **–±–∞–∑–æ—é –¥–∞–Ω–∏—Ö**, **–∞ –Ω–µ –∫–ª—ñ—î–Ω—Ç–æ–º**.

–î–æ–¥–∞—Ç–∫–æ–≤–æ –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –¥–ª—è –≥–µ—Ä–æ—è `secret_name`, –∞–ª–µ –¥–æ—Å—ñ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –π–æ–≥–æ –≤—Å—é–¥–∏ ‚Äî —Ü–µ –Ω–µ –¥—É–∂–µ **—Å–µ–∫—Ä–µ—Ç–Ω–æ**... üòÖ

–ú–∏ –≤–∏–ø—Ä–∞–≤–∏–º–æ —Ü–µ, –¥–æ–¥–∞–≤—à–∏ –∫—ñ–ª—å–∫–∞ **–¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –º–æ–¥–µ–ª–µ–π**. –°–∞–º–µ —Ç—É—Ç SQLModel –ø—Ä–æ—è–≤–∏—Ç—å —Å–µ–±–µ –Ω–∞–π–∫—Ä–∞—â–µ. ‚ú®

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –º–æ–¥–µ–ª–µ–π { #create-multiple-models }

–£ **SQLModel** –±—É–¥—å-—è–∫–∏–π –∫–ª–∞—Å –º–æ–¥–µ–ª—ñ –∑ `table=True` —î **—Ç–∞–±–ª–∏—á–Ω–æ—é –º–æ–¥–µ–ª–ª—é**.

–ê –±—É–¥—å-—è–∫–∏–π –∫–ª–∞—Å –º–æ–¥–µ–ª—ñ –±–µ–∑ `table=True` —î **–º–æ–¥–µ–ª–ª—é –¥–∞–Ω–∏—Ö** ‚Äî —Ü–µ —Ñ–∞–∫—Ç–∏—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –º–æ–¥–µ–ª—ñ Pydantic (–∑ –∫—ñ–ª—å–∫–æ–º–∞ –Ω–µ–≤–µ–ª–∏–∫–∏–º–∏ –¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –º–æ–∂–ª–∏–≤–æ—Å—Ç—è–º–∏). ü§ì

–ó SQLModel –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **–Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è**, —â–æ–± **—É–Ω–∏–∫–Ω—É—Ç–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—è** –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤ —É –≤—Å—ñ—Ö –≤–∏–ø–∞–¥–∫–∞—Ö.

#### `HeroBase` ‚Äî –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å { #herobase-the-base-class }

–ü–æ—á–Ω–µ–º–æ –∑ –º–æ–¥–µ–ª—ñ `HeroBase`, —è–∫–∞ –º–∞—î –≤—Å—ñ **–ø–æ–ª—è, —Å–ø—ñ–ª—å–Ω—ñ** –¥–ª—è –≤—Å—ñ—Ö –º–æ–¥–µ–ª–µ–π:

* `name`
* `age`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:9] hl[7:9] *}

#### `Hero` ‚Äî *—Ç–∞–±–ª–∏—á–Ω–∞ –º–æ–¥–µ–ª—å* { #hero-the-table-model }

–î–∞–ª—ñ —Å—Ç–≤–æ—Ä–∏–º–æ `Hero` ‚Äî –≤–ª–∞—Å–Ω–µ *—Ç–∞–±–ª–∏—á–Ω—É –º–æ–¥–µ–ª—å* ‚Äî –∑ **–¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏**, —è–∫–∏—Ö –Ω–µ –∑–∞–≤–∂–¥–∏ –±—É–¥–µ –≤ —ñ–Ω—à–∏—Ö –º–æ–¥–µ–ª—è—Ö:

* `id`
* `secret_name`

–û—Å–∫—ñ–ª—å–∫–∏ `Hero` –Ω–∞—Å–ª—ñ–¥—É—î `HeroBase`, –≤—ñ–Ω **—Ç–∞–∫–æ–∂** –º–∞—î **–ø–æ–ª—è**, –æ–≥–æ–ª–æ—à–µ–Ω—ñ –≤ `HeroBase`. –û—Ç–∂–µ, –≤—Å—ñ –ø–æ–ª—è –¥–ª—è `Hero`:

* `id`
* `name`
* `age`
* `secret_name`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:14] hl[12:14] *}

#### `HeroPublic` ‚Äî –ø—É–±–ª—ñ—á–Ω–∞ *–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö* { #heropublic-the-public-data-model }

–î–∞–ª—ñ —Å—Ç–≤–æ—Ä–∏–º–æ –º–æ–¥–µ–ª—å `HeroPublic` ‚Äî —Å–∞–º–µ –≤–æ–Ω–∞ –±—É–¥–µ **–ø–æ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è** –∫–ª—ñ—î–Ω—Ç–∞–º API.

–í–æ–Ω–∞ –º–∞—î —Ç—ñ —Å–∞–º—ñ –ø–æ–ª—è, —â–æ –π `HeroBase`, —Ç–æ–∂ –Ω–µ –≤–∫–ª—é—á–∞—Ç–∏–º–µ `secret_name`.

–ù–∞—Ä–µ—à—Ç—ñ, —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ—Å—Ç—å –Ω–∞—à–∏—Ö –≥–µ—Ä–æ—ó–≤ –∑–∞—Ö–∏—â–µ–Ω–æ! ü•∑

–í–æ–Ω–∞ —Ç–∞–∫–æ–∂ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–≥–æ–ª–æ—à—É—î `id: int`. –¢–∞–∫ –º–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ **–∫–æ–Ω—Ç—Ä–∞–∫—Ç** —ñ–∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏ API, —â–æ–± –≤–æ–Ω–∏ –∑–∞–≤–∂–¥–∏ –æ—á—ñ–∫—É–≤–∞–ª–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å `id` —ñ —Ç–µ, —â–æ —Ü–µ `int` (–≤—ñ–Ω –Ω—ñ–∫–æ–ª–∏ –Ω–µ –±—É–¥–µ `None`).

/// tip | –ü–æ—Ä–∞–¥–∞

–ù–∞—è–≤–Ω—ñ—Å—Ç—å –º–æ–¥–µ–ª—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ, —è–∫–∞ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–≤–∂–¥–∏ –¥–æ—Å—Ç—É–ø–Ω–µ —ñ –∑–∞–≤–∂–¥–∏ `int` (–∞ –Ω–µ `None`), –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–∞ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ API: –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –ø–∏—Å–∞—Ç–∏ –∑–Ω–∞—á–Ω–æ –ø—Ä–æ—Å—Ç—ñ—à–∏–π –∫–æ–¥, –º–∞—é—á–∏ —Ü—é –ø–µ–≤–Ω—ñ—Å—Ç—å.

–¢–∞–∫–æ–∂ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∏** –º–∞—Ç–∏–º—É—Ç—å –ø—Ä–æ—Å—Ç—ñ—à—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏, —Ç–æ–∂ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º, —è–∫—ñ –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å —ñ–∑ –≤–∞—à–∏–º API, –±—É–¥–µ –Ω–∞–±–∞–≥–∞—Ç–æ –∑—Ä—É—á–Ω—ñ—à–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –Ω–∏–º. üòé

///

–£—Å—ñ –ø–æ–ª—è –≤ `HeroPublic` —Ç–∞–∫—ñ —Å–∞–º—ñ, —è–∫ —É `HeroBase`, –∞–ª–µ `id` –æ–≥–æ–ª–æ—à–µ–Ω–æ —è–∫ `int` (–Ω–µ `None`):

* `id`
* `name`
* `age`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:18] hl[17:18] *}

#### `HeroCreate` ‚Äî *–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö* –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è hero { #herocreate-the-data-model-to-create-a-hero }

–¢–µ–ø–µ—Ä —Å—Ç–≤–æ—Ä–∏–º–æ –º–æ–¥–µ–ª—å `HeroCreate` ‚Äî –≤–æ–Ω–∞ **–≤–∞–ª—ñ–¥—É–≤–∞—Ç–∏–º–µ** –¥–∞–Ω—ñ –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç—ñ–≤.

–í–æ–Ω–∞ –º–∞—î —Ç—ñ —Å–∞–º—ñ –ø–æ–ª—è, —â–æ –π `HeroBase`, –∞ —Ç–∞–∫–æ–∂ `secret_name`.

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –∫–ª—ñ—î–Ω—Ç–∏ **—Å—Ç–≤–æ—Ä—é—é—Ç—å –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è**, –≤–æ–Ω–∏ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏–º—É—Ç—å `secret_name`. –í—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, –∞–ª–µ —Ü—ñ —Å–µ–∫—Ä–µ—Ç–Ω—ñ —ñ–º–µ–Ω–∞ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏–º—É—Ç—å—Å—è –∫–ª—ñ—î–Ω—Ç–∞–º —á–µ—Ä–µ–∑ API.

/// tip | –ü–æ—Ä–∞–¥–∞

–¢–∞–∫ –≤–∏ –æ–±—Ä–æ–±–ª—è–ª–∏ –± **–ø–∞—Ä–æ–ª—ñ**: –æ—Ç—Ä–∏–º—É–π—Ç–µ —ó—Ö, –∞–ª–µ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞–π—Ç–µ —á–µ—Ä–µ–∑ API.

–¢–∞–∫–æ–∂ –≤–∞—Ä—Ç–æ **—Ö–µ—à—É–≤–∞—Ç–∏** –∑–Ω–∞—á–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º ‚Äî **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ —ó—Ö —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ**.

///

–ü–æ–ª—è `HeroCreate`:

* `name`
* `age`
* `secret_name`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:22] hl[21:22] *}

#### `HeroUpdate` ‚Äî *–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö* –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è hero { #heroupdate-the-data-model-to-update-a-hero }

–£ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É —É –Ω–∞—Å –Ω–µ –±—É–ª–æ —Å–ø–æ—Å–æ–±—É **–æ–Ω–æ–≤–∏—Ç–∏ hero**, –∞–ª–µ —Ç–µ–ø–µ—Ä —ñ–∑ **–∫—ñ–ª—å–∫–æ–º–∞ –º–æ–¥–µ–ª—è–º–∏** –º–∏ –º–æ–∂–µ–º–æ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏. üéâ

*–ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö* `HeroUpdate` –¥–µ—â–æ –æ—Å–æ–±–ª–∏–≤–∞: –≤–æ–Ω–∞ –º–∞—î **—Ç—ñ —Å–∞–º—ñ –ø–æ–ª—è**, —è–∫—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è, –∞–ª–µ –≤—Å—ñ –ø–æ–ª—è **–Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤—ñ** (—É—Å—ñ –º–∞—é—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º). –¢–∞–∫, –ø—ñ–¥ —á–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥–µ—Ä–æ—è –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–¥—Å–∏–ª–∞—Ç–∏ –ª–∏—à–µ —Ç—ñ –ø–æ–ª—è, —è–∫—ñ —Ö–æ—á–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏.

–û—Å–∫—ñ–ª—å–∫–∏ –≤—Å—ñ **–ø–æ–ª—è —Ñ–∞–∫—Ç–∏—á–Ω–æ –∑–º—ñ–Ω—é—é—Ç—å—Å—è** (—Ç–∏–ø —Ç–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î `None`, —ñ —Ç–µ–ø–µ—Ä –≤–æ–Ω–∏ –º–∞—é—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `None`), –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —ó—Ö **–ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–≥–æ–ª–æ—Å–∏—Ç–∏**.

–ù–∞—Å–ø—Ä–∞–≤–¥—ñ –Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ –Ω–∞—Å–ª—ñ–¥—É–≤–∞—Ç–∏—Å—è –≤—ñ–¥ `HeroBase`, –±–æ –º–∏ –≤—Å–µ –æ–¥–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ–≥–æ–ª–æ—à—É—î–º–æ –≤—Å—ñ –ø–æ–ª—è. –Ø –∑–∞–ª–∏—à—É –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è –¥–ª—è —É–∑–≥–æ–¥–∂–µ–Ω–æ—Å—Ç—ñ, –∞–ª–µ —Ü–µ –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ. –¶–µ —Ä–∞–¥—à–µ –ø–∏—Ç–∞–Ω–Ω—è –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ —Å–º–∞–∫—É. ü§∑

–ü–æ–ª—è `HeroUpdate`:

* `name`
* `age`
* `secret_name`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:28] hl[25:28] *}

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑ `HeroCreate` —ñ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è `HeroPublic` { #create-with-herocreate-and-return-a-heropublic }

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ —É –Ω–∞—Å —î **–∫—ñ–ª—å–∫–∞ –º–æ–¥–µ–ª–µ–π**, –º–∏ –º–æ–∂–µ–º–æ –æ–Ω–æ–≤–∏—Ç–∏ —á–∞—Å—Ç–∏–Ω–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —è–∫—ñ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å.

–£ –∑–∞–ø–∏—Ç—ñ –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ *–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö* `HeroCreate` —ñ –Ω–∞ —ó—ó –æ—Å–Ω–æ–≤—ñ —Å—Ç–≤–æ—Ä—é—î–º–æ *—Ç–∞–±–ª–∏—á–Ω—É –º–æ–¥–µ–ª—å* `Hero`.

–¶—è –Ω–æ–≤–∞ *—Ç–∞–±–ª–∏—á–Ω–∞ –º–æ–¥–µ–ª—å* `Hero` –º–∞—Ç–∏–º–µ –ø–æ–ª—è, –Ω–∞–¥—ñ—Å–ª–∞–Ω—ñ –∫–ª—ñ—î–Ω—Ç–æ–º, –∞ —Ç–∞–∫–æ–∂ `id`, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–ü–æ—Ç—ñ–º –º–∏ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ç—É —Å–∞–º—É *—Ç–∞–±–ª–∏—á–Ω—É –º–æ–¥–µ–ª—å* `Hero` –∑ —Ñ—É–Ω–∫—Ü—ñ—ó —è–∫ —î. –ê–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –º–∏ –æ–≥–æ–ª–æ—à—É—î–º–æ `response_model` —è–∫ *–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö* `HeroPublic`, **FastAPI** –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î `HeroPublic`, —â–æ–± –≤–∞–ª—ñ–¥—É–≤–∞—Ç–∏ –π —Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ.

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[56:62] hl[56:58] *}

/// tip | –ü–æ—Ä–∞–¥–∞

–¢–µ–ø–µ—Ä –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `response_model=HeroPublic` –∑–∞–º—ñ—Å—Ç—å **–∞–Ω–æ—Ç–∞—Ü—ñ—ó —Ç–∏–ø—É –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è** `-> HeroPublic`, –±–æ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ –º–∏ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ, –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ *–Ω–µ —î* `HeroPublic`.

–Ø–∫–±–∏ –º–∏ –æ–≥–æ–ª–æ—Å–∏–ª–∏ `-> HeroPublic`, –≤–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä —ñ linter —Å–∫–∞—Ä–∂–∏–ª–∏—Å—è –± (—ñ —Ü—ñ–ª–∫–æ–º —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ), —â–æ –≤–∏ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç–µ `Hero` –∑–∞–º—ñ—Å—Ç—å `HeroPublic`.

–û–≥–æ–ª–æ—à—É—é—á–∏ —Ü–µ –≤ `response_model`, –º–∏ –∫–∞–∂–µ–º–æ **FastAPI** —Ä–æ–±–∏—Ç–∏ —Å–≤–æ—é —Ä–æ–±–æ—Ç—É, –Ω–µ –≤—Ç—Ä—É—á–∞—é—á–∏—Å—å –≤ –∞–Ω–æ—Ç–∞—Ü—ñ—ó —Ç–∏–ø—ñ–≤ —ñ –Ω–µ –∑–∞–≤–∞–∂–∞—é—á–∏ –ø—ñ–¥–∫–∞–∑–∫–∞–º –≤—ñ–¥ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Ç–∞ —ñ–Ω—à–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤.

///

### –ß–∏—Ç–∞–Ω–Ω—è Heroes –∑ `HeroPublic` { #read-heroes-with-heropublic }

–ú–∏ –º–æ–∂–µ–º–æ –∑—Ä–æ–±–∏—Ç–∏ —Ç–∞–∫ —Å–∞–º–æ, —è–∫ —ñ —Ä–∞–Ω—ñ—à–µ, —â–æ–± **—á–∏—Ç–∞—Ç–∏** `Hero`, –∞–ª–µ –∑–Ω–æ–≤—É –∂ —Ç–∞–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ `response_model=list[HeroPublic]`, —â–æ–± –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ç–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–∞–Ω–∏—Ö.

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[65:72] hl[65] *}

### –ß–∏—Ç–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ Hero –∑ `HeroPublic` { #read-one-hero-with-heropublic }

–ú–∏ –º–æ–∂–µ–º–æ **–ø—Ä–æ—á–∏—Ç–∞—Ç–∏** –æ–¥–Ω–æ–≥–æ –≥–µ—Ä–æ—è:

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[75:80] hl[77] *}

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è Hero –∑ `HeroUpdate` { #update-a-hero-with-heroupdate }

–ú–∏ –º–æ–∂–µ–º–æ **–æ–Ω–æ–≤–∏—Ç–∏ –≥–µ—Ä–æ—è**. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ HTTP-–æ–ø–µ—Ä–∞—Ü—ñ—é `PATCH`.

–ê –≤ –∫–æ–¥—ñ –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ `dict` –∑ —É—Å—ñ–º–∞ –¥–∞–Ω–∏–º–∏, –Ω–∞–¥—ñ—Å–ª–∞–Ω–∏–º–∏ –∫–ª—ñ—î–Ω—Ç–æ–º, ‚Äî **–ª–∏—à–µ –∑ –¥–∞–Ω–∏–º–∏, –Ω–∞–¥—ñ—Å–ª–∞–Ω–∏–º–∏ –∫–ª—ñ—î–Ω—Ç–æ–º**, –±–µ–∑ –∑–Ω–∞—á–µ–Ω—å, —è–∫—ñ –±—É–ª–∏ –± –ø—Ä–∏—Å—É—Ç–Ω—ñ –ª–∏—à–µ —á–µ—Ä–µ–∑ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `exclude_unset=True`. –¶–µ –≥–æ–ª–æ–≤–Ω–∏–π —Ç—Ä—é–∫. ü™Ñ

–ü–æ—Ç—ñ–º –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `hero_db.sqlmodel_update(hero_data)`, —â–æ–± –æ–Ω–æ–≤–∏—Ç–∏ `hero_db` –¥–∞–Ω–∏–º–∏ –∑ `hero_data`.

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[83:93] hl[83:84,88:89] *}

### –ü–æ–≤—Ç–æ—Ä–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è Hero { #delete-a-hero-again }

**–í–∏–¥–∞–ª–µ–Ω–Ω—è** –≥–µ—Ä–æ—è –ª–∏—à–∞—î—Ç—å—Å—è –º–∞–π–∂–µ —Ç–∞–∫–∏–º —Å–∞–º–∏–º.

–ú–∏ –Ω–µ –∑–∞–¥–æ–≤–æ–ª—å–Ω—è—Ç–∏–º–µ–º–æ –±–∞–∂–∞–Ω–Ω—è –≤—ñ–¥—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç–∏ –≤—Å–µ –≤ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ. üòÖ

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[96:103] hl[101] *}

### –ü–æ–≤—Ç–æ—Ä–Ω–∏–π –∑–∞–ø—É—Å–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É { #run-the-app-again }

–í–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∑–Ω–æ–≤—É:

<div class="termy">

```console
$ fastapi dev main.py

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

–Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–π–¥–µ—Ç–µ –¥–æ UI API `/docs`, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ, —â–æ —Ç–µ–ø–µ—Ä —É—Å–µ –æ–Ω–æ–≤–ª–µ–Ω–æ, —ñ –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥–µ—Ä–æ—è –±—ñ–ª—å—à–µ –Ω–µ –æ—á—ñ–∫—É–≤–∞—Ç–∏–º–µ—Ç—å—Å—è, —â–æ –∫–ª—ñ—î–Ω—Ç –Ω–∞–¥—ñ—à–ª–µ `id`, —Ç–æ—â–æ.

<div class="screenshot">
<img src="/img/tutorial/sql-databases/image02.png">
</div>

## –ü—ñ–¥—Å—É–º–æ–∫ { #recap }

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ <a href="https://sqlmodel.tiangolo.com/" class="external-link" target="_blank">**SQLModel**</a>, —â–æ–± –≤–∑–∞—î–º–æ–¥—ñ—è—Ç–∏ –∑ SQL –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö —ñ —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ –∫–æ–¥ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é *–º–æ–¥–µ–ª–µ–π –¥–∞–Ω–∏—Ö* —Ç–∞ *—Ç–∞–±–ª–∏—á–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π*.

–í–∏ –º–æ–∂–µ—Ç–µ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –∑–Ω–∞—á–Ω–æ –±—ñ–ª—å—à–µ –≤ **–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó SQLModel** ‚Äî —Ç–∞–º —î –¥–æ–≤—à–∏–π –º—ñ–Ω—ñ-<a href="https://sqlmodel.tiangolo.com/tutorial/fastapi/" class="external-link" target="_blank">—Ç—É—Ç–æ—Ä—ñ–∞–ª –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è SQLModel —ñ–∑ **FastAPI**</a>. üöÄ

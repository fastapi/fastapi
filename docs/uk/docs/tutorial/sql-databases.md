# SQL (—Ä–µ–ª—è—Ü—ñ–π–Ω—ñ) –±–∞–∑–∏ –¥–∞–Ω–∏—Ö { #sql-relational-databases }

**FastAPI** –Ω–µ –≤–∏–º–∞–≥–∞—î –≤—ñ–¥ –≤–∞—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ SQL (—Ä–µ–ª—è—Ü—ñ–π–Ω—É) –±–∞–∑—É –¥–∞–Ω–∏—Ö. –ê–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è –±—É–¥—å-—è–∫–æ—é –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö, —è–∫—É –∑–∞–±–∞–∂–∞—î—Ç–µ.

–¢—É—Ç –º–∏ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –ø—Ä–∏–∫–ª–∞–¥ –∑ <a href="https://sqlmodel.tiangolo.com/" class="external-link" target="_blank">SQLModel</a>.

**SQLModel** –ø–æ–±—É–¥–æ–≤–∞–Ω–æ –ø–æ–≤–µ—Ä—Ö <a href="https://www.sqlalchemy.org/" class="external-link" target="_blank">SQLAlchemy</a> —Ç–∞ Pydantic. –á—ó —Å—Ç–≤–æ—Ä–∏–≤ —Ç–æ–π —Å–∞–º–∏–π –∞–≤—Ç–æ—Ä, —â–æ —ñ **FastAPI**, —è–∫ —ñ–¥–µ–∞–ª—å–Ω—É –ø–∞—Ä—É –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ FastAPI, —è–∫–∏–º –ø–æ—Ç—Ä—ñ–±–Ω—ñ **SQL –±–∞–∑–∏ –¥–∞–Ω–∏—Ö**.

/// tip | –ü–æ—Ä–∞–¥–∞

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É —ñ–Ω—à—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –¥–ª—è SQL –∞–±–æ NoSQL –±–∞–∑ (—ñ–Ω–∫–æ–ª–∏ —ó—Ö –Ω–∞–∑–∏–≤–∞—é—Ç—å <abbr title="Object Relational Mapper - –û–±'—î–∫—Ç–Ω–æ-—Ä–µ–ª—è—Ü—ñ–π–Ω–∏–π –≤—ñ–¥–æ–±—Ä–∞–∂—É–≤–∞—á: —Å–∫–ª–∞–¥–Ω–∏–π —Ç–µ—Ä–º—ñ–Ω –¥–ª—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, –¥–µ –¥–µ—è–∫—ñ –∫–ª–∞—Å–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å —Ç–∞–±–ª–∏—Ü—ñ SQL, –∞ –µ–∫–∑–µ–º–ø–ª—è—Ä–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç—å —Ä—è–¥–∫–∏ –≤ —Ü–∏—Ö —Ç–∞–±–ª–∏—Ü—è—Ö">"ORMs"</abbr>), FastAPI –Ω—ñ—á–æ–≥–æ –Ω–µ –Ω–∞–≤‚Äô—è–∑—É—î. üòé

///

–û—Å–∫—ñ–ª—å–∫–∏ SQLModel –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ SQLAlchemy, –≤–∏ –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫—É –±–∞–∑—É –¥–∞–Ω–∏—Ö, —è–∫—É –ø—ñ–¥—Ç—Ä–∏–º—É—î SQLAlchemy (–∞ –æ—Ç–∂–µ –π SQLModel), –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

* PostgreSQL
* MySQL
* SQLite
* Oracle
* Microsoft SQL Server —Ç–æ—â–æ

–£ —Ü—å–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ **SQLite**, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∞ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ, –∞ Python –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É. –¢–æ–∂ –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ü–µ–π –ø—Ä–∏–∫–ª–∞–¥ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ ¬´—è–∫ —î¬ª.

–ü—ñ–∑–Ω—ñ—à–µ, –¥–ª—è –≤–∞—à–æ–≥–æ –ø—Ä–æ–¥–∞–∫—à–Ω-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ **PostgreSQL**.

/// tip | –ü–æ—Ä–∞–¥–∞

–Ü—Å–Ω—É—î –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ—î–∫—Ç—É –∑ **FastAPI** —Ç–∞ **PostgreSQL**, –≤–∫–ª—é—á–Ω–æ –∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º —Ç–∞ —ñ–Ω—à–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏: <a href="https://github.com/fastapi/full-stack-fastapi-template" class="external-link" target="_blank">https://github.com/fastapi/full-stack-fastapi-template</a>

///

–¶–µ –¥—É–∂–µ –ø—Ä–æ—Å—Ç–∏–π —ñ –∫–æ—Ä–æ—Ç–∫–∏–π –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫. –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –≤–∏–≤—á–∏—Ç–∏ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö –∑–∞–≥–∞–ª–æ–º, SQL –∞–±–æ –±—ñ–ª—å—à –ø—Ä–æ—Å—É–Ω—É—Ç—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ, –∑–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ <a href="https://sqlmodel.tiangolo.com/" class="external-link" target="_blank">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó SQLModel</a>.

## –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å `SQLModel` { #install-sqlmodel }

–°–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ [–≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ –æ—Ç–æ—á–µ–Ω–Ω—è](../virtual-environments.md){.internal-link target=_blank}, –∞–∫—Ç–∏–≤—É–≤–∞–ª–∏ –π–æ–≥–æ —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ `sqlmodel`:

<div class="termy">

```console
$ pip install sqlmodel
---> 100%
```

</div>

## –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∑ –æ–¥–Ω—ñ—î—é –º–æ–¥–µ–ª–ª—é { #create-the-app-with-a-single-model }

–°–ø–µ—Ä—à—É —Å—Ç–≤–æ—Ä–∏–º–æ –Ω–∞–π–ø—Ä–æ—Å—Ç—ñ—à—É –≤–µ—Ä—Å—ñ—é –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –∑ –æ–¥–Ω—ñ—î—é –º–æ–¥–µ–ª–ª—é **SQLModel**.

–ü–æ—Ç—ñ–º –Ω–∏–∂—á–µ –ø–æ–∫—Ä–∞—â–∏–º–æ –±–µ–∑–ø–µ–∫—É —ñ –≥–Ω—É—á–∫—ñ—Å—Ç—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫—ñ–ª—å–∫–æ—Ö –º–æ–¥–µ–ª–µ–π. ü§ì

### –°—Ç–≤–æ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—ñ { #create-models }

–Ü–º–ø–æ—Ä—Ç—É–π—Ç–µ `SQLModel` —ñ —Å—Ç–≤–æ—Ä—ñ—Ç—å –º–æ–¥–µ–ª—å –±–∞–∑–∏ –¥–∞–Ω–∏—Ö:

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[1:11] hl[7:11] *}

–ö–ª–∞—Å `Hero` –¥—É–∂–µ —Å—Ö–æ–∂–∏–π –Ω–∞ –º–æ–¥–µ–ª—å Pydantic (—Ñ–∞–∫—Ç–∏—á–Ω–æ, –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º —Ü–µ —ñ —î –º–æ–¥–µ–ª—å Pydantic).

–Ñ –∫—ñ–ª—å–∫–∞ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç–µ–π:

* `table=True` –∫–∞–∂–µ SQLModel, —â–æ —Ü–µ ¬´—Ç–∞–±–ª–∏—á–Ω–∞ –º–æ–¥–µ–ª—å¬ª - –≤–æ–Ω–∞ –º–∞—î –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç–∏ **—Ç–∞–±–ª–∏—Ü—é** –≤ SQL –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ ¬´–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö¬ª (—è–∫ –±—É–¥—å-—è–∫–∏–π —ñ–Ω—à–∏–π –∑–≤–∏—á–∞–π–Ω–∏–π –∫–ª–∞—Å Pydantic).

* `Field(primary_key=True)` –∫–∞–∂–µ SQLModel, —â–æ `id` - —Ü–µ **–ø–µ—Ä–≤–∏–Ω–Ω–∏–π –∫–ª—é—á** —É SQL –±–∞–∑—ñ –¥–∞–Ω–∏—Ö (–±—ñ–ª—å—à–µ –ø—Ä–æ –ø–µ—Ä–≤–∏–Ω–Ω—ñ –∫–ª—é—á—ñ –≤ SQL –¥–∏–≤. —É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó SQLModel).

    –ü—Ä–∏–º—ñ—Ç–∫–∞: –ú–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `int | None` –¥–ª—è –ø–æ–ª—è –ø–µ—Ä–≤–∏–Ω–Ω–æ–≥–æ –∫–ª—é—á–∞, —â–æ–± —É Python-–∫–æ–¥—ñ –º–æ–∂–Ω–∞ –±—É–ª–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±‚Äô—î–∫—Ç –±–µ–∑ `id` (`id=None`), –ø—Ä–∏–ø—É—Å–∫–∞—é—á–∏, —â–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –∑–≥–µ–Ω–µ—Ä—É—î –π–æ–≥–æ –ø—ñ–¥ —á–∞—Å –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è. SQLModel —Ä–æ–∑—É–º—ñ—î, —â–æ `id` –Ω–∞–¥–∞—Å—Ç—å –±–∞–∑–∞ –¥–∞–Ω–∏—Ö, —ñ –≤–∏–∑–Ω–∞—á–∞—î —Å—Ç–æ–≤–ø–µ—Ü—å —è–∫ –Ω–µ–Ω—É–ª—å–æ–≤–∏–π `INTEGER` —É —Å—Ö–µ–º—ñ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö. –î–æ–∫–ª–∞–¥–Ω—ñ—à–µ –¥–∏–≤. <a href="https://sqlmodel.tiangolo.com/tutorial/create-db-and-table/#primary-key-id" class="external-link" target="_blank">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é SQLModel –ø—Ä–æ –ø–µ—Ä–≤–∏–Ω–Ω—ñ –∫–ª—é—á—ñ</a>.

* `Field(index=True)` –∫–∞–∂–µ SQLModel —Å—Ç–≤–æ—Ä–∏—Ç–∏ **SQL-—ñ–Ω–¥–µ–∫—Å** –¥–ª—è —Ü—å–æ–≥–æ —Å—Ç–æ–≤–ø—Ü—è, —â–æ –¥–æ–∑–≤–æ–ª–∏—Ç—å —à–≤–∏–¥—à–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –ø–æ—à—É–∫ —É –±–∞–∑—ñ –¥–∞–Ω–∏—Ö –ø—ñ–¥ —á–∞—Å —á–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö, –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –∑–∞ —Ü–∏–º —Å—Ç–æ–≤–ø—Ü–µ–º.

    SQLModel –∑–Ω–∞—Ç–∏–º–µ, —â–æ –æ–≥–æ–ª–æ—à–µ–Ω–µ —è–∫ `str` —Å—Ç–∞–Ω–µ SQL-—Å—Ç–æ–≤–ø—Ü–µ–º —Ç–∏–ø—É `TEXT` (–∞–±–æ `VARCHAR`, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –±–∞–∑–∏).

### –°—Ç–≤–æ—Ä—ñ—Ç—å —Ä—É—à—ñ–π { #create-an-engine }

`engine` SQLModel (–ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º —Ü–µ `engine` SQLAlchemy) - —Ü–µ —Ç–µ, —â–æ **—É—Ç—Ä–∏–º—É—î –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è** –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–£ –≤–∞—Å –º–∞—î –±—É—Ç–∏ **—î–¥–∏–Ω–∏–π –æ–±‚Äô—î–∫—Ç `engine`** –¥–ª—è –≤—Å—å–æ–≥–æ –∫–æ–¥—É, —â–æ –ø—ñ–¥‚Äô—î–¥–Ω—É—î—Ç—å—Å—è –¥–æ —Ç—ñ—î—ó —Å–∞–º–æ—ó –±–∞–∑–∏.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[14:18] hl[14:15,17:18] *}

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `check_same_thread=False` –¥–æ–∑–≤–æ–ª—è—î FastAPI –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç—É —Å–∞–º—É –±–∞–∑—É SQLite —É —Ä—ñ–∑–Ω–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö. –¶–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ, –∞–¥–∂–µ **–æ–¥–∏–Ω –∑–∞–ø–∏—Ç** –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **–ø–æ–Ω–∞–¥ –æ–¥–∏–Ω –ø–æ—Ç—ñ–∫** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è—Ö).

–ù–µ –ø–µ—Ä–µ–π–º–∞–π—Ç–µ—Å—è, –∑–∞–≤–¥—è–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ –∫–æ–¥—É –º–∏ –¥–∞–ª—ñ –∑–∞–±–µ–∑–ø–µ—á–∏–º–æ **–æ–¥–Ω—É —Å–µ—Å—ñ—é SQLModel –Ω–∞ –∑–∞–ø–∏—Ç**, –≤–ª–∞—Å–Ω–µ —Ü—å–æ–≥–æ —ñ –ø—Ä–∞–≥–Ω–µ `check_same_thread`.

### –°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—ñ { #create-the-tables }

–î–æ–¥–∞–º–æ —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `SQLModel.metadata.create_all(engine)`, —â–æ–± **—Å—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—ñ** –¥–ª—è –≤—Å—ñ—Ö ¬´—Ç–∞–±–ª–∏—á–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π¬ª.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[21:22] hl[21:22] *}

### –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —Å–µ—Å—ñ—ó { #create-a-session-dependency }

**`Session`** –∑–±–µ—Ä—ñ–≥–∞—î **–æ–±‚Äô—î–∫—Ç–∏ –≤ –ø–∞–º‚Äô—è—Ç—ñ** —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂—É—î –∑–º—ñ–Ω–∏ —É –¥–∞–Ω–∏—Ö, –∞ –ø–æ—Ç—ñ–º **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `engine`** –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–ú–∏ —Å—Ç–≤–æ—Ä–∏–º–æ **–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å** FastAPI –∑ `yield`, —è–∫–∞ –Ω–∞–¥–∞–≤–∞—Ç–∏–º–µ –Ω–æ–≤—É `Session` –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É. –¶–µ –π –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ–¥–Ω—É —Å–µ—Å—ñ—é –Ω–∞ –∑–∞–ø–∏—Ç. ü§ì

–î–∞–ª—ñ —Å—Ç–≤–æ—Ä–∏–º–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å `Annotated` - `SessionDep`, —â–æ–± —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ —Ä–µ—à—Ç—É –∫–æ–¥—É, —è–∫–∏–π —ó—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[25:30]  hl[25:27,30] *}

### –°—Ç–≤–æ—Ä—é–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ñ –ø—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É { #create-database-tables-on-startup }

–ú–∏ —Å—Ç–≤–æ—Ä–∏–º–æ —Ç–∞–±–ª–∏—Ü—ñ –±–∞–∑–∏ –ø—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[32:37] hl[35:37] *}

–¢—É—Ç –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ —Ç–∞–±–ª–∏—Ü—ñ –Ω–∞ –ø–æ–¥—ñ—ó –∑–∞–ø—É—Å–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É.

–£ –ø—Ä–æ–¥–∞–∫—à–Ω—ñ –≤–∏, –π–º–æ–≤—ñ—Ä–Ω–æ, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ–π–Ω–∏–π —Å–∫—Ä–∏–ø—Ç, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É. ü§ì

/// tip | –ü–æ—Ä–∞–¥–∞

SQLModel –º–∞—Ç–∏–º–µ —É—Ç–∏–ª—ñ—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ–π-–æ–±–≥–æ—Ä—Ç–∫–∏ –Ω–∞–¥ Alembic, –∞–ª–µ –ø–æ–∫–∏ —â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ <a href="https://alembic.sqlalchemy.org/en/latest/" class="external-link" target="_blank">Alembic</a> –Ω–∞–ø—Ä—è–º—É.

///

### –°—Ç–≤–æ—Ä—ñ—Ç—å –≥–µ—Ä–æ—è { #create-a-hero }

–û—Å–∫—ñ–ª—å–∫–∏ –∫–æ–∂–Ω–∞ –º–æ–¥–µ–ª—å SQLModel —Ç–∞–∫–æ–∂ —î –º–æ–¥–µ–ª–ª—é Pydantic, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ó—ó –≤ —Ç–∏—Ö —Å–∞–º–∏—Ö **–∞–Ω–æ—Ç–∞—Ü—ñ—è—Ö —Ç–∏–ø—ñ–≤**, —â–æ —ñ –º–æ–¥–µ–ª—ñ Pydantic.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∏ –æ–≥–æ–ª–æ—Å–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–∏–ø—É `Hero`, –≤—ñ–Ω –±—É–¥–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–∏–π –∑ **JSON-—Ç—ñ–ª–∞**.

–¢–∞–∫ —Å–∞–º–æ –≤–∏ –º–æ–∂–µ—Ç–µ –æ–≥–æ–ª–æ—Å–∏—Ç–∏ —ó—ó —è–∫ **—Ç–∏–ø, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è** —Ñ—É–Ω–∫—Ü—ñ—ó, —ñ —Ñ–æ—Ä–º–∞ –¥–∞–Ω–∏—Ö –∑‚Äô—è–≤–∏—Ç—å—Å—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ–º—É UI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó API.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[40:45] hl[40:45] *}

–¢—É—Ç –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å `SessionDep` (`Session`), —â–æ–± –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤–æ–≥–æ `Hero` –¥–æ –µ–∫–∑–µ–º–ø–ª—è—Ä–∞ `Session`, –∑–∞–∫–æ–º—ñ—Ç–∏—Ç–∏ –∑–º—ñ–Ω–∏ –¥–æ –±–∞–∑–∏, –æ–Ω–æ–≤–∏—Ç–∏ –¥–∞–Ω—ñ –≤ `hero`, –∞ –ø–æ—Ç—ñ–º –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –π–æ–≥–æ.

### –ß–∏—Ç–∞–Ω–Ω—è –≥–µ—Ä–æ—ó–≤ { #read-heroes }

–ú–∏ –º–æ–∂–µ–º–æ **—á–∏—Ç–∞—Ç–∏** `Hero` –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ `select()`. –ú–∏ –º–æ–∂–µ–º–æ –¥–æ–¥–∞—Ç–∏ `limit` —ñ `offset` –¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[48:55] hl[51:52,54] *}

### –ß–∏—Ç–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –≥–µ—Ä–æ—è { #read-one-hero }

–ú–∏ –º–æ–∂–µ–º–æ **–ø—Ä–æ—á–∏—Ç–∞—Ç–∏** –æ–¥–Ω–æ–≥–æ `Hero`.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[58:63] hl[60] *}

### –í–∏–¥–∞–ª–µ–Ω–Ω—è –≥–µ—Ä–æ—è { #delete-a-hero }

–ú–∏ —Ç–∞–∫–æ–∂ –º–æ–∂–µ–º–æ **–≤–∏–¥–∞–ª–∏—Ç–∏** `Hero`.

{* ../../docs_src/sql_databases/tutorial001_an_py310.py ln[66:73] hl[71] *}

### –ó–∞–ø—É—Å–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É { #run-the-app }

–í–∏ –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫:

<div class="termy">

```console
$ fastapi dev main.py

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

–ü–æ—Ç—ñ–º –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É `/docs`, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ, —â–æ **FastAPI** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ü—ñ **–º–æ–¥–µ–ª—ñ** –¥–ª—è **–¥–æ–∫—É–º–µ–Ω—Ç—É–≤–∞–Ω–Ω—è** API, –∞ —Ç–∞–∫–æ–∂ –¥–ª—è **—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó** —Ç–∞ **–≤–∞–ª—ñ–¥–∞—Ü—ñ—ó** –¥–∞–Ω–∏—Ö.

<div class="screenshot">
<img src="/img/tutorial/sql-databases/image01.png">
</div>

## –û–Ω–æ–≤—ñ—Ç—å –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ–º–∞ –º–æ–¥–µ–ª—è–º–∏ { #update-the-app-with-multiple-models }

–¢–µ–ø–µ—Ä —Ç—Ä–æ—Ö–∏ **–≤—ñ–¥—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–º–æ** –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫, —â–æ–± –ø—ñ–¥–≤–∏—â–∏—Ç–∏ **–±–µ–∑–ø–µ–∫—É** —Ç–∞ **–≥–Ω—É—á–∫—ñ—Å—Ç—å**.

–Ø–∫—â–æ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–∞—Ä—ñ–∞–Ω—Ç, —É UI –≤–∏–¥–Ω–æ, —â–æ –Ω–∞—Ä–∞–∑—ñ –∫–ª—ñ—î–Ω—Ç –º–æ–∂–µ —Å–∞–º –æ–±–∏—Ä–∞—Ç–∏ `id` –¥–ª—è —Å—Ç–≤–æ—Ä—é–≤–∞–Ω–æ–≥–æ `Hero`. üò±

–¶—å–æ–≥–æ –¥–æ–ø—É—Å–∫–∞—Ç–∏ –Ω–µ –º–æ–∂–Ω–∞ - –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç–∏ `id`, —è–∫–∏–π —É–∂–µ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π —É –ë–î. –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è `id` –º–∞—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ **–±–µ–∫–µ–Ω–¥** –∞–±–æ **–±–∞–∑–∞ –¥–∞–Ω–∏—Ö**, **–∞ –Ω–µ –∫–ª—ñ—î–Ω—Ç**.

–ö—Ä—ñ–º —Ç–æ–≥–æ, –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ –¥–ª—è –≥–µ—Ä–æ—è `secret_name`, –∞–ª–µ –Ω–∞—Ä–∞–∑—ñ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –π–æ–≥–æ –≤—Å—é–¥–∏ - —Ü–µ –Ω–µ –¥—É–∂–µ ¬´—Å–µ–∫—Ä–µ—Ç–Ω–æ¬ª... üòÖ

–í–∏–ø—Ä–∞–≤–∏–º–æ —Ü–µ, –¥–æ–¥–∞–≤—à–∏ –∫—ñ–ª—å–∫–∞ **–¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –º–æ–¥–µ–ª–µ–π**. –û—Å—å –¥–µ SQLModel –∑–∞—Å—è—î. ‚ú®

### –°—Ç–≤–æ—Ä—ñ—Ç—å –∫—ñ–ª—å–∫–∞ –º–æ–¥–µ–ª–µ–π { #create-multiple-models }

–£ **SQLModel** –±—É–¥—å-—è–∫–∏–π –∫–ª–∞—Å –º–æ–¥–µ–ª—ñ –∑ `table=True` - —Ü–µ **—Ç–∞–±–ª–∏—á–Ω–∞ –º–æ–¥–µ–ª—å**.

–ê –±—É–¥—å-—è–∫–∏–π –∫–ª–∞—Å –º–æ–¥–µ–ª—ñ –±–µ–∑ `table=True` - —Ü–µ **–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö**; —Ü–µ, –ø–æ —Å—É—Ç—ñ, –ø—Ä–æ—Å—Ç–æ –º–æ–¥–µ–ª—ñ Pydantic (–∑ –ø–∞—Ä–æ—é –Ω–µ–≤–µ–ª–∏–∫–∏—Ö –¥–æ–ø–æ–≤–Ω–µ–Ω—å). ü§ì

–ó SQLModel –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ **—É—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—è**, —â–æ–± **—É–Ω–∏–∫–∞—Ç–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—è** –ø–æ–ª—ñ–≤ —É –≤—Å—ñ—Ö –≤–∏–ø–∞–¥–∫–∞—Ö.

#### `HeroBase` - –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å { #herobase-the-base-class }

–ü–æ—á–Ω—ñ–º–æ –∑ –º–æ–¥–µ–ª—ñ `HeroBase`, —è–∫–∞ –º—ñ—Å—Ç–∏—Ç—å —É—Å—ñ **—Å–ø—ñ–ª—å–Ω—ñ –ø–æ–ª—è** –¥–ª—è –≤—Å—ñ—Ö –º–æ–¥–µ–ª–µ–π:

* `name`
* `age`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:9] hl[7:9] *}

#### `Hero` - ¬´—Ç–∞–±–ª–∏—á–Ω–∞ –º–æ–¥–µ–ª—å¬ª { #hero-the-table-model }

–ü–æ—Ç—ñ–º —Å—Ç–≤–æ—Ä—ñ–º–æ `Hero`, —Ñ–∞–∫—Ç–∏—á–Ω—É ¬´—Ç–∞–±–ª–∏—á–Ω—É –º–æ–¥–µ–ª—å¬ª, –∑ **–¥–æ–¥–∞—Ç–∫–æ–≤–∏–º–∏ –ø–æ–ª—è–º–∏**, —è–∫–∏—Ö –Ω–µ–º–∞—î –≤ —ñ–Ω—à–∏—Ö –º–æ–¥–µ–ª—è—Ö –∑–∞–≤–∂–¥–∏:

* `id`
* `secret_name`

–û—Å–∫—ñ–ª—å–∫–∏ `Hero` —É—Å–ø–∞–¥–∫–æ–≤—É—î—Ç—å—Å—è –≤—ñ–¥ `HeroBase`, –≤–æ–Ω–∞ **—Ç–∞–∫–æ–∂** –º—ñ—Å—Ç–∏—Ç—å **–ø–æ–ª—è**, –æ–≥–æ–ª–æ—à–µ–Ω—ñ –≤ `HeroBase`, —Ç–æ–∂ —É—Å—ñ –ø–æ–ª—è `Hero` —Ç–∞–∫—ñ:

* `id`
* `name`
* `age`
* `secret_name`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:14] hl[12:14] *}

#### `HeroPublic` - –ø—É–±–ª—ñ—á–Ω–∞ ¬´–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö¬ª { #heropublic-the-public-data-model }

–î–∞–ª—ñ —Å—Ç–≤–æ—Ä–∏–º–æ –º–æ–¥–µ–ª—å `HeroPublic` - —Ü–µ —Ç–∞, —â–æ –±—É–¥–µ **–ø–æ–≤–µ—Ä—Ç–∞—Ç–∏—Å—è** –∫–ª—ñ—î–Ω—Ç–∞–º API.

–í–æ–Ω–∞ –º–∞—î —Ç—ñ —Å–∞–º—ñ –ø–æ–ª—è, —â–æ –π `HeroBase`, –æ—Ç–∂–µ –Ω–µ –≤–∫–ª—é—á–∞—Ç–∏–º–µ `secret_name`.

–ù–∞—Ä–µ—à—Ç—ñ, –æ—Å–æ–±–∏—Å—Ç–æ—Å—Ç—ñ –Ω–∞—à–∏—Ö –≥–µ—Ä–æ—ó–≤ –∑–∞—Ö–∏—â–µ–Ω–æ! ü•∑

–í–æ–Ω–∞ —Ç–∞–∫–æ–∂ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î `id: int`. –†–æ–±–ª—è—á–∏ —Ü–µ, –º–∏ —É–∫–ª–∞–¥–∞—î–º–æ **–∫–æ–Ω—Ç—Ä–∞–∫—Ç** –∑ –∫–ª—ñ—î–Ω—Ç–∞–º–∏ API, —â–æ `id` –∑–∞–≤–∂–¥–∏ –±—É–¥–µ –ø—Ä–∏—Å—É—Ç–Ω—ñ–π —ñ –±—É–¥–µ —Ç–∏–ø—É `int` (–Ω—ñ–∫–æ–ª–∏ –Ω–µ `None`).

/// tip | –ü–æ—Ä–∞–¥–∞

–ù–∞—è–≤–Ω—ñ—Å—Ç—å —É –º–æ–¥–µ–ª—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≥–∞—Ä–∞–Ω—Ç—ñ—ó, —â–æ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–≤–∂–¥–∏ –¥–æ—Å—Ç—É–ø–Ω–µ —ñ –∑–∞–≤–∂–¥–∏ `int` (–Ω–µ `None`), –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–∞ –¥–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ API - –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –ø–∏—Å–∞—Ç–∏ –∑–Ω–∞—á–Ω–æ –ø—Ä–æ—Å—Ç—ñ—à–∏–π –∫–æ–¥, –º–∞—é—á–∏ —Ü—é –≤–∏–∑–Ω–∞—á–µ–Ω—ñ—Å—Ç—å.

–¢–∞–∫–æ–∂ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –∫–ª—ñ—î–Ω—Ç–∏** –º–∞—Ç–∏–º—É—Ç—å –ø—Ä–æ—Å—Ç—ñ—à—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏, —Ç–æ–∂ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º, —è–∫—ñ –≤–∑–∞—î–º–æ–¥—ñ—é—Ç—å –∑ –≤–∞—à–∏–º API, –±—É–¥–µ –∑–Ω–∞—á–Ω–æ –∑—Ä—É—á–Ω—ñ—à–µ. üòé

///

–£—Å—ñ –ø–æ–ª—è –≤ `HeroPublic` —Ç–∞–∫—ñ —Å–∞–º—ñ, —è–∫ —É `HeroBase`, –∑ `id`, –æ–≥–æ–ª–æ—à–µ–Ω–∏–º —è–∫ `int` (–Ω–µ `None`):

* `id`
* `name`
* `age`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:18] hl[17:18] *}

#### `HeroCreate` - ¬´–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö¬ª –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥–µ—Ä–æ—è { #herocreate-the-data-model-to-create-a-hero }

–¢–µ–ø–µ—Ä —Å—Ç–≤–æ—Ä–∏–º–æ –º–æ–¥–µ–ª—å `HeroCreate` - –≤–æ–Ω–∞ **–≤–∞–ª—ñ–¥—É–≤–∞—Ç–∏–º–µ** –¥–∞–Ω—ñ, –æ—Ç—Ä–∏–º–∞–Ω—ñ –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç—ñ–≤.

–í–æ–Ω–∞ –º–∞—î —Ç—ñ –∂ –ø–æ–ª—è, —â–æ –π `HeroBase`, –∞ —Ç–∞–∫–æ–∂ `secret_name`.

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –∫–ª—ñ—î–Ω—Ç–∏ **—Å—Ç–≤–æ—Ä—é—é—Ç—å –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è**, –≤–æ–Ω–∏ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å `secret_name`, –≤—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö, –∞–ª–µ —Ü—ñ —Å–µ–∫—Ä–µ—Ç–Ω—ñ —ñ–º–µ–Ω–∞ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –∫–ª—ñ—î–Ω—Ç–∞–º —É API.

/// tip | –ü–æ—Ä–∞–¥–∞

–¢–∞–∫ —Å–ª—ñ–¥ –ø–æ–≤–æ–¥–∏—Ç–∏—Å—è –∑ **–ø–∞—Ä–æ–ª—è–º–∏**. –ü—Ä–∏–π–º–∞–π—Ç–µ —ó—Ö, –∞–ª–µ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞–π—Ç–µ –≤ API.

–¢–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ **—Ö–µ—à—É–≤–∞—Ç–∏** –∑–Ω–∞—á–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º, **–Ω—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ —ó—Ö —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ**.

///

–ü–æ–ª—è `HeroCreate`:

* `name`
* `age`
* `secret_name`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:22] hl[21:22] *}

#### `HeroUpdate` - ¬´–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö¬ª –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥–µ—Ä–æ—è { #heroupdate-the-data-model-to-update-a-hero }

–£ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –≤–µ—Ä—Å—ñ—ó —É –Ω–∞—Å –Ω–µ –±—É–ª–æ —Å–ø–æ—Å–æ–±—É **–æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –≥–µ—Ä–æ—è**, –∞–ª–µ —Ç–µ–ø–µ—Ä, –º–∞—é—á–∏ **–∫—ñ–ª—å–∫–∞ –º–æ–¥–µ–ª–µ–π**, –º–∏ –º–æ–∂–µ–º–æ —Ü–µ –∑—Ä–æ–±–∏—Ç–∏. üéâ

¬´–ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö¬ª `HeroUpdate` –¥–µ—â–æ –æ—Å–æ–±–ª–∏–≤–∞: –≤–æ–Ω–∞ –º–∞—î **–≤—Å—ñ —Ç—ñ —Å–∞–º—ñ –ø–æ–ª—è**, —â–æ –π –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –≥–µ—Ä–æ—è, –∞–ª–µ –≤—Å—ñ –ø–æ–ª—è **–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤—ñ** (—É—Å—ñ –º–∞—é—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º). –¢–∞–∫–∏–º —á–∏–Ω–æ–º, –ø—ñ–¥ —á–∞—Å –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≥–µ—Ä–æ—è –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ –ª–∏—à–µ —Ç—ñ –ø–æ–ª—è, —è–∫—ñ —Ö–æ—á–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏.

–û—Å–∫—ñ–ª—å–∫–∏ **–ø–æ–ª—è —Ñ–∞–∫—Ç–∏—á–Ω–æ –∑–º—ñ–Ω—é—é—Ç—å—Å—è** (—Ç–∏–ø —Ç–µ–ø–µ—Ä –≤–∫–ª—é—á–∞—î `None` —ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º - `None`), –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ **–æ–≥–æ–ª–æ—Å–∏—Ç–∏ —ó—Ö –∑–∞–Ω–æ–≤–æ**.

–ù–∞—Å–ø—Ä–∞–≤–¥—ñ –Ω–µ–º–∞—î –ø–æ—Ç—Ä–µ–±–∏ —É—Å–ø–∞–¥–∫–æ–≤—É–≤–∞—Ç–∏—Å—è –≤—ñ–¥ `HeroBase`, –±–æ –º–∏ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î–º–æ –≤—Å—ñ –ø–æ–ª—è. –Ø –∑–∞–ª–∏—à—É —É—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—è –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ, –∞–ª–µ —Ü–µ –Ω–µ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ. –¶–µ —Ä–∞–¥—à–µ –ø–∏—Ç–∞–Ω–Ω—è —Å–º–∞–∫—É. ü§∑

–ü–æ–ª—è `HeroUpdate`:

* `name`
* `age`
* `secret_name`

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[7:28] hl[25:28] *}

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑ `HeroCreate` —ñ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è `HeroPublic` { #create-with-herocreate-and-return-a-heropublic }

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –≤ –Ω–∞—Å **–∫—ñ–ª—å–∫–∞ –º–æ–¥–µ–ª–µ–π**, –º–∏ –º–æ–∂–µ–º–æ –æ–Ω–æ–≤–∏—Ç–∏ —á–∞—Å—Ç–∏–Ω–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —â–æ —ó—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å.

–£ –∑–∞–ø–∏—Ç—ñ –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ ¬´–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö¬ª `HeroCreate`, —ñ –∑ –Ω–µ—ó —Å—Ç–≤–æ—Ä—é—î–º–æ ¬´—Ç–∞–±–ª–∏—á–Ω—É –º–æ–¥–µ–ª—å¬ª `Hero`.

–¶—è –Ω–æ–≤–∞ ¬´—Ç–∞–±–ª–∏—á–Ω–∞ –º–æ–¥–µ–ª—å¬ª `Hero` –º—ñ—Å—Ç–∏—Ç–∏–º–µ –ø–æ–ª—è, –Ω–∞–¥—ñ—Å–ª–∞–Ω—ñ –∫–ª—ñ—î–Ω—Ç–æ–º, –∞ —Ç–∞–∫–æ–∂ –º–∞—Ç–∏–º–µ `id`, –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö.

–î–∞–ª—ñ –º–∏ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –∑ —Ñ—É–Ω–∫—Ü—ñ—ó —Ü—é –∂ ¬´—Ç–∞–±–ª–∏—á–Ω—É –º–æ–¥–µ–ª—å¬ª `Hero`. –ê–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –º–∏ –æ–≥–æ–ª–æ—à—É—î–º–æ `response_model` —è–∫ ¬´–º–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö¬ª `HeroPublic`, **FastAPI** –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î `HeroPublic` –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö.

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[56:62] hl[56:58] *}

/// tip | –ü–æ—Ä–∞–¥–∞

–¢–µ–ø–µ—Ä –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `response_model=HeroPublic` –∑–∞–º—ñ—Å—Ç—å **–∞–Ω–æ—Ç–∞—Ü—ñ—ó —Ç–∏–ø—É, —â–æ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è** `-> HeroPublic`, —Ç–æ–º—É —â–æ –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ –º–∏ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ, –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ - –Ω–µ `HeroPublic`.

–Ø–∫–±–∏ –º–∏ –æ–≥–æ–ª–æ—Å–∏–ª–∏ `-> HeroPublic`, –≤–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä —ñ –ª—ñ–Ω—Ç–µ—Ä —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ –∑–∞—É–≤–∞–∂–∏–ª–∏ –±, —â–æ –≤–∏ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç–µ `Hero`, –∞ –Ω–µ `HeroPublic`.

–û–≥–æ–ª–æ—à—É—é—á–∏ —Ü–µ –≤ `response_model`, –º–∏ –∫–∞–∂–µ–º–æ **FastAPI** –∑—Ä–æ–±–∏—Ç–∏ —Å–≤–æ—é —Å–ø—Ä–∞–≤—É, –Ω–µ –≤—Ç—Ä—É—á–∞—é—á–∏—Å—å –≤ –∞–Ω–æ—Ç–∞—Ü—ñ—ó —Ç–∏–ø—ñ–≤ —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–∏ –≤—ñ–¥ –≤–∞—à–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –π —ñ–Ω—à–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤.

///

### –ß–∏—Ç–∞–Ω–Ω—è –≥–µ—Ä–æ—ó–≤ –∑ `HeroPublic` { #read-heroes-with-heropublic }

–ú–æ–∂–µ–º–æ –∑—Ä–æ–±–∏—Ç–∏ —Ç–µ —Å–∞–º–µ, —â–æ –π —Ä–∞–Ω—ñ—à–µ, —â–æ–± **—á–∏—Ç–∞—Ç–∏** `Hero`, –∑–Ω–æ–≤—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `response_model=list[HeroPublic]`, —â–æ–± –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω—É –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —Ç–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–∞–Ω–∏—Ö.

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[65:72] hl[65] *}

### –ß–∏—Ç–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –≥–µ—Ä–æ—è –∑ `HeroPublic` { #read-one-hero-with-heropublic }

–ú–∏ –º–æ–∂–µ–º–æ **–ø—Ä–æ—á–∏—Ç–∞—Ç–∏** –æ–¥–Ω–æ–≥–æ –≥–µ—Ä–æ—è:

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[75:80] hl[77] *}

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥–µ—Ä–æ—è –∑ `HeroUpdate` { #update-a-hero-with-heroupdate }

–ú–∏ –º–æ–∂–µ–º–æ **–æ–Ω–æ–≤–∏—Ç–∏ –≥–µ—Ä–æ—è**. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ HTTP-–æ–ø–µ—Ä–∞—Ü—ñ—é `PATCH`.

–£ –∫–æ–¥—ñ –º–∏ –æ—Ç—Ä–∏–º—É—î–º–æ `dict` –∑ —É—Å—ñ–º–∞ –¥–∞–Ω–∏–º–∏, —è–∫—ñ –Ω–∞–¥—ñ—Å–ª–∞–≤ –∫–ª—ñ—î–Ω—Ç, - –ª–∏—à–µ –∑ —Ç–∏–º–∏ –¥–∞–Ω–∏–º–∏, —è–∫—ñ –Ω–∞–¥—ñ—Å–ª–∞–≤ –∫–ª—ñ—î–Ω—Ç, –≤–∏–∫–ª—é—á–∞—é—á–∏ –±—É–¥—å-—è–∫—ñ –∑–Ω–∞—á–µ–Ω–Ω—è, –ø—Ä–∏—Å—É—Ç–Ω—ñ –ª–∏—à–µ —è–∫ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `exclude_unset=True`. –¶–µ –≥–æ–ª–æ–≤–Ω–∏–π —Ç—Ä—é–∫. ü™Ñ

–ü–æ—Ç—ñ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `hero_db.sqlmodel_update(hero_data)`, —â–æ–± –æ–Ω–æ–≤–∏—Ç–∏ `hero_db` –¥–∞–Ω–∏–º–∏ –∑ `hero_data`.

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[83:93] hl[83:84,88:89] *}

### –ó–Ω–æ–≤—É –≤–∏–¥–∞–ª–µ–Ω–Ω—è –≥–µ—Ä–æ—è { #delete-a-hero-again }

**–í–∏–¥–∞–ª–µ–Ω–Ω—è** –≥–µ—Ä–æ—è –º–∞–π–∂–µ –Ω–µ –∑–º—ñ–Ω–∏–ª–æ—Å—è.

–ú–∏ –Ω–µ –∑–∞–¥–æ–≤–æ–ª—å–Ω–∏–º–æ –±–∞–∂–∞–Ω–Ω—è –≤—ñ–¥—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç–∏ –≤—Å–µ –≤ —Ü—å–æ–º—É –º—ñ—Å—Ü—ñ. üòÖ

{* ../../docs_src/sql_databases/tutorial002_an_py310.py ln[96:103] hl[101] *}

### –ó–Ω–æ–≤—É –∑–∞–ø—É—Å—Ç—ñ—Ç—å –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ { #run-the-app-again }

–í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–æ–≤—É –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫:

<div class="termy">

```console
$ fastapi dev main.py

<span style="color: green;">INFO</span>:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

</div>

–Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–π–¥–µ—Ç–µ –¥–æ UI `/docs`, –ø–æ–±–∞—á–∏—Ç–µ, —â–æ –≤—ñ–Ω –æ–Ω–æ–≤–∏–≤—Å—è —ñ –±—ñ–ª—å—à–µ –Ω–µ –æ—á—ñ–∫—É–≤–∞—Ç–∏–º–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ `id` –≤—ñ–¥ –∫–ª—ñ—î–Ω—Ç–∞ –ø—ñ–¥ —á–∞—Å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥–µ—Ä–æ—è —Ç–æ—â–æ.

<div class="screenshot">
<img src="/img/tutorial/sql-databases/image02.png">
</div>

## –ü—ñ–¥—Å—É–º–æ–∫ { #recap }

–í–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ <a href="https://sqlmodel.tiangolo.com/" class="external-link" target="_blank">**SQLModel**</a> –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ SQL –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö —ñ —Å–ø—Ä–æ—Å—Ç–∏—Ç–∏ –∫–æ–¥ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é ¬´–º–æ–¥–µ–ª–µ–π –¥–∞–Ω–∏—Ö¬ª —Ç–∞ ¬´—Ç–∞–±–ª–∏—á–Ω–∏—Ö –º–æ–¥–µ–ª–µ–π¬ª.

–ë–∞–≥–∞—Ç–æ —á–æ–≥–æ —â–µ –º–æ–∂–Ω–∞ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó **SQLModel**, —Ç–∞–º —î —Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π –º—ñ–Ω—ñ-<a href="https://sqlmodel.tiangolo.com/tutorial/fastapi/" class="external-link" target="_blank">–Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø–æ—Å—ñ–±–Ω–∏–∫ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è SQLModel –∑ **FastAPI**</a>. üöÄ

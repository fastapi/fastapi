# FastAPI —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö ‚Äî Docker { #fastapi-in-containers-docker }

–ü—ñ–¥ —á–∞—Å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ FastAPI –ø–æ—à–∏—Ä–µ–Ω–∏–º –ø—ñ–¥—Ö–æ–¥–æ–º —î –∑–±–∏—Ä–∞–Ω–Ω—è **–æ–±—Ä–∞–∑—É Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**. –ó–∞–∑–≤–∏—á–∞–π —Ü–µ —Ä–æ–±–ª—è—Ç—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é <a href="https://www.docker.com/" class="external-link" target="_blank">**Docker**</a>. –î–∞–ª—ñ –≤–∏ –º–æ–∂–µ—Ç–µ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ —Ü–µ–π –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ–¥–Ω–∏–º —ñ–∑ –∫—ñ–ª—å–∫–æ—Ö –º–æ–∂–ª–∏–≤–∏—Ö —Å–ø–æ—Å–æ–±—ñ–≤.

–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –º–∞—î –∫—ñ–ª—å–∫–∞ –ø–µ—Ä–µ–≤–∞–≥, –∑–æ–∫—Ä–µ–º–∞ **–±–µ–∑–ø–µ–∫—É**, **–≤—ñ–¥—Ç–≤–æ—Ä—é–≤–∞–Ω—ñ—Å—Ç—å**, **–ø—Ä–æ—Å—Ç–æ—Ç—É** —Ç–∞ —ñ–Ω—à—ñ.

/// tip | –ü–æ—Ä–∞–¥–∞

–ü–æ—Å–ø—ñ—à–∞—î—Ç–µ –π —É–∂–µ —Ü–µ –∑–Ω–∞—î—Ç–µ? –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ [`Dockerfile` –Ω–∏–∂—á–µ üëá](#build-a-docker-image-for-fastapi).

///

<details>
<summary>–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥ Dockerfile üëÄ</summary>

```Dockerfile
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

COPY ./app /code/app

CMD ["fastapi", "run", "app/main.py", "--port", "80"]

# If running behind a proxy like Nginx or Traefik add --proxy-headers
# CMD ["fastapi", "run", "app/main.py", "--port", "80", "--proxy-headers"]
```

</details>

## –©–æ —Ç–∞–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä { #what-is-a-container }

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ (–ø–µ—Ä–µ–≤–∞–∂–Ω–æ Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏) ‚Äî —Ü–µ –¥—É–∂–µ **–ª–µ–≥–∫–∏–π** —Å–ø–æ—Å—ñ–± –ø–∞–∫—É–≤–∞–Ω–Ω—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ —Ä–∞–∑–æ–º —ñ–∑ —É—Å—ñ–º–∞ —ó—Ö–Ω—ñ–º–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ —Ç–∞ –ø–æ—Ç—Ä—ñ–±–Ω–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏, –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –ø—Ä–∏ —Ü—å–æ–º—É —ñ–∑–æ–ª—è—Ü—ñ—é –≤—ñ–¥ —ñ–Ω—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ (—ñ–Ω—à–∏—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ –∞–±–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤) —É —Ç—ñ–π —Å–∞–º—ñ–π —Å–∏—Å—Ç–µ–º—ñ.

Linux-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ç–µ —Å–∞–º–µ Linux-—è–¥—Ä–æ, —â–æ –π —Ö–æ—Å—Ç (–º–∞—à–∏–Ω–∞, –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –º–∞—à–∏–Ω–∞, —Ö–º–∞—Ä–Ω–∏–π —Å–µ—Ä–≤–µ—Ä —Ç–æ—â–æ). –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤–æ–Ω–∏ –¥—É–∂–µ –ª–µ–≥–∫—ñ (–ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–º–∏ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∏–º–∏ –º–∞—à–∏–Ω–∞–º–∏, —è–∫—ñ –µ–º—É–ª—é—é—Ç—å —Ü—ñ–ª—É –æ–ø–µ—Ä–∞—Ü—ñ–π–Ω—É —Å–∏—Å—Ç–µ–º—É).

–£ —Ç–∞–∫–∏–π —Å–ø–æ—Å—ñ–± –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —Å–ø–æ–∂–∏–≤–∞—é—Ç—å **–º–∞–ª–æ —Ä–µ—Å—É—Ä—Å—ñ–≤** ‚Äî –ø—Ä–∏–±–ª–∏–∑–Ω–æ —è–∫ –ø—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É –ø—Ä–æ—Ü–µ—Å—ñ–≤ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ (–≤—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –º–∞—à–∏–Ω–∞ —Å–ø–æ–∂–∏–≤–∞–ª–∞ –± –∑–Ω–∞—á–Ω–æ –±—ñ–ª—å—à–µ).

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —Ç–∞–∫–æ–∂ –º–∞—é—Ç—å –≤–ª–∞—Å–Ω—ñ **—ñ–∑–æ–ª—å–æ–≤–∞–Ω—ñ** –ø—Ä–æ—Ü–µ—Å–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (–∑–∞–∑–≤–∏—á–∞–π –ª–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å), —Ñ–∞–π–ª–æ–≤—É —Å–∏—Å—Ç–µ–º—É —Ç–∞ –º–µ—Ä–µ–∂—É, —â–æ —Å–ø—Ä–æ—â—É—î —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è, –±–µ–∑–ø–µ–∫—É, —Ä–æ–∑—Ä–æ–±–∫—É —Ç–æ—â–æ.

## –©–æ —Ç–∞–∫–µ –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ { #what-is-a-container-image }

**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä** –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∑ **–æ–±—Ä–∞–∑—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**.

–û–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ ‚Äî —Ü–µ **—Å—Ç–∞—Ç–∏—á–Ω–∞** –≤–µ—Ä—Å—ñ—è –≤—Å—ñ—Ö —Ñ–∞–π–ª—ñ–≤, –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ç–∞ –∫–æ–º–∞–Ω–¥–∏/–ø—Ä–æ–≥—Ä–∞–º–∏ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —è–∫—ñ –º–∞—é—Ç—å –±—É—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ. **–°—Ç–∞—Ç–∏—á–Ω–∞** —Ç—É—Ç –æ–∑–Ω–∞—á–∞—î, —â–æ **–æ–±—Ä–∞–∑** –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π, –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è ‚Äî —Ü–µ –ª–∏—à–µ –∑–∞–ø–∞–∫–æ–≤–∞–Ω—ñ —Ñ–∞–π–ª–∏ —Ç–∞ –º–µ—Ç–∞–¥–∞–Ω—ñ.

–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ ¬´**–æ–±—Ä–∞–∑—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**¬ª, —è–∫–∏–π —î –∑–±–µ—Ä–µ–∂–µ–Ω–∏–º —Å—Ç–∞—Ç–∏—á–Ω–∏–º –≤–º—ñ—Å—Ç–æ–º, ¬´**–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**¬ª –∑–∞–∑–≤–∏—á–∞–π –æ–∑–Ω–∞—á–∞—î –∑–∞–ø—É—â–µ–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä ‚Äî —Ç–µ, —â–æ **–≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è**.

–ö–æ–ª–∏ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —Å—Ç–∞—Ä—Ç—É—î —ñ –ø—Ä–∞—Ü—é—î (–∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –∑ **–æ–±—Ä–∞–∑—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**), –≤—ñ–Ω –º–æ–∂–µ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏, –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ —Ç–æ—â–æ. –¶—ñ –∑–º—ñ–Ω–∏ —ñ—Å–Ω—É–≤–∞—Ç–∏–º—É—Ç—å –ª–∏—à–µ –≤ —Ü—å–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ, –∞–ª–µ –Ω–µ –∑–±–µ—Ä–µ–∂—É—Ç—å—Å—è –≤ –±–∞–∑–æ–≤–æ–º—É –æ–±—Ä–∞–∑—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–Ω–µ –±—É–¥—É—Ç—å –∑–∞–ø–∏—Å–∞–Ω—ñ –Ω–∞ –¥–∏—Å–∫).

–û–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–Ω–∞ –ø–æ—Ä—ñ–≤–Ω—è—Ç–∏ –∑ —Ñ–∞–π–ª–æ–º **–ø—Ä–æ–≥—Ä–∞–º–∏** —Ç–∞ —ó—ó –≤–º—ñ—Å—Ç–æ–º, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `python` —ñ –¥–µ—è–∫–∏–π —Ñ–∞–π–ª `main.py`.

–ê —Å–∞–º **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** (–Ω–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ **–æ–±—Ä–∞–∑—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**) ‚Äî —Ü–µ —Ñ–∞–∫—Ç–∏—á–Ω–∏–π –∑–∞–ø—É—â–µ–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä –æ–±—Ä–∞–∑—É, –ø–æ–¥—ñ–±–Ω–∏–π –¥–æ **–ø—Ä–æ—Ü–µ—Å—É**. –ù–∞—Å–ø—Ä–∞–≤–¥—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∞—Ü—é—î –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ –≤ –Ω—å–æ–º—É **–≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ø—Ä–æ—Ü–µ—Å** (—ñ –∑–∞–∑–≤–∏—á–∞–π —Ü–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å). –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è, –∫–æ–ª–∏ –≤ –Ω—å–æ–º—É –Ω–µ–º–∞—î –∑–∞–ø—É—â–µ–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É.

## –û–±—Ä–∞–∑–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ { #container-images }

Docker –±—É–≤ –æ–¥–Ω–∏–º –∑ –æ—Å–Ω–æ–≤–Ω–∏—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è **–æ–±—Ä–∞–∑–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤** —ñ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏**.

–¢–∞–∫–æ–∂ —ñ—Å–Ω—É—î –ø—É–±–ª—ñ—á–Ω–∏–π <a href="https://hub.docker.com/" class="external-link" target="_blank">Docker Hub</a> —ñ–∑ –∑–∞–∑–¥–∞–ª–µ–≥—ñ–¥—å –ø—ñ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–º–∏ **–æ—Ñ—ñ—Ü—ñ–π–Ω–∏–º–∏ –æ–±—Ä–∞–∑–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤** –¥–ª—è –±–∞–≥–∞—Ç—å–æ—Ö —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤, —Å–µ—Ä–µ–¥–æ–≤–∏—â, –±–∞–∑ –¥–∞–Ω–∏—Ö —ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —î –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π <a href="https://hub.docker.com/_/python" class="external-link" target="_blank">–æ–±—Ä–∞–∑ Python</a>.

–Ñ –π –±–∞–≥–∞—Ç–æ —ñ–Ω—à–∏—Ö –æ–±—Ä–∞–∑—ñ–≤ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ä–µ—á–µ–π, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ –¥–ª—è –±–∞–∑ –¥–∞–Ω–∏—Ö:

* <a href="https://hub.docker.com/_/postgres" class="external-link" target="_blank">PostgreSQL</a>
* <a href="https://hub.docker.com/_/mysql" class="external-link" target="_blank">MySQL</a>
* <a href="https://hub.docker.com/_/mongo" class="external-link" target="_blank">MongoDB</a>
* <a href="https://hub.docker.com/_/redis" class="external-link" target="_blank">Redis</a> —Ç–æ—â–æ.

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –≥–æ—Ç–æ–≤–∏–π –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –¥—É–∂–µ –ª–µ–≥–∫–æ **–ø–æ—î–¥–Ω—É–≤–∞—Ç–∏** –π –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –Ω–æ–≤—É –±–∞–∑—É –¥–∞–Ω–∏—Ö. –£ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ **–æ—Ñ—ñ—Ü—ñ–π–Ω—ñ –æ–±—Ä–∞–∑–∏** —ñ –ø—Ä–æ—Å—Ç–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —ó—Ö —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.

–¢–∞–∫ —É –±–∞–≥–∞—Ç—å–æ—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–≤—á–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –π Docker —Ç–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ —Ü—ñ –∑–Ω–∞–Ω–Ω—è –∑ –±–∞–≥–∞—Ç—å–º–∞ —Ä—ñ–∑–Ω–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏.

–û—Ç–∂–µ, –≤–∏ –∑–∞–ø—É—Å–∫–∞—Ç–∏–º–µ—Ç–µ **–∫—ñ–ª—å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤** –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Å–∫–ª–∞–¥–æ–≤–∏–º–∏ ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –±–∞–∑–æ—é –¥–∞–Ω–∏—Ö, Python-–∑–∞—Å—Ç–æ—Å—É–Ω–∫–æ–º, –≤–µ–±—Å–µ—Ä–≤–µ—Ä–æ–º —ñ–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ React ‚Äî —ñ –ø–æ—î–¥–Ω—É–≤–∞—Ç–∏–º–µ—Ç–µ —ó—Ö —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä—ñ—à–Ω—é –º–µ—Ä–µ–∂—É.

–£—Å—ñ —Å–∏—Å—Ç–µ–º–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (—è–∫-–æ—Ç Docker –∞–±–æ Kubernetes) –º–∞—é—Ç—å —Ü—ñ –º–µ—Ä–µ–∂–µ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≤–±—É–¥–æ–≤–∞–Ω–∏–º–∏.

## –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ —Ç–∞ –ø—Ä–æ—Ü–µ—Å–∏ { #containers-and-processes }

**–û–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –∑–∞–∑–≤–∏—á–∞–π –º—ñ—Å—Ç–∏—Ç—å —É –º–µ—Ç–∞–¥–∞–Ω–∏—Ö –ø—Ä–æ–≥—Ä–∞–º—É –∞–±–æ –∫–æ–º–∞–Ω–¥—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º, —è–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏, –∫–æ–ª–∏ —Å—Ç–∞—Ä—Ç—É—î **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, –∞ —Ç–∞–∫–æ–∂ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —è–∫—ñ —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ —Ü—ñ–π –ø—Ä–æ–≥—Ä–∞–º—ñ. –î—É–∂–µ —Å—Ö–æ–∂–µ –Ω–∞ —Ç–µ, —è–∫ —Ü–µ –≤–∏–≥–ª—è–¥–∞–ª–æ –± —É –∫–æ–º–∞–Ω–¥–Ω–æ–º—É —Ä—è–¥–∫—É.

–ö–æ–ª–∏ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è, –≤—ñ–Ω –≤–∏–∫–æ–Ω–∞—î —Ü—é –∫–æ–º–∞–Ω–¥—É/–ø—Ä–æ–≥—Ä–∞–º—É (—Ö–æ—á–∞ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∏—Ç–∏ —ó—ó —ñ –∑–º—É—Å–∏—Ç–∏ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —ñ–Ω—à—É –∫–æ–º–∞–Ω–¥—É/–ø—Ä–æ–≥—Ä–∞–º—É).

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–∞—Ü—é—î –¥–æ—Ç–∏, –¥–æ–∫–∏ –ø—Ä–∞—Ü—é—î **–≥–æ–ª–æ–≤–Ω–∏–π –ø—Ä–æ—Ü–µ—Å** (–∫–æ–º–∞–Ω–¥–∞ –∞–±–æ –ø—Ä–æ–≥—Ä–∞–º–∞).

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–∑–≤–∏—á–∞–π –º–∞—î **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å**, –∞–ª–µ —Ç–∞–∫–æ–∂ –º–æ–∂–ª–∏–≤–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ø—ñ–¥–ø—Ä–æ—Ü–µ—Å–∏ –∑ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É ‚Äî —ñ —Ç–æ–¥—ñ –≤ –æ–¥–Ω–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ –±—É–¥–µ **–∫—ñ–ª—å–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤**.

–ê–ª–µ –Ω–µ–º–æ–∂–ª–∏–≤–æ –º–∞—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑ **–ø—Ä–∏–Ω–∞–π–º–Ω—ñ –æ–¥–Ω–æ–≥–æ –∑–∞–ø—É—â–µ–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É**. –Ø–∫—â–æ –≥–æ–ª–æ–≤–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è.

## –ó—ñ–±—Ä–∞—Ç–∏ Docker-–æ–±—Ä–∞–∑ –¥–ª—è FastAPI { #build-a-docker-image-for-fastapi }

–ì–∞—Ä–∞–∑–¥, —Ç–µ–ø–µ—Ä –∑–±–µ—Ä—ñ–º–æ —â–æ—Å—å! üöÄ

–Ø –ø–æ–∫–∞–∂—É, —è–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **Docker-–æ–±—Ä–∞–∑** –¥–ª—è FastAPI **–∑ –Ω—É–ª—è**, –±–∞–∑—É—é—á–∏—Å—å –Ω–∞ **–æ—Ñ—ñ—Ü—ñ–π–Ω–æ–º—É –æ–±—Ä–∞–∑—ñ Python**.

–°–∞–º–µ —Ç–∞–∫ –≤–∏ –∑–∞—Ö–æ—á–µ—Ç–µ —Ä–æ–±–∏—Ç–∏ –≤ **–±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤**, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

* –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ **Kubernetes** –∞–±–æ –ø–æ–¥—ñ–±–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏;
* –ø—ñ–¥ —á–∞—Å –∑–∞–ø—É—Å–∫—É –Ω–∞ **Raspberry Pi**;
* –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ö–º–∞—Ä–Ω–∏–π —Å–µ—Ä–≤—ñ—Å, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—Ç–∏–º–µ –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–∞ –≤–∞—Å, —Ç–æ—â–æ.

### –í–∏–º–æ–≥–∏ –¥–æ –ø–∞–∫–µ—Ç—ñ–≤ { #package-requirements }

–ó–∞–∑–≤–∏—á–∞–π –≤–∏ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ—Ç–µ **–≤–∏–º–æ–≥–∏ –¥–æ –ø–∞–∫–µ—Ç—ñ–≤** –≤–∞—à–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –≤ —è–∫–æ–º—É—Å—å —Ñ–∞–π–ª—ñ.

–¶–µ –∑–¥–µ–±—ñ–ª—å—à–æ–≥–æ –∑–∞–ª–µ–∂–∞—Ç–∏–º–µ –≤—ñ–¥ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞, —è–∫–∏–π –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ, —â–æ–± **–≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏** —Ü—ñ –≤–∏–º–æ–≥–∏.

–ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–± ‚Äî —Ñ–∞–π–ª `requirements.txt` –∑ –Ω–∞–∑–≤–∞–º–∏ –ø–∞–∫–µ—Ç—ñ–≤ —ñ —ó—Ö–Ω—ñ–º–∏ –≤–µ—Ä—Å—ñ—è–º–∏, –ø–æ –æ–¥–Ω–æ–º—É –≤ —Ä—è–¥–∫—É.

–ó–≤—ñ—Å–Ω–æ, –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î—Ç–µ —Ç—ñ —Å–∞–º—ñ —ñ–¥–µ—ó, –ø—Ä–æ —è–∫—ñ —á–∏—Ç–∞–ª–∏ –≤ [–ü—Ä–æ –≤–µ—Ä—Å—ñ—ó FastAPI](versions.md){.internal-link target=_blank}, —â–æ–± –∑–∞–¥–∞–≤–∞—Ç–∏ –¥—ñ–∞–ø–∞–∑–æ–Ω–∏ –≤–µ—Ä—Å—ñ–π.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∞—à `requirements.txt` –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:

```
fastapi[standard]>=0.113.0,<0.114.0
pydantic>=2.7.0,<3.0.0
```

–ó–∞–∑–≤–∏—á–∞–π –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏–º–µ—Ç–µ —Ü—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø–∞–∫–µ—Ç—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `pip`, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥:

<div class="termy">

```console
$ pip install -r requirements.txt
---> 100%
Successfully installed fastapi pydantic
```

</div>

/// info | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–Ü—Å–Ω—É—é—Ç—å —ñ–Ω—à—ñ —Ñ–æ—Ä–º–∞—Ç–∏ –π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –ø–∞–∫–µ—Ç—ñ–≤.

///

### –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–¥ **FastAPI** { #create-the-fastapi-code }

* –°—Ç–≤–æ—Ä—ñ—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `app` —ñ –ø–µ—Ä–µ–π–¥—ñ—Ç—å —É –Ω–µ—ó.
* –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–æ—Ä–æ–∂–Ω—ñ–π —Ñ–∞–π–ª `__init__.py`.
* –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `main.py` —ñ–∑ —Ç–∞–∫–∏–º –≤–º—ñ—Å—Ç–æ–º:

```Python
from typing import Union

from fastapi import FastAPI

app = FastAPI()


@app.get("/")
def read_root():
    return {"Hello": "World"}


@app.get("/items/{item_id}")
def read_item(item_id: int, q: Union[str, None] = None):
    return {"item_id": item_id, "q": q}
```

### Dockerfile { #dockerfile }

–¢–µ–ø–µ—Ä —É —Ç—ñ–π —Å–∞–º—ñ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –ø—Ä–æ—î–∫—Ç—É —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `Dockerfile` –∑ —Ç–∞–∫–∏–º –≤–º—ñ—Å—Ç–æ–º:

```{ .dockerfile .annotate }
# (1)!
FROM python:3.9

# (2)!
WORKDIR /code

# (3)!
COPY ./requirements.txt /code/requirements.txt

# (4)!
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (5)!
COPY ./app /code/app

# (6)!
CMD ["fastapi", "run", "app/main.py", "--port", "80"]
```

1. –ü–æ—á–Ω—ñ—Ç—å –∑ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –æ–±—Ä–∞–∑—É Python.

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ø–æ—Ç–æ—á–Ω—É —Ä–æ–±–æ—á—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –Ω–∞ `/code`.

    –°–∞–º–µ —Ç—É—Ç –º–∏ —Ä–æ–∑–º—ñ—Å—Ç–∏–º–æ —Ñ–∞–π–ª `requirements.txt` —ñ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `app`.

3. –°–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª –∑ –≤–∏–º–æ–≥–∞–º–∏ –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `/code`.

    –°–ø–æ—á–∞—Ç–∫—É –∫–æ–ø—ñ—é–π—Ç–µ **–ª–∏—à–µ** —Ñ–∞–π–ª —ñ–∑ –≤–∏–º–æ–≥–∞–º–∏, –∞ –Ω–µ —Ä–µ—à—Ç—É –∫–æ–¥—É.

    –û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ–π —Ñ–∞–π–ª **–Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è —á–∞—Å—Ç–æ**, Docker –≤–∏—è–≤–∏—Ç—å —Ü–µ –π –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î **–∫–µ—à** –¥–ª—è —Ü—å–æ–≥–æ –∫—Ä–æ–∫—É, —â–æ —Ç–∞–∫–æ–∂ —É–≤—ñ–º–∫–Ω–µ –∫–µ—à –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∫—Ä–æ–∫—É.

4. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø–∞–∫–µ—Ç—ñ–≤ —ñ–∑ —Ñ–∞–π–ª—É –≤–∏–º–æ–≥.

    –û–ø—Ü—ñ—è `--no-cache-dir` –≤–∫–∞–∑—É—î `pip` –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—ñ –ø–∞–∫–µ—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ, –æ—Å–∫—ñ–ª—å–∫–∏ —Ü–µ –º–∞—î —Å–µ–Ω—Å –ª–∏—à–µ —Ç–æ–¥—ñ, –∫–æ–ª–∏ `pip` –ø–ª–∞–Ω—É—é—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∑–Ω–æ–≤—É –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∏—Ö —Å–∞–º–∏—Ö –ø–∞–∫–µ—Ç—ñ–≤ ‚Äî –∞–ª–µ –ø—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —Ü–µ –Ω–µ —Ç–∞–∫.

    /// note | –ü—Ä–∏–º—ñ—Ç–∫–∞

    `--no-cache-dir` —Å—Ç–æ—Å—É—î—Ç—å—Å—è –ª–∏—à–µ `pip` —ñ –Ω–µ –º–∞—î –∂–æ–¥–Ω–æ–≥–æ –≤—ñ–¥–Ω–æ—à–µ–Ω–Ω—è –¥–æ Docker –∞–±–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤.

    ///

    –û–ø—Ü—ñ—è `--upgrade` –≤–∫–∞–∑—É—î `pip` –æ–Ω–æ–≤–∏—Ç–∏ –ø–∞–∫–µ—Ç–∏, —è–∫—â–æ –≤–æ–Ω–∏ –≤–∂–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ.

    –û—Å–∫—ñ–ª—å–∫–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∫—Ä–æ–∫ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É –º–æ–∂–µ –±—É—Ç–∏ —Ä–æ–∑–ø—ñ–∑–Ω–∞–Ω–∏–π **Docker cache**, —Ü–µ–π –∫—Ä–æ–∫ —Ç–∞–∫–æ–∂ **–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î Docker cache**, –∫–æ–ª–∏ –≤—ñ–Ω –¥–æ—Å—Ç—É–ø–Ω–∏–π.

    –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–µ—à—É –Ω–∞ —Ü—å–æ–º—É –∫—Ä–æ—Ü—ñ **–∑–∞–æ—â–∞–¥–∏—Ç—å** –≤–∞–º –±–∞–≥–∞—Ç–æ **—á–∞—Å—É** –ø—ñ–¥ —á–∞—Å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–±–∏—Ä–∞–Ω–Ω—è –æ–±—Ä–∞–∑—É –∑–Ω–æ–≤—É —ñ –∑–Ω–æ–≤—É –≤ –ø—Ä–æ—Ü–µ—Å—ñ —Ä–æ–∑—Ä–æ–±–∫–∏ ‚Äî –∑–∞–º—ñ—Å—Ç—å **–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è** –≤—Å—ñ—Ö –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π **–∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É**.

5. –°–∫–æ–ø—ñ—é–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `./app` –≤—Å–µ—Ä–µ–¥–∏–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `/code`.

    –û—Å–∫—ñ–ª—å–∫–∏ —Ç—É—Ç –º—ñ—Å—Ç–∏—Ç—å—Å—è –≤–µ—Å—å –∫–æ–¥, —è–∫–∏–π **–∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞–π—á–∞—Å—Ç—ñ—à–µ**, **Docker cache** –¥–ª—è —Ü—å–æ–≥–æ –∞–±–æ –±—É–¥—å-—è–∫–∏—Ö **–Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∫—Ä–æ–∫—ñ–≤** –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ—Ç—å—Å—è –ª–µ–≥–∫–æ.

    –¢–æ–º—É –≤–∞–∂–ª–∏–≤–æ —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–∏ —Ü–µ **–±–ª–∏–∂—á–µ –¥–æ –∫—ñ–Ω—Ü—è** `Dockerfile`, —â–æ–± –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —á–∞—Å –∑–±–∏—Ä–∞–Ω–Ω—è –æ–±—Ä–∞–∑—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

6. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å **–∫–æ–º–∞–Ω–¥—É** –∑–∞–ø—É—Å–∫—É `fastapi run`, —è–∫–∞ –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Uvicorn.

    `CMD` –ø—Ä–∏–π–º–∞—î —Å–ø–∏—Å–æ–∫ —Ä—è–¥–∫—ñ–≤; –∫–æ–∂–µ–Ω —Ä—è–¥–æ–∫ ‚Äî —Ü–µ —Ç–µ, —â–æ –≤–∏ –≤–≤–µ–ª–∏ –± —É –∫–æ–º–∞–Ω–¥–Ω–æ–º—É —Ä—è–¥–∫—É, —Ä–æ–∑–¥—ñ–ª—è—é—á–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–∏ –ø—Ä–æ–±—ñ–ª–∞–º–∏.

    –¶—è –∫–æ–º–∞–Ω–¥–∞ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∞ –∑ **–ø–æ—Ç–æ—á–Ω–æ—ó —Ä–æ–±–æ—á–æ—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó** ‚Äî —Ç—ñ—î—ó —Å–∞–º–æ—ó `/code`, —è–∫—É –≤–∏ –≤—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≤–∏—â–µ —á–µ—Ä–µ–∑ `WORKDIR /code`.

/// tip | –ü–æ—Ä–∞–¥–∞

–ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ, —â–æ —Ä–æ–±–∏—Ç—å –∫–æ–∂–µ–Ω —Ä—è–¥–æ–∫, –Ω–∞—Ç–∏—Å–∫–∞—é—á–∏ –Ω–∞ –∫–æ–∂–Ω—É –±—É–ª—å–±–∞—à–∫—É –∑ –Ω–æ–º–µ—Ä–æ–º —É –∫–æ–¥—ñ. üëÜ

///

/// warning | –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ **–∑–∞–≤–∂–¥–∏** –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ **exec form** —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó `CMD`, —è–∫ –ø–æ—è—Å–Ω–µ–Ω–æ –Ω–∏–∂—á–µ.

///

#### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `CMD` ‚Äî exec form { #use-cmd-exec-form }

Docker-—ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é <a href="https://docs.docker.com/reference/dockerfile/#cmd" class="external-link" target="_blank">`CMD`</a> –º–æ–∂–Ω–∞ –∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ —É –¥–≤–æ—Ö —Ñ–æ—Ä–º–∞—Ö:

‚úÖ **Exec** form:

```Dockerfile
# ‚úÖ Do this
CMD ["fastapi", "run", "app/main.py", "--port", "80"]
```

‚õîÔ∏è **Shell** form:

```Dockerfile
# ‚õîÔ∏è Don't do this
CMD fastapi run app/main.py --port 80
```

–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ **exec** form, —â–æ–± –≥–∞—Ä–∞–Ω—Ç—É–≤–∞—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ FastAPI —Ç–∞ –∑–∞–ø—É—Å–∫ [lifespan events](../advanced/events.md){.internal-link target=_blank}.

–î–µ—Ç–∞–ª—å–Ω—ñ—à–µ —á–∏—Ç–∞–π—Ç–µ –≤ <a href="https://docs.docker.com/reference/dockerfile/#shell-and-exec-form" class="external-link" target="_blank">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó Docker –ø—Ä–æ shell —ñ exec form</a>.

–¶–µ –º–æ–∂–µ –±—É—Ç–∏ –æ—Å–æ–±–ª–∏–≤–æ –ø–æ–º—ñ—Ç–Ω–æ –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `docker compose`. –î–∏–≤—ñ—Ç—å—Å—è —Ü–µ–π —Ä–æ–∑–¥—ñ–ª FAQ Docker Compose –∑ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–º–∏ –¥–µ—Ç–∞–ª—è–º–∏: <a href="https://docs.docker.com/compose/faq/#why-do-my-services-take-10-seconds-to-recreate-or-stop" class="external-link" target="_blank">Why do my services take 10 seconds to recreate or stop?</a>.

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π { #directory-structure }

–¢–µ–ø–µ—Ä —É –≤–∞—Å –º–∞—î –±—É—Ç–∏ —Ç–∞–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ–π:

```
.
‚îú‚îÄ‚îÄ app
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ requirements.txt
```

#### –ó–∞ TLS termination proxy { #behind-a-tls-termination-proxy }

–Ø–∫—â–æ –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞ TLS Termination Proxy (–±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫–æ–º –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è), —Ç–∞–∫–∏–º —è–∫ Nginx –∞–±–æ Traefik, –¥–æ–¥–∞–π—Ç–µ –æ–ø—Ü—ñ—é `--proxy-headers`. –í–æ–Ω–∞ —Å–∫–∞–∂–µ Uvicorn (—á–µ—Ä–µ–∑ FastAPI CLI) –¥–æ–≤—ñ—Ä—è—Ç–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º, —è–∫—ñ –Ω–∞–¥—Å–∏–ª–∞—î —Ü–µ–π –ø—Ä–æ–∫—Å—ñ, —ñ —è–∫—ñ –ø–æ–≤—ñ–¥–æ–º–ª—è—é—Ç—å, —â–æ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –ø—Ä–∞—Ü—é—î –∑–∞ HTTPS —Ç–æ—â–æ.

```Dockerfile
CMD ["fastapi", "run", "app/main.py", "--proxy-headers", "--port", "80"]
```

#### Docker cache { #docker-cache }

–£ —Ü—å–æ–º—É `Dockerfile` —î –≤–∞–∂–ª–∏–≤–∏–π –ø—Ä–∏–π–æ–º: —Å–ø–æ—á–∞—Ç–∫—É –º–∏ –∫–æ–ø—ñ—é—î–º–æ **–ª–∏—à–µ —Ñ–∞–π–ª —ñ–∑ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏**, –∞ –Ω–µ —Ä–µ—à—Ç—É –∫–æ–¥—É. –ü–æ—è—Å–Ω—é, –Ω–∞–≤—ñ—â–æ —Ü–µ.

```Dockerfile
COPY ./requirements.txt /code/requirements.txt
```

Docker —Ç–∞ —ñ–Ω—à—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ **–∑–±–∏—Ä–∞—é—Ç—å** —Ü—ñ –æ–±—Ä–∞–∑–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ **—ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ**, –¥–æ–¥–∞—é—á–∏ **—à–∞—Ä –∑–∞ —à–∞—Ä–æ–º**, –ø–æ—á–∏–Ω–∞—é—á–∏ –∑ –≤–µ—Ä—Ö–Ω—å–æ—ó —á–∞—Å—Ç–∏–Ω–∏ `Dockerfile` —ñ –¥–æ–¥–∞—é—á–∏ —Ñ–∞–π–ª–∏, —Å—Ç–≤–æ—Ä–µ–Ω—ñ –∫–æ–∂–Ω–æ—é —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—î—é `Dockerfile`.

Docker —ñ –ø–æ–¥—ñ–±–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ç–∞–∫–æ–∂ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å **–≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –∫–µ—à** –ø—ñ–¥ —á–∞—Å –∑–±–∏—Ä–∞–Ω–Ω—è –æ–±—Ä–∞–∑—É: —è–∫—â–æ —Ñ–∞–π–ª –Ω–µ –∑–º—ñ–Ω–∏–≤—Å—è –∑ –º–æ–º–µ–Ω—Ç—É –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –∑–±–∏—Ä–∞–Ω–Ω—è –æ–±—Ä–∞–∑—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≤—ñ–Ω **–ø–æ–≤—Ç–æ—Ä–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î —Ç–æ–π —Å–∞–º–∏–π —à–∞—Ä**, —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –º–∏–Ω—É–ª–æ–≥–æ —Ä–∞–∑—É, –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ —â–æ–± –∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ñ–∞–π–ª –∑–Ω–æ–≤—É –π —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤–∏–π —à–∞—Ä –∑ –Ω—É–ª—è.

–ü—Ä–æ—Å—Ç–æ —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –Ω–µ –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ —Å–∏–ª—å–Ω–æ –ø–æ–∫—Ä–∞—â—É—î —Å–∏—Ç—É–∞—Ü—ñ—é, –∞–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –Ω–∞ —Ü—å–æ–º—É –∫—Ä–æ—Ü—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∫–µ—à, –≤—ñ–Ω –º–æ–∂–µ **–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–µ—à —ñ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –∫—Ä–æ—Ü—ñ**. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤—ñ–Ω –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–µ—à –¥–ª—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:

```Dockerfile
RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt
```

–§–∞–π–ª —ñ–∑ –≤–∏–º–æ–≥–∞–º–∏ –¥–æ –ø–∞–∫–µ—Ç—ñ–≤ **–Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏–º–µ—Ç—å—Å—è —á–∞—Å—Ç–æ**. –¢–æ–∂, –∫–æ–ø—ñ—é—é—á–∏ –ª–∏—à–µ —Ü–µ–π —Ñ–∞–π–ª, Docker –∑–º–æ–∂–µ **–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–µ—à** –Ω–∞ —Ü—å–æ–º—É –∫—Ä–æ—Ü—ñ.

–Ü —Ç–æ–¥—ñ Docker –∑–º–æ–∂–µ **–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–µ—à –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∫—Ä–æ–∫—É**, —è–∫–∏–π –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ç–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î —Ü—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ. –°–∞–º–µ —Ç—É—Ç –º–∏ **–µ–∫–æ–Ω–æ–º–∏–º–æ –±–∞–≥–∞—Ç–æ —á–∞—Å—É**. ‚ú® ...—ñ —É–Ω–∏–∫–∞—î–º–æ –Ω—É–¥–Ω–æ–≥–æ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è. üò™üòÜ

–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –π –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π **–º–æ–∂–µ —Ç—Ä–∏–≤–∞—Ç–∏ —Ö–≤–∏–ª–∏–Ω–∏**, –∞–ª–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **–∫–µ—à—É** –∑–∞–π–º–∞—Ç–∏–º–µ **–º–∞–∫—Å–∏–º—É–º —Å–µ–∫—É–Ω–¥–∏**.

–ê –æ—Å–∫—ñ–ª—å–∫–∏ –ø—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏ –≤–∏ –∑–±–∏—Ä–∞—Ç–∏–º–µ—Ç–µ –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑–Ω–æ–≤—É —ñ –∑–Ω–æ–≤—É, —â–æ–± –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏, —á–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∑–º—ñ–Ω–∏ –≤ –∫–æ–¥—ñ, —Å—É–∫—É–ø–Ω–æ —Ü–µ –∑–∞–æ—â–∞–¥–∏—Ç—å —á–∏–º–∞–ª–æ —á–∞—Å—É.

–î–∞–ª—ñ, –±–ª–∏–∂—á–µ –¥–æ –∫—ñ–Ω—Ü—è `Dockerfile`, –º–∏ –∫–æ–ø—ñ—é—î–º–æ –≤–µ—Å—å –∫–æ–¥. –û—Å–∫—ñ–ª—å–∫–∏ —Å–∞–º–µ –≤—ñ–Ω **–∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞–π—á–∞—Å—Ç—ñ—à–µ**, –º–∏ —Ä–æ–∑–º—ñ—â—É—î–º–æ –π–æ–≥–æ –Ω–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ, –±–æ –º–∞–π–∂–µ –∑–∞–≤–∂–¥–∏ –≤—Å–µ –ø—ñ—Å–ª—è —Ü—å–æ–≥–æ –∫—Ä–æ–∫—É –≤–∂–µ –Ω–µ –∑–º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–µ—à.

```Dockerfile
COPY ./app /code/app
```

### –ó—ñ–±—Ä–∞—Ç–∏ Docker-–æ–±—Ä–∞–∑ { #build-the-docker-image }

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –≤—Å—ñ —Ñ–∞–π–ª–∏ –Ω–∞ –º—ñ—Å—Ü—ñ, –∑–±–µ—Ä—ñ–º–æ –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

* –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ—î–∫—Ç—É (–¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤–∞—à `Dockerfile`, –∞ —Ç–∞–∫–æ–∂ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è `app`).
* –ó–±–µ—Ä—ñ—Ç—å –≤–∞—à FastAPI-–æ–±—Ä–∞–∑:

<div class="termy">

```console
$ docker build -t myimage .

---> 100%
```

</div>

/// tip | –ü–æ—Ä–∞–¥–∞

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É –Ω–∞ `.` –≤ –∫—ñ–Ω—Ü—ñ ‚Äî —Ü–µ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç `./`. –í—ñ–Ω –≤–∫–∞–∑—É—î Docker, —è–∫—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –¥–ª—è –∑–±–∏—Ä–∞–Ω–Ω—è –æ–±—Ä–∞–∑—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É —Ü–µ –ø–æ—Ç–æ—á–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è (`.`).

///

### –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä { #start-the-docker-container }

* –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤—ñ –≤–∞—à–æ–≥–æ –æ–±—Ä–∞–∑—É:

<div class="termy">

```console
$ docker run -d --name mycontainer -p 80:80 myimage
```

</div>

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ { #check-it }

–í–∏ –º–∞—î—Ç–µ –∑–º–æ–≥—É –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ü–µ –∑–∞ URL –≤–∞—à–æ–≥–æ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥: <a href="http://192.168.99.100/items/5?q=somequery" class="external-link" target="_blank">http://192.168.99.100/items/5?q=somequery</a> –∞–±–æ <a href="http://127.0.0.1/items/5?q=somequery" class="external-link" target="_blank">http://127.0.0.1/items/5?q=somequery</a> (–∞–±–æ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–æ, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–∞—à–æ–≥–æ Docker-—Ö–æ—Å—Ç–∞).

–í–∏ –ø–æ–±–∞—á–∏—Ç–µ —â–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç:

```JSON
{"item_id": 5, "q": "somequery"}
```

## –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API { #interactive-api-docs }

–¢–µ–ø–µ—Ä –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ <a href="http://192.168.99.100/docs" class="external-link" target="_blank">http://192.168.99.100/docs</a> –∞–±–æ <a href="http://127.0.0.1/docs" class="external-link" target="_blank">http://127.0.0.1/docs</a> (–∞–±–æ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–æ, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–∞—à–æ–≥–æ Docker-—Ö–æ—Å—Ç–∞).

–í–∏ –ø–æ–±–∞—á–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é API (–Ω–∞–¥–∞—î—Ç—å—Å—è <a href="https://github.com/swagger-api/swagger-ui" class="external-link" target="_blank">Swagger UI</a>):

![Swagger UI](https://fastapi.tiangolo.com/img/index/index-01-swagger-ui-simple.png)

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è API { #alternative-api-docs }

–¢–∞–∫–æ–∂ –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ <a href="http://192.168.99.100/redoc" class="external-link" target="_blank">http://192.168.99.100/redoc</a> –∞–±–æ <a href="http://127.0.0.1/redoc" class="external-link" target="_blank">http://127.0.0.1/redoc</a> (–∞–±–æ –µ–∫–≤—ñ–≤–∞–ª–µ–Ω—Ç–Ω–æ, –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–∞—à–æ–≥–æ Docker-—Ö–æ—Å—Ç–∞).

–í–∏ –ø–æ–±–∞—á–∏—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é (–Ω–∞–¥–∞—î—Ç—å—Å—è <a href="https://github.com/Rebilly/ReDoc" class="external-link" target="_blank">ReDoc</a>):

![ReDoc](https://fastapi.tiangolo.com/img/index/index-02-redoc-simple.png)

## –ó—ñ–±—Ä–∞—Ç–∏ Docker-–æ–±—Ä–∞–∑ –¥–ª—è –æ–¥–Ω–æ—Ñ–∞–π–ª–æ–≤–æ–≥–æ FastAPI { #build-a-docker-image-with-a-single-file-fastapi }

–Ø–∫—â–æ –≤–∞—à FastAPI ‚Äî —Ü–µ –æ–¥–∏–Ω —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `main.py` –±–µ–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `./app`, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤ –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:

```
.
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ main.py
‚îî‚îÄ‚îÄ requirements.txt
```

–¢–æ–¥—ñ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ª–∏—à–µ –∑–º—ñ–Ω–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ —à–ª—è—Ö–∏, —â–æ–± —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ñ–∞–π–ª —É `Dockerfile`:

```{ .dockerfile .annotate hl_lines="10  13" }
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

# (1)!
COPY ./main.py /code/

# (2)!
CMD ["fastapi", "run", "main.py", "--port", "80"]
```

1. –°–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª `main.py` –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `/code` (–±–µ–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó `./app`).

2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ `fastapi run`, —â–æ–± –≤—ñ–¥–¥–∞–≤–∞—Ç–∏ –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ —ñ–∑ —î–¥–∏–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ `main.py`.

–ö–æ–ª–∏ –≤–∏ –ø–µ—Ä–µ–¥–∞—î—Ç–µ —Ñ–∞–π–ª –¥–æ `fastapi run`, –≤—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å, —â–æ —Ü–µ –æ–¥–∏–Ω–æ—á–Ω–∏–π —Ñ–∞–π–ª, –∞ –Ω–µ —á–∞—Å—Ç–∏–Ω–∞ –ø–∞–∫–µ—Ç–∞, —ñ –∑–Ω–∞—Ç–∏–º–µ, —è–∫ –π–æ–≥–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Ç–∞ –≤—ñ–¥–¥–∞–≤–∞—Ç–∏ –≤–∞—à FastAPI-–∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫. üòé

## –ö–æ–Ω—Ü–µ–ø—Ü—ñ—ó —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è { #deployment-concepts }

–ü–æ–≤–µ—Ä–Ω—ñ–º–æ—Å—è –¥–æ –¥–µ—è–∫–∏—Ö —ñ–∑ —Ç–∏—Ö —Å–∞–º–∏—Ö [–∫–æ–Ω—Ü–µ–ø—Ü—ñ–π —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è](concepts.md){.internal-link target=_blank}, –∞–ª–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤.

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ ‚Äî —Ü–µ –Ω–∞—Å–∞–º–ø–µ—Ä–µ–¥ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–ø—Ä–æ—â–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É **–∑–±–∏—Ä–∞–Ω–Ω—è —Ç–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è** –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –∞–ª–µ –≤–æ–Ω–∏ –Ω–µ –Ω–∞–≤‚Äô—è–∑—É—é—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ü–∏—Ö **–∫–æ–Ω—Ü–µ–ø—Ü—ñ–π —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è**, —ñ —ñ—Å–Ω—É—î –∫—ñ–ª—å–∫–∞ –º–æ–∂–ª–∏–≤–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π.

**–ì–∞—Ä–Ω–∞ –Ω–æ–≤–∏–Ω–∞** –≤ —Ç–æ–º—É, —â–æ –¥–ª—è –∫–æ–∂–Ω–æ—ó —Å—Ç—Ä–∞—Ç–µ–≥—ñ—ó —î —Å–ø–æ—Å—ñ–± –ø–æ–∫—Ä–∏—Ç–∏ –≤—Å—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è. üéâ

–†–æ–∑–≥–ª—è–Ω—å–º–æ —Ü—ñ **–∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è** —É —Ç–µ—Ä–º—ñ–Ω–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤:

* HTTPS
* –ó–∞–ø—É—Å–∫ –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É
* –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
* –†–µ–ø–ª—ñ–∫–∞—Ü—ñ—è (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø—É—â–µ–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤)
* –ü–∞–º‚Äô—è—Ç—å
* –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

## HTTPS { #https }

–Ø–∫—â–æ –∑–æ—Å–µ—Ä–µ–¥–∏—Ç–∏—Å—è –ª–∏—à–µ –Ω–∞ **–æ–±—Ä–∞–∑—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É FastAPI (–∞ –ø–æ—Ç—ñ–º –Ω–∞ –∑–∞–ø—É—â–µ–Ω–æ–º—É **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ**), —Ç–æ HTTPS –∑–∞–∑–≤–∏—á–∞–π –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è **–∑–æ–≤–Ω—ñ** —ñ–Ω—à–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º.

–¶–µ –º–æ–∂–µ –±—É—Ç–∏ —ñ–Ω—à–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —ñ–∑ <a href="https://traefik.io/" class="external-link" target="_blank">Traefik</a>, —è–∫–∏–π –æ–±—Ä–æ–±–ª—è—î **HTTPS** —Ç–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ** –æ—Ç—Ä–∏–º–∞–Ω–Ω—è **—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤**.

/// tip | –ü–æ—Ä–∞–¥–∞

Traefik –º–∞—î —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó –∑ Docker, Kubernetes —Ç–∞ —ñ–Ω—à–∏–º–∏, —Ç–æ–∂ –π–æ–≥–æ –¥—É–∂–µ –ª–µ–≥–∫–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–ª—è HTTPS –≤–∞—à–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤.

///

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, HTTPS –º–æ–∂–µ –±—É—Ç–∏ —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —Ö–º–∞—Ä–Ω–∏–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º —è–∫ –æ–¥–Ω–∞ –∑ –π–æ–≥–æ –ø–æ—Å–ª—É–≥ (–ø—Ä–∏ —Ü—å–æ–º—É —Å–∞–º –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –≤—Å–µ –æ–¥–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ).

## –ó–∞–ø—É—Å–∫ –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ { #running-on-startup-and-restarts }

–ó–∞–∑–≤–∏—á–∞–π —î —ñ–Ω—à–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π –∑–∞ **–∑–∞–ø—É—Å–∫ —ñ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è** –≤–∞—à–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

–¶–µ –º–æ–∂–µ –±—É—Ç–∏ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ **Docker**, **Docker Compose**, **Kubernetes**, **—Ö–º–∞—Ä–Ω–∏–π —Å–µ—Ä–≤—ñ—Å** —Ç–æ—â–æ.

–£ –±—ñ–ª—å—à–æ—Å—Ç—ñ (–∞–±–æ –≤—Å—ñ—Ö) –≤–∏–ø–∞–¥–∫—ñ–≤ —î –ø—Ä–æ—Å—Ç–∞ –æ–ø—Ü—ñ—è, —â–æ–± —É–≤—ñ–º–∫–Ω—É—Ç–∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ —É —Ä–∞–∑—ñ –∑–±–æ—ó–≤. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, —É Docker —Ü–µ –æ–ø—Ü—ñ—è –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ `--restart`.

–ë–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –∑–∞–ø—É—Å–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É —Å–∏—Å—Ç–µ–º–∏ —Ç–∞ —ó—Ö–Ω—ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–∑—Ä—É—á–Ω–æ –π —Å–∫–ª–∞–¥–Ω–æ. –ê–ª–µ –ø—ñ–¥ —á–∞—Å **—Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏** —É –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ —Ü—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º. ‚ú®

## –†–µ–ø–ª—ñ–∫–∞—Ü—ñ—è ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—ñ–≤ { #replication-number-of-processes }

–Ø–∫—â–æ —É –≤–∞—Å —î <abbr title="A group of machines that are configured to be connected and work together in some way.">cluster</abbr> –º–∞—à–∏–Ω —ñ–∑ **Kubernetes**, Docker Swarm Mode, Nomad –∞–±–æ —ñ–Ω—à–æ—é –ø–æ–¥—ñ–±–Ω–æ—é —Å–∫–ª–∞–¥–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –Ω–∞ –±–∞–≥–∞—Ç—å–æ—Ö –º–∞—à–∏–Ω–∞—Ö, —Ç–æ–¥—ñ –≤–∞–º, —ñ–º–æ–≤—ñ—Ä–Ω–æ, –≤–∞—Ä—Ç–æ **–∫–µ—Ä—É–≤–∞—Ç–∏ —Ä–µ–ø–ª—ñ–∫–∞—Ü—ñ—î—é** –Ω–∞ **—Ä—ñ–≤–Ω—ñ –∫–ª–∞—Å—Ç–µ—Ä–∞**, –∑–∞–º—ñ—Å—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è **–º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤** (—è–∫-–æ—Ç Uvicorn —ñ–∑ workers) —É –∫–æ–∂–Ω–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ.

–û–¥–Ω–∞ –∑ —Ç–∞–∫–∏—Ö —Å–∏—Å—Ç–µ–º –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏, —è–∫ Kubernetes, –∑–∞–∑–≤–∏—á–∞–π –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω–∏–π —Å–ø–æ—Å—ñ–± –æ–±—Ä–æ–±–∫–∏ **—Ä–µ–ø–ª—ñ–∫–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤** —ñ–∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é **–±–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** –¥–ª—è –≤—Ö—ñ–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ ‚Äî —É—Å–µ –Ω–∞ **—Ä—ñ–≤–Ω—ñ –∫–ª–∞—Å—Ç–µ—Ä–∞**.

–£ —Ç–∞–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –≤–∞–º, —ñ–º–æ–≤—ñ—Ä–Ω–æ, –≤–∞—Ä—Ç–æ –∑—ñ–±—Ä–∞—Ç–∏ **Docker-–æ–±—Ä–∞–∑ –∑ –Ω—É–ª—è**, —è–∫ [–ø–æ—è—Å–Ω–µ–Ω–æ –≤–∏—â–µ](#dockerfile): –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ –∑–∞–ø—É—Å–∫–∞—Ç–∏ **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å Uvicorn**, –∑–∞–º—ñ—Å—Ç—å –∫—ñ–ª—å–∫–æ—Ö Uvicorn workers.

### –ë–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è { #load-balancer }

–ü—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∑–∞–∑–≤–∏—á–∞–π —î –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —è–∫–∏–π **—Å–ª—É—Ö–∞—î –æ—Å–Ω–æ–≤–Ω–∏–π –ø–æ—Ä—Ç**. –¶–µ –º–æ–∂–µ –±—É—Ç–∏ —ñ–Ω—à–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —è–∫–∏–π —Ç–∞–∫–æ–∂ —î **TLS Termination Proxy** –¥–ª—è –æ–±—Ä–æ–±–∫–∏ **HTTPS**, –∞–±–æ –ø–æ–¥—ñ–±–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.

–û—Å–∫—ñ–ª—å–∫–∏ —Ü–µ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–∏–π–º–∞—î **–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** –∑–∞–ø–∏—Ç—ñ–≤ —ñ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—î –π–æ–≥–æ –º—ñ–∂ –≤–æ—Ä–∫–µ—Ä–∞–º–∏ –±—ñ–ª—å—à-–º–µ–Ω—à **–∑–±–∞–ª–∞–Ω—Å–æ–≤–∞–Ω–æ**, –π–æ–≥–æ —Ç–∞–∫–æ–∂ —á–∞—Å—Ç–æ –Ω–∞–∑–∏–≤–∞—é—Ç—å **Load Balancer**.

/// tip | –ü–æ—Ä–∞–¥–∞

–¢–æ–π —Å–∞–º–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç **TLS Termination Proxy**, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è HTTPS, —ñ–º–æ–≤—ñ—Ä–Ω–æ, —Ç–∞–∫–æ–∂ –±—É–¥–µ **Load Balancer**.

///

–ê –ø—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —Ç–∞ —Å–∏—Å—Ç–µ–º–∞, —è–∫—É –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –¥–ª—è –∑–∞–ø—É—Å–∫—É –π –∫–µ—Ä—É–≤–∞–Ω–Ω—è –Ω–∏–º–∏, –≤–∂–µ –º–∞—Ç–∏–º–µ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ **–º–µ—Ä–µ–∂–µ–≤–æ—ó –≤–∑–∞—î–º–æ–¥—ñ—ó** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, HTTP-–∑–∞–ø–∏—Ç—ñ–≤) –≤—ñ–¥ —Ü—å–æ–≥–æ **load balancer** (—è–∫–∏–π —Ç–∞–∫–æ–∂ –º–æ–∂–µ –±—É—Ç–∏ **TLS Termination Proxy**) –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞(—ñ–≤) —ñ–∑ –≤–∞—à–∏–º –∑–∞—Å—Ç–æ—Å—É–Ω–∫–æ–º.

### –û–¥–∏–Ω –±–∞–ª–∞–Ω—Å—É–≤–∞–ª—å–Ω–∏–∫ ‚Äî –∫—ñ–ª—å–∫–∞ worker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ { #one-load-balancer-multiple-worker-containers }

–ü—ñ–¥ —á–∞—Å —Ä–æ–±–æ—Ç–∏ –∑ **Kubernetes** –∞–±–æ –ø–æ–¥—ñ–±–Ω–∏–º–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ —ó—Ö–Ω—ñ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ –º–µ—Ä–µ–∂–µ–≤—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å –æ–¥–Ω–æ–º—É **load balancer**, —è–∫–∏–π —Å–ª—É—Ö–∞—î –æ—Å–Ω–æ–≤–Ω–∏–π **–ø–æ—Ä—Ç**, –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –≤–∑–∞—î–º–æ–¥—ñ—é (–∑–∞–ø–∏—Ç–∏) –¥–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ **–∫—ñ–ª—å–∫–æ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤** —ñ–∑ –≤–∞—à–∏–º –∑–∞—Å—Ç–æ—Å—É–Ω–∫–æ–º.

–ö–æ–∂–µ–Ω —ñ–∑ —Ü–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –∑–∞–∑–≤–∏—á–∞–π –º–∞—Ç–∏–º–µ **–ª–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–æ—Ü–µ—Å Uvicorn, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—î –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ FastAPI). –£—Å—ñ –≤–æ–Ω–∏ –±—É–¥—É—Ç—å **—ñ–¥–µ–Ω—Ç–∏—á–Ω–∏–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏**, –∑–∞–ø—É—Å–∫–∞—Ç–∏–º—É—Ç—å —Ç–µ —Å–∞–º–µ, –∞–ª–µ –∫–æ–∂–µ–Ω –º–∞—Ç–∏–º–µ —Å–≤—ñ–π –ø—Ä–æ—Ü–µ—Å, –ø–∞–º‚Äô—è—Ç—å —Ç–æ—â–æ. –¢–∞–∫ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î—Ç–µ **–ø–∞—Ä–∞–ª–µ–ª—ñ–∑–∞—Ü—ñ—é** –Ω–∞ **—Ä—ñ–∑–Ω–∏—Ö —è–¥—Ä–∞—Ö** CPU –∞–±–æ –Ω–∞–≤—ñ—Ç—å –Ω–∞ **—Ä—ñ–∑–Ω–∏—Ö –º–∞—à–∏–Ω–∞—Ö**.

–Ü —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∑ **load balancer** –±—É–¥–µ **—Ä–æ–∑–ø–æ–¥—ñ–ª—è—Ç–∏ –∑–∞–ø–∏—Ç–∏** –¥–æ –∫–æ–∂–Ω–æ–≥–æ –∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ —ñ–∑ –≤–∞—à–∏–º –∑–∞—Å—Ç–æ—Å—É–Ω–∫–æ–º **–ø–æ —á–µ—Ä–∑—ñ**. –¢–æ–∂ –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –º–æ–∂–µ –±—É—Ç–∏ –æ–±—Ä–æ–±–ª–µ–Ω–∏–π –æ–¥–Ω–∏–º —ñ–∑ –∫—ñ–ª—å–∫–æ—Ö **—Ä–µ–ø–ª—ñ–∫–æ–≤–∞–Ω–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤**, —â–æ –∑–∞–ø—É—Å–∫–∞—é—Ç—å –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫.

–Ü –∑–∞–∑–≤–∏—á–∞–π —Ü–µ–π **load balancer** –∑–º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∑–∞–ø–∏—Ç–∏, —è–∫—ñ —Å–ø—Ä—è–º–æ–≤–∞–Ω—ñ –¥–æ *—ñ–Ω—à–∏—Ö* –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ —É –≤–∞—à–æ–º—É –∫–ª–∞—Å—Ç–µ—Ä—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –Ω–∞ —ñ–Ω—à–∏–π –¥–æ–º–µ–Ω –∞–±–æ –ø—ñ–¥ —ñ–Ω—à–∏–º –ø—Ä–µ—Ñ—ñ–∫—Å–æ–º —à–ª—è—Ö—É URL), —ñ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏–º–µ –≤–∑–∞—î–º–æ–¥—ñ—é –¥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –¥–ª—è *—Ç–æ–≥–æ —ñ–Ω—à–æ–≥–æ* –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —â–æ –ø—Ä–∞—Ü—é—î –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ.

### –û–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä { #one-process-per-container }

–£ —Ç–∞–∫–æ–º—É —Å—Ü–µ–Ω–∞—Ä—ñ—ó, —ñ–º–æ–≤—ñ—Ä–Ω–æ, –≤–∞—Ä—Ç–æ –º–∞—Ç–∏ **–æ–¥–∏–Ω (Uvicorn) –ø—Ä–æ—Ü–µ—Å –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, –∞–¥–∂–µ —Ä–µ–ø–ª—ñ–∫–∞—Ü—ñ—é –≤–∏ –≤–∂–µ –æ–±—Ä–æ–±–ª—è—î—Ç–µ –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–ª–∞—Å—Ç–µ—Ä–∞.

–û—Ç–∂–µ, —É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤–∞–º **–Ω–µ** –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ workers —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —á–µ—Ä–µ–∑ –æ–ø—Ü—ñ—é –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ `--workers`. –í–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω –ª–∏—à–µ **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å Uvicorn** –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∞–ª–µ, –π–º–æ–≤—ñ—Ä–Ω–æ, –±–∞–≥–∞—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤).

–î–æ–¥–∞–≤–∞—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —â–µ –æ–¥–∏–Ω –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—ñ–≤ (—è–∫ —Ü–µ –±—É–ª–æ –± —ñ–∑ –∫—ñ–ª—å–∫–æ–º–∞ workers) ‚Äî —Ü–µ –∑–∞–π–≤–∞ **–Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å**, —è–∫—É, —Å–∫–æ—Ä—ñ—à –∑–∞ –≤—Å–µ, –≤–∂–µ –≤–∏—Ä—ñ—à—É—î –≤–∞—à–∞ –∫–ª–∞—Å—Ç–µ—Ä–Ω–∞ —Å–∏—Å—Ç–µ–º–∞.

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∑ –∫—ñ–ª—å–∫–æ–º–∞ –ø—Ä–æ—Ü–µ—Å–∞–º–∏ —Ç–∞ –æ—Å–æ–±–ª–∏–≤—ñ –≤–∏–ø–∞–¥–∫–∏ { #containers-with-multiple-processes-and-special-cases }

–ó–≤—ñ—Å–Ω–æ, —î **–æ—Å–æ–±–ª–∏–≤—ñ –≤–∏–ø–∞–¥–∫–∏**, –∫–æ–ª–∏ –≤–∞–º –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —ñ–∑ –∫—ñ–ª—å–∫–æ–º–∞ **–ø—Ä–æ—Ü–µ—Å–∞–º–∏ –≤–æ—Ä–∫–µ—Ä—ñ–≤ Uvicorn** –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ.

–£ —Ç–∞–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –æ–ø—Ü—ñ—é –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ `--workers`, —â–æ–± –∑–∞–¥–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–æ—Ä–∫–µ—Ä—ñ–≤, —è–∫–∏—Ö —Ö–æ—á–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç–∏:

```{ .dockerfile .annotate }
FROM python:3.9

WORKDIR /code

COPY ./requirements.txt /code/requirements.txt

RUN pip install --no-cache-dir --upgrade -r /code/requirements.txt

COPY ./app /code/app

# (1)!
CMD ["fastapi", "run", "app/main.py", "--port", "80", "--workers", "4"]
```

1. –¢—É—Ç –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –æ–ø—Ü—ñ—é –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ `--workers`, —â–æ–± –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–æ—Ä–∫–µ—Ä—ñ–≤ 4.

–û—Å—å –∫—ñ–ª—å–∫–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ–≤, –∫–æ–ª–∏ —Ü–µ –º–æ–∂–µ –º–∞—Ç–∏ —Å–µ–Ω—Å:

#### –ü—Ä–æ—Å—Ç–∏–π –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ { #a-simple-app }

–í–∞–º –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è –º–µ–Ω–µ–¥–∂–µ—Ä –ø—Ä–æ—Ü–µ—Å—ñ–≤ —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ, —è–∫—â–æ –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–æ—Å—Ç–∏–π**, —â–æ–± –∑–∞–ø—É—Å–∫–∞—Ç–∏ –π–æ–≥–æ –Ω–∞ **–æ–¥–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ**, –∞ –Ω–µ –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ.

#### Docker Compose { #docker-compose }

–í–∏ –º–æ–∂–µ—Ç–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞—Ç–∏ –Ω–∞ **–æ–¥–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ** (–Ω–µ –≤ –∫–ª–∞—Å—Ç–µ—Ä—ñ) –∑ **Docker Compose**, —Ç–æ–∂ —É –≤–∞—Å –Ω–µ –±—É–¥–µ –ø—Ä–æ—Å—Ç–æ–≥–æ —Å–ø–æ—Å–æ–±—É –∫–µ—Ä—É–≤–∞—Ç–∏ —Ä–µ–ø–ª—ñ–∫–∞—Ü—ñ—î—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ (—á–µ—Ä–µ–∑ Docker Compose), –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ —Å–ø—ñ–ª—å–Ω—É –º–µ—Ä–µ–∂—É —Ç–∞ **–±–∞–ª–∞–Ω—Å—É–≤–∞–Ω–Ω—è –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è**.

–¢–æ–¥—ñ –≤–∞–º –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è **–æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —ñ–∑ **–º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –ø—Ä–æ—Ü–µ—Å—ñ–≤**, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—Ç–∏–º–µ **–∫—ñ–ª—å–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤ –≤–æ—Ä–∫–µ—Ä—ñ–≤** –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ.

---

–ì–æ–ª–æ–≤–Ω–∞ –¥—É–º–∫–∞: **–∂–æ–¥–Ω–µ** –∑ —Ü—å–æ–≥–æ –Ω–µ —î **–≤–∏—Å—ñ—á–µ–Ω–∏–º–∏ –≤ –∫–∞–º–µ–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞–º–∏**, —è–∫–∏—Ö –≤–∏ –º–∞—î—Ç–µ —Å–ª—ñ–ø–æ –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü—ñ —ñ–¥–µ—ó, —â–æ–± **–æ—Ü—ñ–Ω–∏—Ç–∏ —Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π** —ñ –≤–∏—Ä—ñ—à–∏—Ç–∏, —è–∫–∏–π –ø—ñ–¥—Ö—ñ–¥ –Ω–∞–π–∫—Ä–∞—â–∏–π –¥–ª—è –≤–∞—à–æ—ó —Å–∏—Å—Ç–µ–º–∏, —Ä–æ–∑–≥–ª—è–Ω—É–≤—à–∏, —è–∫ –∫–µ—Ä—É–≤–∞—Ç–∏ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è–º–∏:

* –ë–µ–∑–ø–µ–∫–∞ ‚Äî HTTPS
* –ó–∞–ø—É—Å–∫ –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É
* –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
* –†–µ–ø–ª—ñ–∫–∞—Ü—ñ—è (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø—É—â–µ–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤)
* –ü–∞–º‚Äô—è—Ç—å
* –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

## –ü–∞–º‚Äô—è—Ç—å { #memory }

–Ø–∫—â–æ –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, –≤–∏ –º–∞—Ç–∏–º–µ—Ç–µ –±—ñ–ª—å—à-–º–µ–Ω—à –≤–∏–∑–Ω–∞—á–µ–Ω–∏–π, —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π —ñ –æ–±–º–µ–∂–µ–Ω–∏–π –æ–±—Å—è–≥ –ø–∞–º‚Äô—è—Ç—ñ, —è–∫–∏–π —Å–ø–æ–∂–∏–≤–∞—î –∫–æ–∂–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–∞–±–æ –±—ñ–ª—å—à–µ, —è–∫—â–æ –≤–æ–Ω–∏ —Ä–µ–ø–ª—ñ–∫–æ–≤–∞–Ω—ñ).

–Ü —Ç–æ–¥—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è –π –≤–∏–º–æ–≥–∏ –¥–æ –ø–∞–º‚Äô—è—Ç—ñ —É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è—Ö –≤–∞—à–æ—ó —Å–∏—Å—Ç–µ–º–∏ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É **Kubernetes**). –¢–∞–∫ –≤–æ–Ω–∞ –∑–º–æ–∂–µ **—Ä–µ–ø–ª—ñ–∫—É–≤–∞—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏** –Ω–∞ **–¥–æ—Å—Ç—É–ø–Ω–∏—Ö –º–∞—à–∏–Ω–∞—Ö**, –≤—Ä–∞—Ö–æ–≤—É—é—á–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π –æ–±—Å—è–≥ –ø–∞–º‚Äô—è—Ç—ñ —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∏–π –æ–±—Å—è–≥ —É –º–∞—à–∏–Ω–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞.

–Ø–∫—â–æ –≤–∞—à –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **–ø—Ä–æ—Å—Ç–∏–π**, —Ü–µ, —ñ–º–æ–≤—ñ—Ä–Ω–æ, **–Ω–µ –±—É–¥–µ –ø—Ä–æ–±–ª–µ–º–æ—é**, —ñ –≤–∞–º –º–æ–∂–µ –Ω–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è –∑–∞–¥–∞–≤–∞—Ç–∏ –∂–æ—Ä—Å—Ç–∫—ñ –ª—ñ–º—ñ—Ç–∏ –ø–∞–º‚Äô—è—Ç—ñ. –ê–ª–µ —è–∫—â–æ –≤–∏ **–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –±–∞–≥–∞—Ç–æ –ø–∞–º‚Äô—è—Ç—ñ** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑ –º–æ–¥–µ–ª—è–º–∏ **machine learning**), –≤–∞—Ä—Ç–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ –ø–∞–º‚Äô—è—Ç—ñ –≤–∏ —Å–ø–æ–∂–∏–≤–∞—î—Ç–µ, —ñ —Å–∫–æ—Ä–∏–≥—É–≤–∞—Ç–∏ **–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤**, —è–∫—ñ –∑–∞–ø—É—Å–∫–∞—é—Ç—å—Å—è **–Ω–∞ –∫–æ–∂–Ω—ñ–π –º–∞—à–∏–Ω—ñ** (—ñ, –º–æ–∂–ª–∏–≤–æ, –¥–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ –º–∞—à–∏–Ω —É –∫–ª–∞—Å—Ç–µ—Ä).

–Ø–∫—â–æ –≤–∏ –∑–∞–ø—É—Å–∫–∞—î—Ç–µ **–∫—ñ–ª—å–∫–∞ –ø—Ä–æ—Ü–µ—Å—ñ–≤ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø—É—â–µ–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤ –Ω–µ **—Å–ø–æ–∂–∏–≤–∞—î –±—ñ–ª—å—à–µ –ø–∞–º‚Äô—è—Ç—ñ**, –Ω—ñ–∂ –¥–æ—Å—Ç—É–ø–Ω–æ.

## –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ { #previous-steps-before-starting-and-containers }

–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ Docker, Kubernetes), —î –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ñ –ø—ñ–¥—Ö–æ–¥–∏, —è–∫—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏.

### –ö—ñ–ª—å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ { #multiple-containers }

–Ø–∫—â–æ —É –≤–∞—Å **–∫—ñ–ª—å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤**, —ñ–º–æ–≤—ñ—Ä–Ω–æ, –∫–æ–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—î **–æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —É –∫–ª–∞—Å—Ç–µ—Ä—ñ **Kubernetes**), —Ç–æ–¥—ñ –≤–∞–º, —ñ–º–æ–≤—ñ—Ä–Ω–æ, –≤–∞—Ä—Ç–æ –º–∞—Ç–∏ **–æ–∫—Ä–µ–º–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, —è–∫–∏–π –≤–∏–∫–æ–Ω—É—î **–ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫—Ä–æ–∫–∏** —è–∫ –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ –æ–¥–Ω–∏–º –ø—Ä–æ—Ü–µ—Å–æ–º **–ø–µ—Ä–µ–¥** –∑–∞–ø—É—Å–∫–æ–º —Ä–µ–ø–ª—ñ–∫–æ–≤–∞–Ω–∏—Ö worker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤.

/// info | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Kubernetes, —Ü–µ, —ñ–º–æ–≤—ñ—Ä–Ω–æ, –±—É–¥–µ <a href="https://kubernetes.io/docs/concepts/workloads/pods/init-containers/" class="external-link" target="_blank">Init Container</a>.

///

–Ø–∫—â–æ —É –≤–∞—à–æ–º—É —Å—Ü–µ–Ω–∞—Ä—ñ—ó –Ω–µ–º–∞—î –ø—Ä–æ–±–ª–µ–º–∏ –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ü—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫—Ä–æ–∫–∏ **–ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ –≤–∏ –Ω–µ –≤–∏–∫–æ–Ω—É—î—Ç–µ –º—ñ–≥—Ä–∞—Ü—ñ—ó –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –∞ –ª–∏—à–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç–µ, —á–∏ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö —É–∂–µ –≥–æ—Ç–æ–≤–∞), —Ç–æ–¥—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –¥–æ–¥–∞—Ç–∏ —ó—Ö —É –∫–æ–∂–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –ø–µ—Ä–µ–¥ —Å—Ç–∞—Ä—Ç–æ–º –≥–æ–ª–æ–≤–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É.

### –û–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä { #single-container }

–Ø–∫—â–æ —É –≤–∞—Å –ø—Ä–æ—Å—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑ **–æ–¥–Ω–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º**, —è–∫–∏–π –ø–æ—Ç—ñ–º –∑–∞–ø—É—Å–∫–∞—î –∫—ñ–ª—å–∫–∞ **–ø—Ä–æ—Ü–µ—Å—ñ–≤ –≤–æ—Ä–∫–µ—Ä—ñ–≤** (–∞–±–æ —Ç–∞–∫–æ–∂ –ª–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å), –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ–Ω–∞—Ç–∏ —Ü—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –≤ —Ç–æ–º—É —Å–∞–º–æ–º—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ –ø—Ä—è–º–æ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ—Ü–µ—Å—É —ñ–∑ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–æ–º.

### –ë–∞–∑–æ–≤–∏–π Docker-–æ–±—Ä–∞–∑ { #base-docker-image }

–†–∞–Ω—ñ—à–µ —ñ—Å–Ω—É–≤–∞–≤ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Docker-–æ–±—Ä–∞–∑ FastAPI: <a href="https://github.com/tiangolo/uvicorn-gunicorn-fastapi-docker" class="external-link" target="_blank">tiangolo/uvicorn-gunicorn-fastapi</a>. –ê–ª–µ —Ç–µ–ø–µ—Ä –≤—ñ–Ω –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π (deprecated). ‚õîÔ∏è

–Ü–º–æ–≤—ñ—Ä–Ω–æ, –≤–∞–º **–Ω–µ** –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ–π –±–∞–∑–æ–≤–∏–π Docker-–æ–±—Ä–∞–∑ (–∞–±–æ –±—É–¥—å-—è–∫–∏–π —ñ–Ω—à–∏–π –ø–æ–¥—ñ–±–Ω–∏–π).

–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ **Kubernetes** (–∞–±–æ —ñ–Ω—à—ñ) —ñ –≤–∂–µ –∑–∞–¥–∞—î—Ç–µ **—Ä–µ–ø–ª—ñ–∫–∞—Ü—ñ—é** –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–ª–∞—Å—Ç–µ—Ä–∞ –∑ –∫—ñ–ª—å–∫–æ–º–∞ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏**, —Ç–æ –≤ —Ç–∞–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –∫—Ä–∞—â–µ **–∑—ñ–±—Ä–∞—Ç–∏ –æ–±—Ä–∞–∑ –∑ –Ω—É–ª—è**, —è–∫ –æ–ø–∏—Å–∞–Ω–æ –≤–∏—â–µ: [–ó—ñ–±—Ä–∞—Ç–∏ Docker-–æ–±—Ä–∞–∑ –¥–ª—è FastAPI](#build-a-docker-image-for-fastapi).

–ê —è–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∫—ñ–ª—å–∫–∞ workers, –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –æ–ø—Ü—ñ—é –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ `--workers`.

/// note | –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

Docker-–æ–±—Ä–∞–∑ –±—É–ª–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ç–æ–¥—ñ, –∫–æ–ª–∏ Uvicorn –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞–≤ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ ¬´–º–µ—Ä—Ç–≤–∏—Ö¬ª worker-–ø—Ä–æ—Ü–µ—Å—ñ–≤, —Ç–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Gunicorn —Ä–∞–∑–æ–º —ñ–∑ Uvicorn. –¶–µ –¥–æ–¥–∞–≤–∞–ª–æ —á–∏–º–∞–ª–æ —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ –ª–∏—à–µ –¥–ª—è —Ç–æ–≥–æ, —â–æ–± Gunicorn –∫–µ—Ä—É–≤–∞–≤ —ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–≤ worker-–ø—Ä–æ—Ü–µ—Å–∏ Uvicorn.

–ê–ª–µ —Ç–µ–ø–µ—Ä, –∫–æ–ª–∏ Uvicorn (—ñ –∫–æ–º–∞–Ω–¥–∞ `fastapi`) –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å `--workers`, –Ω–µ–º–∞—î –ø—Ä–∏—á–∏–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±–∞–∑–æ–≤–∏–π Docker-–æ–±—Ä–∞–∑ –∑–∞–º—ñ—Å—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–ª–∞—Å–Ω–æ–≥–æ (—Ü–µ –º–∞–π–∂–µ —Ç–æ–π —Å–∞–º–∏–π –æ–±—Å—è–≥ –∫–æ–¥—É üòÖ).

///

## –†–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ { #deploy-the-container-image }

–ü—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫ —É –≤–∞—Å —î –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (Docker), —î –∫—ñ–ª—å–∫–∞ —Å–ø–æ—Å–æ–±—ñ–≤ –π–æ–≥–æ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥:

* –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **Docker Compose** –Ω–∞ –æ–¥–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ;
* —É –∫–ª–∞—Å—Ç–µ—Ä—ñ **Kubernetes**;
* —É –∫–ª–∞—Å—Ç–µ—Ä—ñ Docker Swarm Mode;
* —ñ–Ω—à–∏–º —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º, —è–∫-–æ—Ç Nomad;
* —É —Ö–º–∞—Ä–Ω–æ–º—É —Å–µ—Ä–≤—ñ—Å—ñ, —è–∫–∏–π –±–µ—Ä–µ –≤–∞—à –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —ñ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î –π–æ–≥–æ.

## Docker-–æ–±—Ä–∞–∑ –∑ `uv` { #docker-image-with-uv }

–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ <a href="https://github.com/astral-sh/uv" class="external-link" target="_blank">uv</a> –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –≤–∞—à–∏–º –ø—Ä–æ—î–∫—Ç–æ–º, –≤–∏ –º–æ–∂–µ—Ç–µ –¥–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏—Å—è —ó—Ö–Ω—å–æ–≥–æ <a href="https://docs.astral.sh/uv/guides/integration/docker/" class="external-link" target="_blank">uv Docker guide</a>.

## –ü—ñ–¥—Å—É–º–æ–∫ { #recap }

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ñ —Å–∏—Å—Ç–µ–º–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, **Docker** —ñ **Kubernetes**), —Å—Ç–∞—î –¥–æ–≤–æ–ª—ñ –ø—Ä–æ—Å—Ç–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—Å—ñ **–∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è**:

* HTTPS
* –ó–∞–ø—É—Å–∫ –ø—ñ–¥ —á–∞—Å —Å—Ç–∞—Ä—Ç—É
* –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
* –†–µ–ø–ª—ñ–∫–∞—Ü—ñ—è (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø—É—â–µ–Ω–∏—Ö –ø—Ä–æ—Ü–µ—Å—ñ–≤)
* –ü–∞–º‚Äô—è—Ç—å
* –ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –∫—Ä–æ–∫–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

–£ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ –≤–∞–º, —ñ–º–æ–≤—ñ—Ä–Ω–æ, –Ω–µ –≤–∞—Ä—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π –±–∞–∑–æ–≤–∏–π –æ–±—Ä–∞–∑, –∞ –Ω–∞—Ç–æ–º—ñ—Å—Ç—å **–∑–±–∏—Ä–∞—Ç–∏ –æ–±—Ä–∞–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∑ –Ω—É–ª—è** –Ω–∞ –æ—Å–Ω–æ–≤—ñ –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–≥–æ Docker-–æ–±—Ä–∞–∑—É Python.

–î–±–∞—é—á–∏ –ø—Ä–æ **–ø–æ—Ä—è–¥–æ–∫** —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π —É `Dockerfile` —Ç–∞ **Docker cache**, –≤–∏ –º–æ–∂–µ—Ç–µ **–º—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏ —á–∞—Å –∑–±–∏—Ä–∞–Ω–Ω—è**, —â–æ–± –ø—ñ–¥–≤–∏—â–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (—ñ —É–Ω–∏–∫–∞—Ç–∏ –Ω—É–¥—å–≥–∏). üòé

# –ü—Ä–æ HTTPS { #about-https }

–õ–µ–≥–∫–æ –ø—Ä–∏–ø—É—Å—Ç–∏—Ç–∏, —â–æ HTTPS - —Ü–µ —â–æ—Å—å, —â–æ –ø—Ä–æ—Å—Ç–æ ¬´—É–≤—ñ–º–∫–Ω–µ–Ω–æ¬ª –∞–±–æ –Ω—ñ.

–ê–ª–µ –≤—Å–µ –∑–Ω–∞—á–Ω–æ —Å–∫–ª–∞–¥–Ω—ñ—à–µ.

/// tip | –ü–æ—Ä–∞–¥–∞

–Ø–∫—â–æ –≤–∏ –ø–æ—Å–ø—ñ—à–∞—î—Ç–µ –∞–±–æ —Ü–µ –Ω–µ–≤–∞–∂–ª–∏–≤–æ –¥–ª—è –≤–∞—Å, –ø–µ—Ä–µ—Ö–æ–¥—å—Ç–µ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª—ñ–≤ –¥–ª—è –ø–æ–∫—Ä–æ–∫–æ–≤–∏—Ö —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π —ñ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ —Ä—ñ–∑–Ω–∏–º–∏ —Ç–µ—Ö–Ω—ñ–∫–∞–º–∏.

///

–©–æ–± –≤–∏–≤—á–∏—Ç–∏ –æ—Å–Ω–æ–≤–∏ HTTPS –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É —Å–ø–æ–∂–∏–≤–∞—á–∞, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ <a href="https://howhttps.works/" class="external-link" target="_blank">https://howhttps.works/</a>.

–¢–µ–ø–µ—Ä, –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞, –æ—Å—å –∫—ñ–ª—å–∫–∞ —Ä–µ—á–µ–π, —è–∫—ñ –≤–∞—Ä—Ç–æ –ø–∞–º'—è—Ç–∞—Ç–∏, —Ä–æ–∑–º—ñ—Ä–∫–æ–≤—É—é—á–∏ –ø—Ä–æ HTTPS:

* –î–ª—è HTTPS —Å–µ—Ä–≤–µ—Ä –º–∞—î –º–∞—Ç–∏ ¬´—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏¬ª, –≤–∏–¥–∞–Ω—ñ —Ç—Ä–µ—Ç—å–æ—é —Å—Ç–æ—Ä–æ–Ω–æ—é.
    * –ù–∞—Å–ø—Ä–∞–≤–¥—ñ —Ü—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ ¬´–æ—Ç—Ä–∏–º—É—é—Ç—å—Å—è¬ª —É —Ç—Ä–µ—Ç—å–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏, –∞ –Ω–µ ¬´–≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è¬ª.
* –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –º–∞—é—Ç—å —Å—Ç—Ä–æ–∫ –¥—ñ—ó.
    * –á—Ö–Ω—ñ–π —Å—Ç—Ä–æ–∫ –¥—ñ—ó —Å–ø–ª–∏–≤–∞—î.
    * –Ü —Ç–æ–¥—ñ —ó—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–Ω–æ–≤–∏—Ç–∏, –∑–Ω–æ–≤—É –æ—Ç—Ä–∏–º–∞–≤—à–∏ —É —Ç—Ä–µ—Ç—å–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏.
* –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ TCP.
    * –¶–µ –æ–¥–∏–Ω —à–∞—Ä –Ω–∏–∂—á–µ –≤—ñ–¥ HTTP.
    * –¢–æ–∂ –æ–±—Ä–æ–±–∫–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ —Ç–∞ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –¥–æ HTTP.
* TCP –Ω–µ –∑–Ω–∞—î –ø—Ä–æ ¬´–¥–æ–º–µ–Ω–∏¬ª. –õ–∏—à–µ –ø—Ä–æ IP-–∞–¥—Ä–µ—Å–∏.
    * –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –¥–æ–º–µ–Ω, —è–∫–∏–π –∑–∞–ø–∏—Ç—É—î—Ç—å—Å—è, –º—ñ—Å—Ç–∏—Ç—å—Å—è –≤ –¥–∞–Ω–∏—Ö HTTP.
* –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ HTTPS ¬´–∑–∞—Å–≤—ñ–¥—á—É—é—Ç—å¬ª –ø–µ–≤–Ω–∏–π –¥–æ–º–µ–Ω, –∞–ª–µ –ø—Ä–æ—Ç–æ–∫–æ–ª —ñ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ —Ä—ñ–≤–Ω—ñ TCP, –¥–æ —Ç–æ–≥–æ —è–∫ –≤—ñ–¥–æ–º–æ, –∑ —è–∫–∏–º –¥–æ–º–µ–Ω–æ–º –º–∞—î–º–æ —Å–ø—Ä–∞–≤—É.
* –¢–∏–ø–æ–≤–æ —Ü–µ –æ–∑–Ω–∞—á–∞–ª–æ –±, —â–æ –Ω–∞ –æ–¥–Ω—É IP-–∞–¥—Ä–µ—Å—É –º–æ–∂–Ω–∞ –º–∞—Ç–∏ –ª–∏—à–µ –æ–¥–∏–Ω —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç HTTPS.
    * –ù–µ–≤–∞–∂–ª–∏–≤–æ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –≤–µ–ª–∏–∫–∏–π –≤–∞—à —Å–µ—Ä–≤–µ—Ä –∞–±–æ –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –º–∞–ª–∏–π –∫–æ–∂–µ–Ω –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –Ω–∞ –Ω—å–æ–º—É.
    * –û–¥–Ω–∞–∫ –¥–ª—è —Ü—å–æ–≥–æ —î —Ä—ñ—à–µ–Ω–Ω—è.
* –Ñ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ç–æ–∫–æ–ª—É TLS (—è–∫–∏–π –æ–±—Ä–æ–±–ª—è—î —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ TCP, –¥–æ HTTP), —â–æ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è <a href="https://en.wikipedia.org/wiki/Server_Name_Indication" class="external-link" target="_blank"><abbr title="Server Name Indication - –Ü–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —ñ–º–µ–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞">SNI</abbr></a>.
    * –¶–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è SNI –¥–æ–∑–≤–æ–ª—è—î –æ–¥–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É (–∑ –æ–¥–Ω—ñ—î—é IP-–∞–¥—Ä–µ—Å–æ—é) –º–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ HTTPS —ñ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –¥–æ–º–µ–Ω—ñ–≤/–∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ –ø–æ HTTPS.
    * –©–æ–± —Ü–µ –ø—Ä–∞—Ü—é–≤–∞–ª–æ, –æ–¥–∏–Ω-—î–¥–∏–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–ø—Ä–æ–≥—Ä–∞–º–∞), —â–æ –ø—Ä–∞—Ü—é—î –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ —Ç–∞ —Å–ª—É—Ö–∞—î –ø—É–±–ª—ñ—á–Ω—É IP-–∞–¥—Ä–µ—Å—É, –º–∞—î –º–∞—Ç–∏ –≤—Å—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ HTTPS –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ.
* –ü—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ –∑'—î–¥–Ω–∞–Ω–Ω—è –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º—ñ–Ω—É –≤—Å–µ —â–µ HTTP.
    * –í–º—ñ—Å—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ, —Ö–æ—á–∞ –≤—ñ–Ω –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º HTTP.

–ü–æ—à–∏—Ä–µ–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ –º–∞—Ç–∏ –æ–¥–Ω—É –ø—Ä–æ–≥—Ä–∞–º—É/HTTP-—Å–µ—Ä–≤–µ—Ä, —â–æ –ø—Ä–∞—Ü—é—î –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ (–º–∞—à–∏–Ω—ñ, —Ö–æ—Å—Ç—ñ —Ç–æ—â–æ) —ñ –∫–µ—Ä—É—î –≤—Å—ñ–º–∞ —á–∞—Å—Ç–∏–Ω–∞–º–∏ HTTPS: –ø—Ä–∏–π–º–∞—î –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ HTTPS-–∑–∞–ø–∏—Ç–∏, –Ω–∞–¥—Å–∏–ª–∞—î —Ä–æ–∑—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ HTTP-–∑–∞–ø–∏—Ç–∏ –¥–æ —Ñ–∞–∫—Ç–∏—á–Ω–æ–≥–æ HTTP-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —â–æ –ø—Ä–∞—Ü—é—î –Ω–∞ —Ç–æ–º—É –∂ —Å–µ—Ä–≤–µ—Ä—ñ (—É –Ω–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ FastAPI), –æ—Ç—Ä–∏–º—É—î HTTP-–≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —à–∏—Ñ—Ä—É—î —ó—ó –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ HTTPS —ñ –Ω–∞–¥—Å–∏–ª–∞—î —ó—ó –Ω–∞–∑–∞–¥ –∫–ª—ñ—î–Ω—Ç—É —á–µ—Ä–µ–∑ HTTPS. –¢–∞–∫–∏–π —Å–µ—Ä–≤–µ—Ä —á–∞—Å—Ç–æ –Ω–∞–∑–∏–≤–∞—é—Ç—å <a href="https://en.wikipedia.org/wiki/TLS_termination_proxy" class="external-link" target="_blank"><strong>TLS Termination Proxy</strong></a>.

–î–µ—è–∫—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏, —è–∫—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —è–∫ TLS Termination Proxy:

* Traefik (—Ç–∞–∫–æ–∂ –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤)
* Caddy (—Ç–∞–∫–æ–∂ –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤)
* Nginx
* HAProxy

## Let's Encrypt { #lets-encrypt }

–î–æ Let's Encrypt —Ü—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ HTTPS –ø—Ä–æ–¥–∞–≤–∞–ª–∏—Å—è –¥–æ–≤—ñ—Ä–µ–Ω–∏–º–∏ —Ç—Ä–µ—Ç—ñ–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏.

–ü—Ä–æ—Ü–µ—Å –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –∑ —Ç–∞–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ –±—É–≤ –≥—Ä–æ–º—ñ–∑–¥–∫–∏–º, –≤–∏–º–∞–≥–∞–≤ —á–∏–º–∞–ª–æ –ø–∞–ø–µ—Ä–æ–≤–æ—ó —Ä–æ–±–æ—Ç–∏, –∞ —Å–∞–º—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –±—É–ª–∏ –¥–æ–≤–æ–ª—ñ –¥–æ—Ä–æ–≥–∏–º–∏.

–ê–ª–µ –ø–æ—Ç—ñ–º –∑'—è–≤–∏–≤—Å—è –ø—Ä–æ—î–∫—Ç <a href="https://letsencrypt.org/" class="external-link" target="_blank">Let's Encrypt</a>.

–¶–µ –ø—Ä–æ—î–∫—Ç Linux Foundation. –í—ñ–Ω –Ω–∞–¥–∞—î —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ HTTPS –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ, –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π —Å–ø–æ—Å—ñ–±. –¶—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —É—Å—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –±–µ–∑–ø–µ–∫–∏ —ñ —î –∫–æ—Ä–æ—Ç–∫–æ—Å—Ç—Ä–æ–∫–æ–≤–∏–º–∏ (–±–ª–∏–∑—å–∫–æ 3 –º—ñ—Å—è—Ü—ñ–≤), —Ç–æ–∂ –±–µ–∑–ø–µ–∫–∞ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –∫—Ä–∞—â–∞ –∑–∞–≤–¥—è–∫–∏ –∑–º–µ–Ω—à–µ–Ω—ñ–π —Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ –∂–∏—Ç—Ç—è.

–î–æ–º–µ–Ω–∏ –±–µ–∑–ø–µ—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è, –∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ. –¶–µ —Ç–∞–∫–æ–∂ –¥–æ–∑–≤–æ–ª—è—î –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É–≤–∞—Ç–∏ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü–∏—Ö —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤.

–Ü–¥–µ—è –ø–æ–ª—è–≥–∞—î –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∞ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü–∏—Ö —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤, —â–æ–± –≤–∏ –º–æ–≥–ª–∏ –º–∞—Ç–∏ –±–µ–∑–ø–µ—á–Ω–∏–π HTTPS –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ —Ç–∞ –Ω–∞–∑–∞–≤–∂–¥–∏.

## HTTPS –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ { #https-for-developers }

–û—Å—å –ø—Ä–∏–∫–ª–∞–¥ —Ç–æ–≥–æ, —è–∫ –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ HTTPS API, –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º, –∑–æ—Å–µ—Ä–µ–¥–∂—É—é—á–∏—Å—å –ø–µ—Ä–µ–≤–∞–∂–Ω–æ –Ω–∞ —ñ–¥–µ—è—Ö, –≤–∞–∂–ª–∏–≤–∏—Ö –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤.

### –î–æ–º–µ–Ω–Ω–µ —ñ–º'—è { #domain-name }

–ô–º–æ–≤—ñ—Ä–Ω–æ, –≤—Å–µ –ø–æ—á–Ω–µ—Ç—å—Å—è –∑ —Ç–æ–≥–æ, —â–æ –≤–∏ –ø—Ä–∏–¥–±–∞—î—Ç–µ —è–∫–µ—Å—å –¥–æ–º–µ–Ω–Ω–µ —ñ–º'—è. –ü–æ—Ç—ñ–º –≤–∏ –Ω–∞–ª–∞—à—Ç—É—î—Ç–µ –π–æ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ DNS (–º–æ–∂–ª–∏–≤–æ, —É –≤–∞—à–æ–≥–æ –∂ —Ö–º–∞—Ä–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).

–í–∏, —Å–∫–æ—Ä—ñ—à –∑–∞ –≤—Å–µ, –æ—Ç—Ä–∏–º–∞—î—Ç–µ —Ö–º–∞—Ä–Ω–∏–π —Å–µ—Ä–≤–µ—Ä (–≤—ñ—Ä—Ç—É–∞–ª—å–Ω—É –º–∞—à–∏–Ω—É) –∞–±–æ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ, —ñ –≤—ñ–Ω –º–∞—Ç–∏–º–µ <dfn title="–ó —á–∞—Å–æ–º –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è. –ù–µ –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π.">—Ñ—ñ–∫—Å–æ–≤–∞–Ω—É</dfn> –ø—É–±–ª—ñ—á–Ω—É IP-–∞–¥—Ä–µ—Å—É.

–ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ(–∞—Ö) DNS –≤–∏ –Ω–∞–ª–∞—à—Ç—É—î—Ç–µ –∑–∞–ø–∏—Å (¬´`A record`¬ª), —â–æ–± —Å–ø—Ä—è–º—É–≤–∞—Ç–∏ –≤–∞—à –¥–æ–º–µ–Ω –Ω–∞ –ø—É–±–ª—ñ—á–Ω—É IP-–∞–¥—Ä–µ—Å—É –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

–ô–º–æ–≤—ñ—Ä–Ω–æ, –≤–∏ –∑—Ä–æ–±–∏—Ç–µ —Ü–µ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑, —É–ø–µ—Ä—à–µ, –∫–æ–ª–∏ –≤—Å–µ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ—Ç–µ.

/// tip | –ü–æ—Ä–∞–¥–∞

–ß–∞—Å—Ç–∏–Ω–∞ –ø—Ä–æ –¥–æ–º–µ–Ω–Ω–µ —ñ–º'—è –∑–Ω–∞—á–Ω–æ —Ä–∞–Ω—ñ—à–µ –∑–∞ HTTPS, –∞–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –≤—Å–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –¥–æ–º–µ–Ω—É —Ç–∞ IP-–∞–¥—Ä–µ—Å–∏, –≤–∞—Ä—Ç–æ –∑–≥–∞–¥–∞—Ç–∏ —Ü–µ —Ç—É—Ç.

///

### DNS { #dns }

–¢–µ–ø–µ—Ä –∑–æ—Å–µ—Ä–µ–¥—å–º–æ—Å—è –Ω–∞ –≤—Å—ñ—Ö –≤–ª–∞—Å–Ω–µ —á–∞—Å—Ç–∏–Ω–∞—Ö HTTPS.

–°–ø–æ—á–∞—Ç–∫—É –±—Ä–∞—É–∑–µ—Ä –∑–≤–µ—Ä–Ω–µ—Ç—å—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä—ñ–≤ DNS, —â–æ–± –¥—ñ–∑–Ω–∞—Ç–∏—Å—è, —è–∫–∞ IP-–∞–¥—Ä–µ—Å–∞ –¥–ª—è –¥–æ–º–µ–Ω—É, —É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É `someapp.example.com`.

–°–µ—Ä–≤–µ—Ä–∏ DNS –ø–æ–≤—ñ–¥–æ–º–ª—è—Ç—å –±—Ä–∞—É–∑–µ—Ä—É –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É IP-–∞–¥—Ä–µ—Å—É. –¶–µ –±—É–¥–µ –ø—É–±–ª—ñ—á–Ω–∞ IP-–∞–¥—Ä–µ—Å–∞, —è–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–∞—à —Å–µ—Ä–≤–µ—Ä —ñ —è–∫—É –≤–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö DNS.

<img src="/img/deployment/https/https01.drawio.svg">

### –ü–æ—á–∞—Ç–æ–∫ TLS —Ä—É–∫–æ—Å—Ç–∏—Å–∫–∞–Ω–Ω—è { #tls-handshake-start }

–ü–æ—Ç—ñ–º –±—Ä–∞—É–∑–µ—Ä –∑–≤'—è–∂–µ—Ç—å—Å—è –∑ —Ü—ñ—î—é IP-–∞–¥—Ä–µ—Å–æ—é –Ω–∞ –ø–æ—Ä—Ç—É 443 (–ø–æ—Ä—Ç HTTPS).

–ü–µ—Ä—à–∞ —á–∞—Å—Ç–∏–Ω–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó - —Ü–µ –ø—Ä–æ—Å—Ç–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è –º—ñ–∂ –∫–ª—ñ—î–Ω—Ç–æ–º —ñ —Å–µ—Ä–≤–µ—Ä–æ–º —Ç–∞ —É–∑–≥–æ–¥–∂–µ–Ω–Ω—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏—Ö –∫–ª—é—á—ñ–≤ —Ç–æ—â–æ.

<img src="/img/deployment/https/https02.drawio.svg">

–¶—è –≤–∑–∞—î–º–æ–¥—ñ—è –º—ñ–∂ –∫–ª—ñ—î–Ω—Ç–æ–º —ñ —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω–Ω—è TLS –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è TLS —Ä—É–∫–æ—Å—Ç–∏—Å–∫–∞–Ω–Ω—è–º.

### TLS —ñ–∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º SNI { #tls-with-sni-extension }

–õ–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –º–æ–∂–µ —Å–ª—É—Ö–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø–æ—Ä—Ç –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ–π IP-–∞–¥—Ä–µ—Å—ñ. –Ü–Ω—à—ñ –ø—Ä–æ—Ü–µ—Å–∏ –º–æ–∂—É—Ç—å —Å–ª—É—Ö–∞—Ç–∏ —ñ–Ω—à—ñ –ø–æ—Ä—Ç–∏ –Ω–∞ —Ç—ñ–π —Å–∞–º—ñ–π IP-–∞–¥—Ä–µ—Å—ñ, –∞–ª–µ –ª–∏—à–µ –æ–¥–∏–Ω –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó IP-–∞–¥—Ä–µ—Å–∏ —Ç–∞ –ø–æ—Ä—Ç—É.

TLS (HTTPS) –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ø–æ—Ä—Ç `443`. –û—Ç–∂–µ, —Ü–µ –ø–æ—Ä—Ç, —è–∫–∏–π –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω.

–û—Å–∫—ñ–ª—å–∫–∏ –ª–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –º–æ–∂–µ —Å–ª—É—Ö–∞—Ç–∏ —Ü–µ–π –ø–æ—Ä—Ç, –ø—Ä–æ—Ü–µ—Å–æ–º, —â–æ —Ä–æ–±–∏—Ç–∏–º–µ —Ü–µ, –±—É–¥–µ TLS Termination Proxy.

TLS Termination Proxy –º–∞—Ç–∏–º–µ –¥–æ—Å—Ç—É–ø –¥–æ –æ–¥–Ω–æ–≥–æ –∞–±–æ –∫—ñ–ª—å–∫–æ—Ö —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ TLS (—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ HTTPS).

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–µ –≤–∏—â–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è SNI, TLS Termination Proxy –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å, —è–∫–∏–π —ñ–∑ –Ω–∞—è–≤–Ω–∏—Ö —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ TLS (HTTPS) —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–ª—è —Ü—å–æ–≥–æ –∑'—î–¥–Ω–∞–Ω–Ω—è, –æ–±—Ä–∞–≤—à–∏ —Ç–æ–π, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –¥–æ–º–µ–Ω—É, –æ—á—ñ–∫—É–≤–∞–Ω–æ–º—É –∫–ª—ñ—î–Ω—Ç–æ–º.

–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –¥–ª—è `someapp.example.com`.

<img src="/img/deployment/https/https03.drawio.svg">

–ö–ª—ñ—î–Ω—Ç —É–∂–µ –¥–æ–≤—ñ—Ä—è—î —Å—É—Ç–Ω–æ—Å—Ç—ñ, —è–∫–∞ –≤–∏–¥–∞–ª–∞ —Ü–µ–π —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç TLS (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É Let's Encrypt, –∞–ª–µ –ø—Ä–æ —Ü–µ –∑–≥–æ–¥–æ–º), —Ç–æ–∂ –≤—ñ–Ω –º–æ–∂–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –¥—ñ–π—Å–Ω–∏–π.

–ü–æ—Ç—ñ–º, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç, –∫–ª—ñ—î–Ω—Ç —ñ TLS Termination Proxy —É–∑–≥–æ–¥–∂—É—é—Ç—å, —è–∫ —à–∏—Ñ—Ä—É–≤–∞—Ç–∏ —Ä–µ—à—Ç—É TCP-–∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó. –ù–∞ —Ü—å–æ–º—É —á–∞—Å—Ç–∏–Ω–∞ TLS —Ä—É–∫–æ—Å—Ç–∏—Å–∫–∞–Ω–Ω—è –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è.

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –∫–ª—ñ—î–Ω—Ç —ñ —Å–µ—Ä–≤–µ—Ä –º–∞—é—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–µ TCP-–∑'—î–¥–Ω–∞–Ω–Ω—è - —Å–∞–º–µ —Ü–µ –Ω–∞–¥–∞—î TLS. –Ü —Ç–æ–¥—ñ –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ü–µ –∑'—î–¥–Ω–∞–Ω–Ω—è, —â–æ–± –ø–æ—á–∞—Ç–∏ –≤–ª–∞—Å–Ω–µ HTTP-–∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é.

–Ü —Ü–µ —ñ —î HTTPS: —Ü–µ –∑–≤–∏—á–∞–π–Ω–∏–π HTTP —É—Å–µ—Ä–µ–¥–∏–Ω—ñ –∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ TLS-–∑'—î–¥–Ω–∞–Ω–Ω—è –∑–∞–º—ñ—Å—Ç—å —á–∏—Å—Ç–æ–≥–æ (–Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ–≥–æ) TCP-–∑'—î–¥–Ω–∞–Ω–Ω—è.

/// tip | –ü–æ—Ä–∞–¥–∞

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—ó –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ TCP, –∞ –Ω–µ –Ω–∞ —Ä—ñ–≤–Ω—ñ HTTP.

///

### HTTPS-–∑–∞–ø–∏—Ç { #https-request }

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –∫–ª—ñ—î–Ω—Ç —ñ —Å–µ—Ä–≤–µ—Ä (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –±—Ä–∞—É–∑–µ—Ä —ñ TLS Termination Proxy) –º–∞—é—Ç—å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–µ TCP-–∑'—î–¥–Ω–∞–Ω–Ω—è, –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –ø–æ—á–∞—Ç–∏ HTTP-–∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é.

–û—Ç–∂–µ, –∫–ª—ñ—î–Ω—Ç –Ω–∞–¥—Å–∏–ª–∞—î HTTPS-–∑–∞–ø–∏—Ç. –¶–µ –ø—Ä–æ—Å—Ç–æ HTTP-–∑–∞–ø–∏—Ç —á–µ—Ä–µ–∑ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–µ TLS-–∑'—î–¥–Ω–∞–Ω–Ω—è.

<img src="/img/deployment/https/https04.drawio.svg">

### –†–æ–∑—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É { #decrypt-the-request }

TLS Termination Proxy –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î —É–∑–≥–æ–¥–∂–µ–Ω–µ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è, —â–æ–± —Ä–æ–∑—à–∏—Ñ—Ä—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç, —ñ –ø–µ—Ä–µ–¥–∞—Å—Ç—å –∑–≤–∏—á–∞–π–Ω–∏–π (—Ä–æ–∑—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π) HTTP-–∑–∞–ø–∏—Ç –ø—Ä–æ—Ü–µ—Å—É, —â–æ –∑–∞–ø—É—Å–∫–∞—î –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–æ—Ü–µ—Å—É –∑ Uvicorn, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—î –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ FastAPI).

<img src="/img/deployment/https/https05.drawio.svg">

### HTTP-–≤—ñ–¥–ø–æ–≤—ñ–¥—å { #http-response }

–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –æ–±—Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç —ñ –Ω–∞–¥—ñ—à–ª–µ –∑–≤–∏—á–∞–π–Ω—É (–Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—É) HTTP-–≤—ñ–¥–ø–æ–≤—ñ–¥—å TLS Termination Proxy.

<img src="/img/deployment/https/https06.drawio.svg">

### HTTPS-–≤—ñ–¥–ø–æ–≤—ñ–¥—å { #https-response }

–ü–æ—Ç—ñ–º TLS Termination Proxy –∑–∞—à–∏—Ñ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ —É–∑–≥–æ–¥–∂–µ–Ω—É –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—é (—â–æ –ø–æ—á–∞–ª–∞—Å—è —ñ–∑ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ –¥–ª—è `someapp.example.com`), —ñ –Ω–∞–¥—ñ—à–ª–µ —ó—ó –Ω–∞–∑–∞–¥ —É –±—Ä–∞—É–∑–µ—Ä.

–î–∞–ª—ñ –±—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥—ñ–π—Å–Ω–∞ –π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏–º –∫–ª—é—á–µ–º —Ç–æ—â–æ. –ü–æ—Ç—ñ–º –≤—ñ–Ω —Ä–æ–∑—à–∏—Ñ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å —ñ –æ–±—Ä–æ–±–∏—Ç—å —ó—ó.

<img src="/img/deployment/https/https07.drawio.svg">

–ö–ª—ñ—î–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä) –∑–Ω–∞—Ç–∏–º–µ, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞–¥—Ö–æ–¥–∏—Ç—å –≤—ñ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, —Ç–æ–º—É —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É–∑–≥–æ–¥–∂–µ–Ω–∞ —Ä–∞–Ω—ñ—à–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—è –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ HTTPS.

### –ö—ñ–ª—å–∫–∞ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ { #multiple-applications }

–ù–∞ —Ç–æ–º—É —Å–∞–º–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ (–∞–±–æ —Å–µ—Ä–≤–µ—Ä–∞—Ö) –º–æ–∂–µ –±—É—Ç–∏ –∫—ñ–ª—å–∫–∞ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —ñ–Ω—à—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ API –∞–±–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö.

–õ–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É IP-–∞–¥—Ä–µ—Å—É —ñ –ø–æ—Ä—Ç (TLS Termination Proxy —É –Ω–∞—à–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ), –∞–ª–µ —ñ–Ω—à—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏/–ø—Ä–æ—Ü–µ—Å–∏ —Ç–∞–∫–æ–∂ –º–æ–∂—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ(–∞—Ö), –¥–æ–∫–∏ –≤–æ–Ω–∏ –Ω–µ –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ç—É —Å–∞–º—É –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é –ø—É–±–ª—ñ—á–Ω–æ—ó IP-–∞–¥—Ä–µ—Å–∏ –π –ø–æ—Ä—Ç—É.

<img src="/img/deployment/https/https08.drawio.svg">

–¢–∞–∫–∏–º —á–∏–Ω–æ–º, TLS Termination Proxy –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ HTTPS —ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –¥–ª—è –∫—ñ–ª—å–∫–æ—Ö –¥–æ–º–µ–Ω—ñ–≤, –¥–ª—è –∫—ñ–ª—å–∫–æ—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤, –∞ –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –≤ –∫–æ–∂–Ω–æ–º—É –≤–∏–ø–∞–¥–∫—É.

### –ü–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ { #certificate-renewal }

–£ –ø–µ–≤–Ω–∏–π –º–æ–º–µ–Ω—Ç —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É —Å—Ç—Ä–æ–∫ –¥—ñ—ó –∫–æ–∂–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ —Å–ø–ª–∏–≤–µ (–ø—Ä–∏–±–ª–∏–∑–Ω–æ —á–µ—Ä–µ–∑ 3 –º—ñ—Å—è—Ü—ñ –ø—ñ—Å–ª—è –π–æ–≥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è).

–ü–æ—Ç—ñ–º —ñ–Ω—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ (–≤ –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö —Ü–µ —ñ–Ω—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞, –∞ –≤ –¥–µ—è–∫–∏—Ö - —Ç–æ–π —Å–∞–º–∏–π TLS Termination Proxy) –∑–≤'—è–∂–µ—Ç—å—Å—è –∑ Let's Encrypt —ñ –ø–æ–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç(–∏).

<img src="/img/deployment/https/https.drawio.svg">

–°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ TLS –ø–æ–≤'—è–∑–∞–Ω—ñ –∑ –¥–æ–º–µ–Ω–Ω–∏–º —ñ–º–µ–Ω–µ–º, –∞ –Ω–µ –∑ IP-–∞–¥—Ä–µ—Å–æ—é.

–¢–æ–º—É, —â–æ–± –ø–æ–Ω–æ–≤–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏, –ø—Ä–æ–≥—Ä–∞–º–∞ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—î –¥–æ–≤–µ—Å—Ç–∏ –∞–≤—Ç–æ—Ä–∏—Ç–µ—Ç—É (Let's Encrypt), —â–æ –≤–æ–Ω–∞ —Å–ø—Ä–∞–≤–¥—ñ ¬´–≤–æ–ª–æ–¥—ñ—î¬ª —ñ –∫–æ–Ω—Ç—Ä–æ–ª—é—î —Ü–µ–π –¥–æ–º–µ–Ω.

–©–æ–± –∑—Ä–æ–±–∏—Ç–∏ —Ü–µ –π –∑–∞–¥–æ–≤–æ–ª—å–Ω–∏—Ç–∏ —Ä—ñ–∑–Ω—ñ –ø–æ—Ç—Ä–µ–±–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤, —î –∫—ñ–ª—å–∫–∞ —Å–ø–æ—Å–æ–±—ñ–≤. –î–µ—è–∫—ñ –ø–æ–ø—É–ª—è—Ä–Ω—ñ:

* –ó–º—ñ–Ω–∏—Ç–∏ –¥–µ—è–∫—ñ –∑–∞–ø–∏—Å–∏ DNS.
    * –î–ª—è —Ü—å–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–∞ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—î –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ DNS, —Ç–æ–∂ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, —è–∫–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ DNS –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ, —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –∞–±–æ –Ω–µ –±—É—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç–æ–º.
* –ó–∞–ø—É—Å—Ç–∏—Ç–∏—Å—è —è–∫ —Å–µ—Ä–≤–µ—Ä (–ø—Ä–∏–Ω–∞–π–º–Ω—ñ –ø—ñ–¥ —á–∞—Å –ø—Ä–æ—Ü–µ—Å—É –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞) –Ω–∞ –ø—É–±–ª—ñ—á–Ω—ñ–π IP-–∞–¥—Ä–µ—Å—ñ, –ø–æ–≤'—è–∑–∞–Ω—ñ–π —ñ–∑ –¥–æ–º–µ–Ω–æ–º.
    * –Ø–∫ –º–∏ –∫–∞–∑–∞–ª–∏ –≤–∏—â–µ, –ª–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –º–æ–∂–µ —Å–ª—É—Ö–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É IP-–∞–¥—Ä–µ—Å—É —Ç–∞ –ø–æ—Ä—Ç.
    * –¶–µ –æ–¥–Ω–∞ –∑ –ø—Ä–∏—á–∏–Ω, —á–æ–º—É –¥—É–∂–µ –∑—Ä—É—á–Ω–æ, –∫–æ–ª–∏ —Ç–æ–π —Å–∞–º–∏–π TLS Termination Proxy —Ç–∞–∫–æ–∂ –∑–∞–π–º–∞—î—Ç—å—Å—è –ø—Ä–æ—Ü–µ—Å–æ–º –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤.
    * –Ü–Ω–∞–∫—à–µ –≤–∞–º, –º–æ–∂–ª–∏–≤–æ, –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –Ω–∞ –º–∏—Ç—å –∑—É–ø–∏–Ω–∏—Ç–∏ TLS Termination Proxy, –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏, –ø–æ—Ç—ñ–º –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —ó—Ö —É TLS Termination Proxy —ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ TLS Termination Proxy. –¶–µ –Ω–µ—ñ–¥–µ–∞–ª—å–Ω–æ, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∞—à—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏ –±—É–¥—É—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ñ –ø—ñ–¥ —á–∞—Å –≤–∏–º–∫–Ω–µ–Ω–Ω—è TLS Termination Proxy.

–£–≤–µ—Å—å —Ü–µ–π –ø—Ä–æ—Ü–µ—Å –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –∑ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è–º –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, - –æ–¥–Ω–∞ –∑ –≥–æ–ª–æ–≤–Ω–∏—Ö –ø—Ä–∏—á–∏–Ω, —á–æ–º—É –≤–∏ –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç—ñ—Ç–∏ –º–∞—Ç–∏ –æ–∫—Ä–µ–º—É —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ HTTPS –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é TLS Termination Proxy –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ, —â–æ–± –ø—Ä–æ—Å—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ TLS –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ —Å–µ—Ä–≤–µ—Ä–æ–º –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Uvicorn).

## –ù–∞–ø—Ä–∞–≤–ª–µ–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ–∫—Å—ñ { #proxy-forwarded-headers }

–ö–æ–ª–∏ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ø—Ä–æ–∫—Å—ñ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ HTTPS, –≤–∞—à —Å–µ—Ä–≤–µ—Ä –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Uvicorn —á–µ—Ä–µ–∑ FastAPI CLI) –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞—î –ø—Ä–æ –ø—Ä–æ—Ü–µ—Å HTTPS, –≤—ñ–Ω —Å–ø—ñ–ª–∫—É—î—Ç—å—Å—è –∑–≤–∏—á–∞–π–Ω–∏–º HTTP —ñ–∑ TLS Termination Proxy.

–¶–µ–π –ø—Ä–æ–∫—Å—ñ –∑–∞–∑–≤–∏—á–∞–π –¥–∏–Ω–∞–º—ñ—á–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –¥–µ—è–∫—ñ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ—é –∑–∞–ø–∏—Ç—É —Å–µ—Ä–≤–µ—Ä—É –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —â–æ–± –¥–∞—Ç–∏ –π–æ–º—É –∑–Ω–∞—Ç–∏, —â–æ –∑–∞–ø–∏—Ç –Ω–∞–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –ø—Ä–æ–∫—Å—ñ.

/// note | –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

–ó–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ–∫—Å—ñ:

* <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-For" class="external-link" target="_blank">X-Forwarded-For</a>
* <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-Proto" class="external-link" target="_blank">X-Forwarded-Proto</a>
* <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-Host" class="external-link" target="_blank">X-Forwarded-Host</a>

///

–í—Ç—ñ–º, –æ—Å–∫—ñ–ª—å–∫–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –Ω–µ –∑–Ω–∞—î, —â–æ –≤—ñ–Ω —Å—Ç–æ—ó—Ç—å –∑–∞ –¥–æ–≤—ñ—Ä–µ–Ω–∏–º –ø—Ä–æ–∫—Å—ñ, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤—ñ–Ω –Ω–µ –¥–æ–≤—ñ—Ä—è—Ç–∏–º–µ —Ü–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∞–º.

–ê–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Å–µ—Ä–≤–µ—Ä –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —â–æ–± –¥–æ–≤—ñ—Ä—è—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∞–º, –Ω–∞–¥—ñ—Å–ª–∞–Ω–∏–º –ø—Ä–æ–∫—Å—ñ. –Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ FastAPI CLI, –≤–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏—Å—è –∫—É—Ä—Å–∏–≤–Ω–æ—é *–æ–ø—Ü—ñ—î—é CLI* `--forwarded-allow-ips`, —â–æ–± –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏, –∑ —è–∫–∏—Ö IP-–∞–¥—Ä–µ—Å —Å–ª—ñ–¥ –¥–æ–≤—ñ—Ä—è—Ç–∏ —Ü–∏–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∞–º.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –æ—Ç—Ä–∏–º—É—î –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—é –ª–∏—à–µ –≤—ñ–¥ –¥–æ–≤—ñ—Ä–µ–Ω–æ–≥–æ –ø—Ä–æ–∫—Å—ñ, –≤–∏ –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `--forwarded-allow-ips="*"`, —â–æ–± –¥–æ–≤—ñ—Ä—è—Ç–∏ –≤—Å—ñ–º –≤—Ö—ñ–¥–Ω–∏–º IP-–∞–¥—Ä–µ—Å–∞–º, –æ—Å–∫—ñ–ª—å–∫–∏ –≤—ñ–Ω –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏–º–µ –∑–∞–ø–∏—Ç–∏ –ª–∏—à–µ –∑ —Ç—ñ—î—ó IP-–∞–¥—Ä–µ—Å–∏, —è–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø—Ä–æ–∫—Å—ñ.

–¢–∞–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∑–º–æ–∂–µ –∑–Ω–∞—Ç–∏ —Å–≤–æ—é –ø—É–±–ª—ñ—á–Ω—É URL-–∞–¥—Ä–µ—Å—É, —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤—ñ–Ω HTTPS, –¥–æ–º–µ–Ω —Ç–æ—â–æ.

–¶–µ –±—É–¥–µ –∫–æ—Ä–∏—Å–Ω–æ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –¥–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—å.

/// tip | –ü–æ—Ä–∞–¥–∞

–í–∏ –º–æ–∂–µ—Ç–µ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è –±—ñ–ª—å—à–µ –ø—Ä–æ —Ü–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó [–ó–∞ –ø—Ä–æ–∫—Å—ñ - –£–≤—ñ–º–∫–Ω—É—Ç–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ñ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ–∫—Å—ñ](../advanced/behind-a-proxy.md#enable-proxy-forwarded-headers){.internal-link target=_blank}

///

## –ü—ñ–¥—Å—É–º–æ–∫ { #recap }

–ù–∞—è–≤–Ω—ñ—Å—Ç—å HTTPS –¥—É–∂–µ –≤–∞–∂–ª–∏–≤–∞ —ñ –≤ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ –∫—Ä–∏—Ç–∏—á–Ω–∞. –ë—ñ–ª—å—à—ñ—Å—Ç—å –∑—É—Å–∏–ª—å, —è–∫—ñ –≤–∞–º —è–∫ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—É –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –¥–æ–∫–ª–∞—Å—Ç–∏ –Ω–∞–≤–∫–æ–ª–æ HTTPS, –ø–æ–ª—è–≥–∞—é—Ç—å –ª–∏—à–µ –≤ —Ä–æ–∑—É–º—ñ–Ω–Ω—ñ —Ü–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü—ñ–π —ñ —Ç–æ–≥–æ, —è–∫ –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å.

–ê–ª–µ —è–∫ —Ç—ñ–ª—å–∫–∏ –≤–∏ –∑–Ω–∞—î—Ç–µ –±–∞–∑–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ HTTPS –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤, –≤–∏ –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –∫–æ–º–±—ñ–Ω—É–≤–∞—Ç–∏ –π –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —â–æ–± –∫–µ—Ä—É–≤–∞—Ç–∏ –≤—Å—ñ–º –ø—Ä–æ—Å—Ç–æ.

–£ –¥–µ—è–∫–∏—Ö –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª–∞—Ö —è –ø–æ–∫–∞–∂—É –∫—ñ–ª—å–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è HTTPS –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ FastAPI. üîí

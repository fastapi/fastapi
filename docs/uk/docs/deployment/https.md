# –ü—Ä–æ HTTPS { #about-https }

–õ–µ–≥–∫–æ –ø—Ä–∏–ø—É—Å—Ç–∏—Ç–∏, —â–æ HTTPS ‚Äî —Ü–µ —â–æ—Å—å, —â–æ –ø—Ä–æ—Å—Ç–æ ¬´—É–≤—ñ–º–∫–Ω–µ–Ω–æ¬ª –∞–±–æ –Ω—ñ.

–ê–ª–µ –≤—Å–µ –∑–Ω–∞—á–Ω–æ —Å–∫–ª–∞–¥–Ω—ñ—à–µ.

/// tip | –ü–æ—Ä–∞–¥–∞

–Ø–∫—â–æ –≤–∏ –ø–æ—Å–ø—ñ—à–∞—î—Ç–µ –∞–±–æ –≤–∞–º –±–∞–π–¥—É–∂–µ, –ø–µ—Ä–µ—Ö–æ–¥—å—Ç–µ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª—ñ–≤ —ñ–∑ –ø–æ–∫—Ä–æ–∫–æ–≤–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏, —è–∫ —É—Å–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏.

///

–©–æ–± **–≤–∏–≤—á–∏—Ç–∏ –æ—Å–Ω–æ–≤–∏ HTTPS** –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –ø–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ <a href="https://howhttps.works/" class="external-link" target="_blank">https://howhttps.works/</a>.

–ê —Ç–µ–ø–µ—Ä, –∑ **—Ç–æ—á–∫–∏ –∑–æ—Ä—É —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞**, –æ—Å—å –∫—ñ–ª—å–∫–∞ —Ä–µ—á–µ–π, —è–∫—ñ –≤–∞—Ä—Ç–æ –ø–∞–º‚Äô—è—Ç–∞—Ç–∏, –¥—É–º–∞—é—á–∏ –ø—Ä–æ HTTPS:

* –î–ª—è HTTPS **—Å–µ—Ä–≤–µ—Ä** –º–∞—î **–º–∞—Ç–∏ ¬´—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏¬ª**, –æ—Ç—Ä–∏–º–∞–Ω—ñ –≤—ñ–¥ **—Ç—Ä–µ—Ç—å–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏**.
    * –ù–∞—Å–ø—Ä–∞–≤–¥—ñ —Ü—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ **–æ—Ç—Ä–∏–º—É—é—Ç—å** —É —Ç—Ä–µ—Ç—å–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏, –∞ –Ω–µ ¬´–≥–µ–Ω–µ—Ä—É—é—Ç—å¬ª.
* –°–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –º–∞—é—Ç—å **—Å—Ç—Ä–æ–∫ –¥—ñ—ó**.
    * –í–æ–Ω–∏ **–∑–∞–∫—ñ–Ω—á—É—é—Ç—å—Å—è**.
    * –Ü —Ç–æ–¥—ñ —ó—Ö –ø–æ—Ç—Ä—ñ–±–Ω–æ **–ø–æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏**, **–æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –∑–Ω–æ–≤—É** —É —Ç—Ä–µ—Ç—å–æ—ó —Å—Ç–æ—Ä–æ–Ω–∏.
* –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞ **—Ä—ñ–≤–Ω—ñ TCP**.
    * –¶–µ –Ω–∞ –æ–¥–∏–Ω —Ä—ñ–≤–µ–Ω—å **–Ω–∏–∂—á–µ HTTP**.
    * –¢–æ–º—É –æ–±—Ä–æ–±–∫–∞ **—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ —ñ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è** –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è **–¥–æ HTTP**.
* **TCP –Ω–µ –∑–Ω–∞—î –ø—Ä–æ ¬´–¥–æ–º–µ–Ω–∏¬ª**. –õ–∏—à–µ –ø—Ä–æ IP-–∞–¥—Ä–µ—Å–∏.
    * –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –¥–æ–º–µ–Ω**, —è–∫–∏–π –∑–∞–ø–∏—Ç—É—é—Ç—å, –º—ñ—Å—Ç–∏—Ç—å—Å—è –≤ **–¥–∞–Ω–∏—Ö HTTP**.
* **HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏** ¬´–∑–∞—Å–≤—ñ–¥—á—É—é—Ç—å¬ª **–ø–µ–≤–Ω–∏–π –¥–æ–º–µ–Ω**, –∞–ª–µ –ø—Ä–æ—Ç–æ–∫–æ–ª —ñ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ TCP, **–¥–æ —Ç–æ–≥–æ —è–∫ —Å—Ç–∞–Ω–µ –≤—ñ–¥–æ–º–æ**, –∑ —è–∫–∏–º –¥–æ–º–µ–Ω–æ–º –º–∞—é—Ç—å —Å–ø—Ä–∞–≤—É.
* **–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º** —Ü–µ –æ–∑–Ω–∞—á–∞–ª–æ –±, —â–æ –≤–∏ –º–æ–∂–µ—Ç–µ –º–∞—Ç–∏ –ª–∏—à–µ **–æ–¥–∏–Ω HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –Ω–∞ –æ–¥–Ω—É IP-–∞–¥—Ä–µ—Å—É**.
    * –ù–µ–≤–∞–∂–ª–∏–≤–æ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –≤–µ–ª–∏–∫–∏–π –≤–∞—à —Å–µ—Ä–≤–µ—Ä –∞–±–æ –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –º–∞–ª–∏–º–∏ —î –æ–∫—Ä–µ–º—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏ –Ω–∞ –Ω—å–æ–º—É.
    * –û–¥–Ω–∞–∫ –¥–ª—è —Ü—å–æ–≥–æ —î **—Ä—ñ—à–µ–Ω–Ω—è**.
* –Ü—Å–Ω—É—î **—Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è** –ø—Ä–æ—Ç–æ–∫–æ–ª—É **TLS** (—è–∫–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –Ω–∞ —Ä—ñ–≤–Ω—ñ TCP, –¥–æ HTTP) –ø—ñ–¥ –Ω–∞–∑–≤–æ—é **<a href="https://en.wikipedia.org/wiki/Server_Name_Indication" class="external-link" target="_blank"><abbr title="Server Name Indication - –Ü–Ω–¥–∏–∫–∞—Ü—ñ—è —ñ–º–µ–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞">SNI</abbr></a>**.
    * –¶–µ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è SNI –¥–æ–∑–≤–æ–ª—è—î –æ–¥–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É (–∑ **–æ–¥–Ω—ñ—î—é IP-–∞–¥—Ä–µ—Å–æ—é**) –º–∞—Ç–∏ **–∫—ñ–ª—å–∫–∞ HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤** —ñ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞—Ç–∏ **–∫—ñ–ª—å–∫–∞ HTTPS-–¥–æ–º–µ–Ω—ñ–≤/–∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤**.
    * –©–æ–± —Ü–µ –ø—Ä–∞—Ü—é–≤–∞–ª–æ, **–æ–¥–∏–Ω** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–ø—Ä–æ–≥—Ä–∞–º–∞), —â–æ –ø—Ä–∞—Ü—é—î –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ —Ç–∞ —Å–ª—É—Ö–∞—î **–ø—É–±–ª—ñ—á–Ω—É IP-–∞–¥—Ä–µ—Å—É**, –º–∞—î –º–∞—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ **–≤—Å—ñ HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏**.
* **–ü—ñ—Å–ª—è** –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –ø—Ä–æ—Ç–æ–∫–æ–ª –≤–∑–∞—î–º–æ–¥—ñ—ó **–≤—Å–µ —â–µ HTTP**.
    * –í–º—ñ—Å—Ç **–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π**, –Ω–∞–≤—ñ—Ç—å –ø–æ–ø—Ä–∏ —Ç–µ, —â–æ –π–æ–≥–æ –Ω–∞–¥—Å–∏–ª–∞—é—Ç—å –∑–∞ **–ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º HTTP**.

–ü–æ—à–∏—Ä–µ–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞ ‚Äî –º–∞—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ (–º–∞—à–∏–Ω—ñ, —Ö–æ—Å—Ç—ñ —Ç–æ—â–æ) **–æ–¥–Ω—É –ø—Ä–æ–≥—Ä–∞–º—É/HTTP-—Å–µ—Ä–≤–µ—Ä**, —è–∫–∏–π **–∫–µ—Ä—É—î –≤—Å—ñ–º–∞ HTTPS-—á–∞—Å—Ç–∏–Ω–∞–º–∏**: –ø—Ä–∏–π–º–∞—î **–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ HTTPS-–∑–∞–ø–∏—Ç–∏**, –Ω–∞–¥—Å–∏–ª–∞—î **—Ä–æ–∑—à–∏—Ñ—Ä–æ–≤–∞–Ω—ñ HTTP-–∑–∞–ø–∏—Ç–∏** –¥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ HTTP-–∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, —â–æ –ø—Ä–∞—Ü—é—î –Ω–∞ —Ç–æ–º—É —Å–∞–º–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É ‚Äî –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ **FastAPI**), –±–µ—Ä–µ **HTTP-–≤—ñ–¥–ø–æ–≤—ñ–¥—å** –≤—ñ–¥ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, **—à–∏—Ñ—Ä—É—î —ó—ó** –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º **HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–æ–º** —ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –Ω–∞–∑–∞–¥ –∫–ª—ñ—î–Ω—Ç—É —á–µ—Ä–µ–∑ **HTTPS**. –¢–∞–∫–∏–π —Å–µ—Ä–≤–µ—Ä —á–∞—Å—Ç–æ –Ω–∞–∑–∏–≤–∞—é—Ç—å **<a href="https://en.wikipedia.org/wiki/TLS_termination_proxy" class="external-link" target="_blank">TLS Termination Proxy</a>**.

–î–µ—è–∫—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏, —è–∫—ñ –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —è–∫ TLS Termination Proxy:

* Traefik (—Ç–∞–∫–æ–∂ –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤)
* Caddy (—Ç–∞–∫–æ–∂ –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤)
* Nginx
* HAProxy

## Let's Encrypt { #lets-encrypt }

–î–æ Let's Encrypt —Ü—ñ **HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏** –ø—Ä–æ–¥–∞–≤–∞–ª–∏ –¥–æ–≤—ñ—Ä–µ–Ω—ñ —Ç—Ä–µ—Ç—ñ —Å—Ç–æ—Ä–æ–Ω–∏.

–ü—Ä–æ—Ü–µ—Å –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∞–∫–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ –±—É–≤ –Ω–µ–∑—Ä—É—á–Ω–∏–º, –≤–∏–º–∞–≥–∞–≤ —á–∏–º–∞–ª–æ –ø–∞–ø–µ—Ä–æ–≤–æ—ó —Ä–æ–±–æ—Ç–∏, –∞ —Å–∞–º—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –±—É–ª–∏ –¥–æ–≤–æ–ª—ñ –¥–æ—Ä–æ–≥–∏–º–∏.

–ê–ª–µ –ø–æ—Ç—ñ–º –∑‚Äô—è–≤–∏–≤—Å—è **<a href="https://letsencrypt.org/" class="external-link" target="_blank">Let's Encrypt</a>**.

–¶–µ –ø—Ä–æ—î–∫—Ç Linux Foundation. –í—ñ–Ω –Ω–∞–¥–∞—î **HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ**, –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∏–π —Å–ø–æ—Å—ñ–±. –¶—ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —É—Å—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ñ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –±–µ–∑–ø–µ–∫–∏ —Ç–∞ –º–∞—é—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ç—Ä–æ–∫ –¥—ñ—ó (–ø—Ä–∏–±–ª–∏–∑–Ω–æ 3 –º—ñ—Å—è—Ü—ñ), —Ç–æ–∂ **–±–µ–∑–ø–µ–∫–∞ —Ñ–∞–∫—Ç–∏—á–Ω–æ –∫—Ä–∞—â–∞** –∑–∞–≤–¥—è–∫–∏ —Å–∫–æ—Ä–æ—á–µ–Ω–æ–º—É —Ç–µ—Ä–º—ñ–Ω—É.

–î–æ–º–µ–Ω–∏ –Ω–∞–¥—ñ–π–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è, –∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ. –¶–µ —Ç–∞–∫–æ–∂ –¥–æ–∑–≤–æ–ª—è—î –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É–≤–∞—Ç–∏ —ó—Ö –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è.

–Ü–¥–µ—è –≤ —Ç–æ–º—É, —â–æ–± –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É–≤–∞—Ç–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Ç–∞ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü–∏—Ö —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤, –∞–±–∏ –≤–∏ –º–æ–≥–ª–∏ –º–∞—Ç–∏ **–±–µ–∑–ø–µ—á–Ω–∏–π HTTPS –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ –π –Ω–∞–∑–∞–≤–∂–¥–∏**.

## HTTPS –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ { #https-for-developers }

–û—Å—å –ø—Ä–∏–∫–ª–∞–¥ —Ç–æ–≥–æ, —è–∫ –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ HTTPS API ‚Äî –∫—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º, –∑ –∞–∫—Ü–µ–Ω—Ç–æ–º –Ω–∞ —ñ–¥–µ—ó, –≤–∞–∂–ª–∏–≤—ñ –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤.

### –î–æ–º–µ–Ω–Ω–µ —ñ–º‚Äô—è { #domain-name }

–Ü–º–æ–≤—ñ—Ä–Ω–æ, —É—Å–µ –ø–æ—á–Ω–µ—Ç—å—Å—è –∑ —Ç–æ–≥–æ, —â–æ –≤–∏ **–ø—Ä–∏–¥–±–∞—î—Ç–µ** **–¥–æ–º–µ–Ω–Ω–µ —ñ–º‚Äô—è**. –ü–æ—Ç—ñ–º –≤–∏ –Ω–∞–ª–∞—à—Ç—É—î—Ç–µ –π–æ–≥–æ –≤ DNS-—Å–µ—Ä–≤–µ—Ä—ñ (–º–æ–∂–ª–∏–≤–æ, —É —Ç–æ–≥–æ –∂ —Ö–º–∞—Ä–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).

–ô–º–æ–≤—ñ—Ä–Ω–æ, –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ —Ö–º–∞—Ä–Ω–∏–π —Å–µ—Ä–≤–µ—Ä (–≤—ñ—Ä—Ç—É–∞–ª—å–Ω—É –º–∞—à–∏–Ω—É) –∞–±–æ —â–æ—Å—å –ø–æ–¥—ñ–±–Ω–µ, —ñ –≤—ñ–Ω –º–∞—Ç–∏–º–µ <abbr title="That doesn't change - –¶–µ –Ω–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è">fixed</abbr> **–ø—É–±–ª—ñ—á–Ω—É IP-–∞–¥—Ä–µ—Å—É**.

–£ DNS-—Å–µ—Ä–≤–µ—Ä—ñ(–∞—Ö) –≤–∏ –Ω–∞–ª–∞—à—Ç—É—î—Ç–µ –∑–∞–ø–∏—Å ( ¬´`A record`¬ª), —â–æ–± –≤—ñ–Ω —Å–ø—Ä—è–º–æ–≤—É–≤–∞–≤ **–≤–∞—à –¥–æ–º–µ–Ω** –Ω–∞ –ø—É–±–ª—ñ—á–Ω—É **IP-–∞–¥—Ä–µ—Å—É –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**.

–®–≤–∏–¥—à–µ –∑–∞ –≤—Å–µ, –≤–∏ –∑—Ä–æ–±–∏—Ç–µ —Ü–µ –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî —É–ø–µ—Ä—à–µ, –∫–æ–ª–∏ –≤—Å–µ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ—Ç–µ.

/// tip | –ü–æ—Ä–∞–¥–∞

–ß–∞—Å—Ç–∏–Ω–∞ –ø—Ä–æ –¥–æ–º–µ–Ω–Ω–µ —ñ–º‚Äô—è –π–¥–µ –∑–∞–¥–æ–≤–≥–æ –¥–æ HTTPS, –∞–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –≤—Å–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –¥–æ–º–µ–Ω—É —Ç–∞ IP-–∞–¥—Ä–µ—Å–∏, –≤–∞—Ä—Ç–æ –∑–≥–∞–¥–∞—Ç–∏ –ø—Ä–æ —Ü–µ —Ç—É—Ç.

///

### DNS { #dns }

–¢–µ–ø–µ—Ä –∑–æ—Å–µ—Ä–µ–¥—å–º–æ—Å—è –Ω–∞ –≤–ª–∞—Å–Ω–µ HTTPS-—á–∞—Å—Ç–∏–Ω–∞—Ö.

–°–ø–æ—á–∞—Ç–∫—É –±—Ä–∞—É–∑–µ—Ä –∑–∞–ø–∏—Ç–∞—î –≤ **DNS-—Å–µ—Ä–≤–µ—Ä—ñ–≤**, —è–∫–∞ **IP-–∞–¥—Ä–µ—Å–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –¥–æ–º–µ–Ω—É**, —É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É `someapp.example.com`.

DNS-—Å–µ—Ä–≤–µ—Ä–∏ —Å–∫–∞–∂—É—Ç—å –±—Ä–∞—É–∑–µ—Ä—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É **IP-–∞–¥—Ä–µ—Å—É**. –¶–µ –±—É–¥–µ –ø—É–±–ª—ñ—á–Ω–∞ IP-–∞–¥—Ä–µ—Å–∞, —è–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–∞—à —Å–µ—Ä–≤–µ—Ä —ñ —è–∫—É –≤–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–ª–∏ –≤ DNS-—Å–µ—Ä–≤–µ—Ä–∞—Ö.

<img src="/img/deployment/https/https01.drawio.svg">

### –ü–æ—á–∞—Ç–æ–∫ TLS handshake { #tls-handshake-start }

–î–∞–ª—ñ –±—Ä–∞—É–∑–µ—Ä –∑–≤‚Äô—è–∂–µ—Ç—å—Å—è –∑ —Ü—ñ—î—é IP-–∞–¥—Ä–µ—Å–æ—é —á–µ—Ä–µ–∑ **–ø–æ—Ä—Ç 443** (–ø–æ—Ä—Ç HTTPS).

–ü–µ—Ä—à–∞ —á–∞—Å—Ç–∏–Ω–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó ‚Äî —Ü–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –º—ñ–∂ –∫–ª—ñ—î–Ω—Ç–æ–º —ñ —Å–µ—Ä–≤–µ—Ä–æ–º —Ç–∞ —É–∑–≥–æ–¥–∏—Ç–∏ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω—ñ –∫–ª—é—á—ñ —Ç–æ—â–æ.

<img src="/img/deployment/https/https02.drawio.svg">

–¶—è –≤–∑–∞—î–º–æ–¥—ñ—è –º—ñ–∂ –∫–ª—ñ—î–Ω—Ç–æ–º —ñ —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è TLS-–∑‚Äô—î–¥–Ω–∞–Ω–Ω—è –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **TLS handshake**.

### TLS —ñ–∑ —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è–º SNI { #tls-with-sni-extension }

**–õ–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å** –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –º–æ–∂–µ —Å–ª—É—Ö–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π **–ø–æ—Ä—Ç** –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ–π **IP-–∞–¥—Ä–µ—Å—ñ**. –ú–æ–∂—É—Ç—å –±—É—Ç–∏ —ñ–Ω—à—ñ –ø—Ä–æ—Ü–µ—Å–∏, —â–æ —Å–ª—É—Ö–∞—é—Ç—å —ñ–Ω—à—ñ –ø–æ—Ä—Ç–∏ –Ω–∞ —Ç—ñ–π —Å–∞–º—ñ–π IP-–∞–¥—Ä–µ—Å—ñ, –∞–ª–µ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—ó IP-–∞–¥—Ä–µ—Å–∏ –π –ø–æ—Ä—Ç—É ‚Äî –ª–∏—à–µ –æ–¥–∏–Ω.

TLS (HTTPS) –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –ø–æ—Ä—Ç `443`. –¢–æ–∂ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Å–∞–º–µ –≤—ñ–Ω.

–û—Å–∫—ñ–ª—å–∫–∏ –ª–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –º–æ–∂–µ —Å–ª—É—Ö–∞—Ç–∏ —Ü–µ–π –ø–æ—Ä—Ç, —Ç–∞–∫–∏–º –ø—Ä–æ—Ü–µ—Å–æ–º –±—É–¥–µ **TLS Termination Proxy**.

TLS Termination Proxy –º–∞—Ç–∏–º–µ –¥–æ—Å—Ç—É–ø –¥–æ –æ–¥–Ω–æ–≥–æ –∞–±–æ –∫—ñ–ª—å–∫–æ—Ö **TLS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤** (HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤).

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –æ–ø–∏—Å–∞–Ω–µ –≤–∏—â–µ **—Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è SNI**, TLS Termination Proxy –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å, —è–∫–∏–π —ñ–∑ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö TLS (HTTPS) —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ —Å–ª—ñ–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –¥–ª—è —Ü—å–æ–≥–æ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è ‚Äî –æ–±—Ä–∞–≤—à–∏ —Ç–æ–π, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –¥–æ–º–µ–Ω—É, —è–∫–∏–π –æ—á—ñ–∫—É—î –∫–ª—ñ—î–Ω—Ç.

–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –¥–ª—è `someapp.example.com`.

<img src="/img/deployment/https/https03.drawio.svg">

–ö–ª—ñ—î–Ω—Ç —É–∂–µ **–¥–æ–≤—ñ—Ä—è—î** –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó, —è–∫–∞ –∑–≥–µ–Ω–µ—Ä—É–≤–∞–ª–∞ —Ü–µ–π TLS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç (—É —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É Let's Encrypt, –∞–ª–µ –ø—Ä–æ —Ü–µ –±—É–¥–µ –ø—ñ–∑–Ω—ñ—à–µ), —Ç–æ–∂ –≤—ñ–Ω –º–æ–∂–µ **–ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏**, —â–æ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç –¥—ñ–π—Å–Ω–∏–π.

–î–∞–ª—ñ, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç, –∫–ª—ñ—î–Ω—Ç —ñ TLS Termination Proxy **—É–∑–≥–æ–¥–∂—É—é—Ç—å, —è–∫ —à–∏—Ñ—Ä—É–≤–∞—Ç–∏** —Ä–µ—à—Ç—É **TCP-–æ–±–º—ñ–Ω—É**. –ù–∞ —Ü—å–æ–º—É —á–∞—Å—Ç–∏–Ω–∞ **TLS Handshake** –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è.

–ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –∫–ª—ñ—î–Ω—Ç —ñ —Å–µ—Ä–≤–µ—Ä –º–∞—é—Ç—å **–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–µ TCP-–∑‚Äô—î–¥–Ω–∞–Ω–Ω—è** ‚Äî —Å–∞–º–µ —Ü–µ –Ω–∞–¥–∞—î TLS. –ê –ø–æ—Ç—ñ–º –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü–µ –∑‚Äô—î–¥–Ω–∞–Ω–Ω—è, —â–æ–± –ø–æ—á–∞—Ç–∏ —Ñ–∞–∫—Ç–∏—á–Ω—É **HTTP-–≤–∑–∞—î–º–æ–¥—ñ—é**.

–Ü —Ü–µ –π —î **HTTPS**: –∑–≤–∏—á–∞–π–Ω–∏–π **HTTP** –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ **–∑–∞—Ö–∏—â–µ–Ω–æ–≥–æ TLS-–∑‚Äô—î–¥–Ω–∞–Ω–Ω—è** –∑–∞–º—ñ—Å—Ç—å —á–∏—Å—Ç–æ–≥–æ (–Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ–≥–æ) TCP-–∑‚Äô—î–¥–Ω–∞–Ω–Ω—è.

/// tip | –ü–æ—Ä–∞–¥–∞

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É, —â–æ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞ **—Ä—ñ–≤–Ω—ñ TCP**, –∞ –Ω–µ –Ω–∞ —Ä—ñ–≤–Ω—ñ HTTP.

///

### HTTPS-–∑–∞–ø–∏—Ç { #https-request }

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –∫–ª—ñ—î–Ω—Ç —ñ —Å–µ—Ä–≤–µ—Ä (–∑–æ–∫—Ä–µ–º–∞ –±—Ä–∞—É–∑–µ—Ä —ñ TLS Termination Proxy) –º–∞—é—Ç—å **–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–µ TCP-–∑‚Äô—î–¥–Ω–∞–Ω–Ω—è**, –≤–æ–Ω–∏ –º–æ–∂—É—Ç—å –ø–æ—á–∞—Ç–∏ **HTTP-–≤–∑–∞—î–º–æ–¥—ñ—é**.

–¢–æ–∂ –∫–ª—ñ—î–Ω—Ç –Ω–∞–¥—Å–∏–ª–∞—î **HTTPS-–∑–∞–ø–∏—Ç**. –¶–µ –ø—Ä–æ—Å—Ç–æ HTTP-–∑–∞–ø–∏—Ç —á–µ—Ä–µ–∑ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–µ TLS-–∑‚Äô—î–¥–Ω–∞–Ω–Ω—è.

<img src="/img/deployment/https/https04.drawio.svg">

### –†–æ–∑—à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É { #decrypt-the-request }

TLS Termination Proxy –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏–º–µ —É–∑–≥–æ–¥–∂–µ–Ω–µ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è, —â–æ–± **—Ä–æ–∑—à–∏—Ñ—Ä—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç**, —ñ –ø–µ—Ä–µ–¥–∞—Å—Ç—å **–∑–≤–∏—á–∞–π–Ω–∏–π (—Ä–æ–∑—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π) HTTP-–∑–∞–ø–∏—Ç** –¥–æ –ø—Ä–æ—Ü–µ—Å—É, —è–∫–∏–π –∑–∞–ø—É—Å–∫–∞—î –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—Ä–æ—Ü–µ—Å —ñ–∑ Uvicorn, —â–æ –∑–∞–ø—É—Å–∫–∞—î –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ FastAPI).

<img src="/img/deployment/https/https05.drawio.svg">

### HTTP-–≤—ñ–¥–ø–æ–≤—ñ–¥—å { #http-response }

–ó–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –æ–±—Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç —ñ –Ω–∞–¥—ñ—à–ª–µ **–∑–≤–∏—á–∞–π–Ω—É (–Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—É) HTTP-–≤—ñ–¥–ø–æ–≤—ñ–¥—å** –¥–æ TLS Termination Proxy.

<img src="/img/deployment/https/https06.drawio.svg">

### HTTPS-–≤—ñ–¥–ø–æ–≤—ñ–¥—å { #https-response }

–î–∞–ª—ñ TLS Termination Proxy **–∑–∞—à–∏—Ñ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —É–∑–≥–æ–¥–∂–µ–Ω—É —Ä–∞–Ω—ñ—à–µ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—é (—â–æ –ø–æ—á–∞–ª–∞—Å—è —ñ–∑ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞ –¥–ª—è `someapp.example.com`), —ñ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å —ó—ó –Ω–∞–∑–∞–¥ —É –±—Ä–∞—É–∑–µ—Ä.

–ü–æ—Ç—ñ–º –±—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –¥—ñ–π—Å–Ω–∞ –π –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏–º –∫–ª—é—á–µ–º —Ç–æ—â–æ. –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ –≤—ñ–Ω **—Ä–æ–∑—à–∏—Ñ—Ä—É—î –≤—ñ–¥–ø–æ–≤—ñ–¥—å** —ñ –æ–±—Ä–æ–±–∏—Ç—å —ó—ó.

<img src="/img/deployment/https/https07.drawio.svg">

–ö–ª—ñ—î–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä) –∑–Ω–∞—Ç–∏–º–µ, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞–¥—Ö–æ–¥–∏—Ç—å –≤—ñ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—è, —è–∫—É –≤–æ–Ω–∏ —É–∑–≥–æ–¥–∏–ª–∏ —Ä–∞–Ω—ñ—à–µ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é **HTTPS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞**.

### –ö—ñ–ª—å–∫–∞ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ { #multiple-applications }

–ù–∞ —Ç–æ–º—É —Å–∞–º–æ–º—É —Å–µ—Ä–≤–µ—Ä—ñ (–∞–±–æ —Å–µ—Ä–≤–µ—Ä–∞—Ö) –º–æ–∂–µ –±—É—Ç–∏ **–∫—ñ–ª—å–∫–∞ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤**, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —ñ–Ω—à—ñ API-–ø—Ä–æ–≥—Ä–∞–º–∏ –∞–±–æ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö.

–õ–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ IP —ñ –ø–æ—Ä—Ç (—É –Ω–∞—à–æ–º—É –ø—Ä–∏–∫–ª–∞–¥—ñ ‚Äî TLS Termination Proxy), –∞–ª–µ —ñ–Ω—à—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏/–ø—Ä–æ—Ü–µ—Å–∏ —Ç–∞–∫–æ–∂ –º–æ–∂—É—Ç—å –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ(–∞—Ö), –¥–æ–∫–∏ –≤–æ–Ω–∏ –Ω–µ –Ω–∞–º–∞–≥–∞—é—Ç—å—Å—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ç—É —Å–∞–º—É **–∫–æ–º–±—ñ–Ω–∞—Ü—ñ—é –ø—É–±–ª—ñ—á–Ω–æ—ó IP-–∞–¥—Ä–µ—Å–∏ —Ç–∞ –ø–æ—Ä—Ç—É**.

<img src="/img/deployment/https/https08.drawio.svg">

–¢–∞–∫–∏–º —á–∏–Ω–æ–º TLS Termination Proxy –º–æ–∂–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ HTTPS —ñ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –¥–ª—è **–∫—ñ–ª—å–∫–æ—Ö –¥–æ–º–µ–Ω—ñ–≤**, –¥–ª—è –∫—ñ–ª—å–∫–æ—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤, –∞ –ø–æ—Ç—ñ–º –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –¥–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É –≤ –∫–æ–∂–Ω–æ–º—É –≤–∏–ø–∞–¥–∫—É.

### –ü–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤ { #certificate-renewal }

–£ –ø–µ–≤–Ω–∏–π –º–æ–º–µ–Ω—Ç —É –º–∞–π–±—É—Ç–Ω—å–æ–º—É –∫–æ–∂–µ–Ω —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç **–∑–∞–∫—ñ–Ω—á–∏—Ç—å—Å—è** (–ø—Ä–∏–±–ª–∏–∑–Ω–æ —á–µ—Ä–µ–∑ 3 –º—ñ—Å—è—Ü—ñ –ø—ñ—Å–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è).

–Ü —Ç–æ–¥—ñ —ñ–Ω—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ (—É –¥–µ—è–∫–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö —Ü–µ —ñ–Ω—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞, —É –¥–µ—è–∫–∏—Ö ‚Äî —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ —Ç–æ–π —Å–∞–º–∏–π TLS Termination Proxy) –∑–≤‚Äô—è–∂–µ—Ç—å—Å—è –∑ Let's Encrypt —ñ –ø–æ–Ω–æ–≤–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç(–∏).

<img src="/img/deployment/https/https.drawio.svg">

**TLS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏** **–ø—Ä–∏–≤‚Äô—è–∑–∞–Ω—ñ –¥–æ –¥–æ–º–µ–Ω–Ω–æ–≥–æ —ñ–º–µ–Ω—ñ**, –∞ –Ω–µ –¥–æ IP-–∞–¥—Ä–µ—Å–∏.

–¢–æ–º—É, —â–æ–± –ø–æ–Ω–æ–≤–∏—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏, –ø—Ä–æ–≥—Ä–∞–º–∞ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—î **–¥–æ–≤–µ—Å—Ç–∏** —Ü–µ–Ω—Ç—Ä—É —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (Let's Encrypt), —â–æ –≤–æ–Ω–∞ —Å–ø—Ä–∞–≤–¥—ñ **¬´–≤–æ–ª–æ–¥—ñ—î¬ª —ñ –∫–æ–Ω—Ç—Ä–æ–ª—é—î —Ü–µ–π –¥–æ–º–µ–Ω**.

–î–ª—è —Ü—å–æ–≥–æ, –∞ —Ç–∞–∫–æ–∂ —â–æ–± –∑–∞–¥–æ–≤–æ–ª—å–Ω–∏—Ç–∏ –ø–æ—Ç—Ä–µ–±–∏ —Ä—ñ–∑–Ω–∏—Ö –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤, —î –∫—ñ–ª—å–∫–∞ —Å–ø–æ—Å–æ–±—ñ–≤. –ü–æ–ø—É–ª—è—Ä–Ω—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏:

* **–ó–º—ñ–Ω–∏—Ç–∏ –¥–µ—è–∫—ñ DNS-–∑–∞–ø–∏—Å–∏**.
    * –î–ª—è —Ü—å–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–∞ –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –º–∞—î –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ API DNS-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —Ç–æ–∂ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ DNS —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –∞–±–æ –Ω–µ –±—É—Ç–∏ –º–æ–∂–ª–∏–≤–∏–º.
* **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ —è–∫ —Å–µ—Ä–≤–µ—Ä** (–ø—Ä–∏–Ω–∞–π–º–Ω—ñ –Ω–∞ —á–∞—Å –ø—Ä–æ—Ü–µ—Å—É –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∞) –Ω–∞ –ø—É–±–ª—ñ—á–Ω—ñ–π IP-–∞–¥—Ä–µ—Å—ñ, –ø–æ–≤‚Äô—è–∑–∞–Ω—ñ–π —ñ–∑ –¥–æ–º–µ–Ω–æ–º.
    * –Ø–∫ –º–∏ –∫–∞–∑–∞–ª–∏ –≤–∏—â–µ, –ª–∏—à–µ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å –º–æ–∂–µ —Å–ª—É—Ö–∞—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ IP —ñ –ø–æ—Ä—Ç.
    * –¶–µ –æ–¥–Ω–∞ –∑ –ø—Ä–∏—á–∏–Ω, —á–æ–º—É –¥—É–∂–µ –∫–æ—Ä–∏—Å–Ω–æ, –∫–æ–ª–∏ —Ç–æ–π —Å–∞–º–∏–π TLS Termination Proxy —Ç–∞–∫–æ–∂ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø—Ä–æ—Ü–µ—Å –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤.
    * –Ü–Ω–∞–∫—à–µ –≤–∞–º, –º–æ–∂–ª–∏–≤–æ, –¥–æ–≤–µ–¥–µ—Ç—å—Å—è —Ç–∏–º—á–∞—Å–æ–≤–æ –∑—É–ø–∏–Ω–∏—Ç–∏ TLS Termination Proxy, –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏, –ø–æ—Ç—ñ–º –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —ó—Ö —É TLS Termination Proxy —ñ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ TLS Termination Proxy. –¶–µ –Ω–µ—ñ–¥–µ–∞–ª—å–Ω–æ, –±–æ –≤–∞—à—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏ –Ω–µ –±—É–¥—É—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ñ –≤ —Ç–æ–π —á–∞—Å, –∫–æ–ª–∏ TLS Termination Proxy –≤–∏–º–∫–Ω–µ–Ω–∏–π.

–£–≤–µ—Å—å —Ü–µ–π –ø—Ä–æ—Ü–µ—Å –ø–æ–Ω–æ–≤–ª–µ–Ω–Ω—è, –ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –∑ –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è–º –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, ‚Äî –æ–¥–Ω–∞ –∑ –≥–æ–ª–æ–≤–Ω–∏—Ö –ø—Ä–∏—á–∏–Ω, —á–æ–º—É –≤–∞—Ä—Ç–æ –º–∞—Ç–∏ **–æ–∫—Ä–µ–º—É —Å–∏—Å—Ç–µ–º—É –¥–ª—è –æ–±—Ä–æ–±–∫–∏ HTTPS** —ñ–∑ TLS Termination Proxy, –∑–∞–º—ñ—Å—Ç—å —Ç–æ–≥–æ —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ TLS-—Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–∏ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –≤ application server (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Uvicorn).

## –ü—Ä–æ–∫—Å—ñ–π–æ–≤–∞–Ω—ñ forwarded headers { #proxy-forwarded-headers }

–ö–æ–ª–∏ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ø—Ä–æ–∫—Å—ñ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ HTTPS, –≤–∞—à **application server** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ Uvicorn —á–µ—Ä–µ–∑ FastAPI CLI) –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞—î –ø—Ä–æ –ø—Ä–æ—Ü–µ—Å HTTPS —ñ —Å–ø—ñ–ª–∫—É—î—Ç—å—Å—è –∑–≤–∏—á–∞–π–Ω–∏–º HTTP —ñ–∑ **TLS Termination Proxy**.

–¶–µ–π **proxy** –∑–∞–∑–≤–∏—á–∞–π ¬´–Ω–∞ –ª—å–æ—Ç—É¬ª –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î –¥–µ—è–∫—ñ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø–µ—Ä–µ–¥ —Ç–∏–º, —è–∫ –ø–µ—Ä–µ–¥–∞—Ç–∏ –∑–∞–ø–∏—Ç –¥–æ **application server**, —â–æ–± –¥–∞—Ç–∏ application server –∑–Ω–∞—Ç–∏, —â–æ –∑–∞–ø–∏—Ç **–ø—Ä–æ–∫—Å—ñ–π–æ–≤–∞–Ω–æ** —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å—ñ.

/// note | –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

–ó–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ–∫—Å—ñ:

* <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-For" class="external-link" target="_blank">X-Forwarded-For</a>
* <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-Proto" class="external-link" target="_blank">X-Forwarded-Proto</a>
* <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Headers/X-Forwarded-Host" class="external-link" target="_blank">X-Forwarded-Host</a>

///

–ü–æ–ø—Ä–∏ —Ü–µ, –æ—Å–∫—ñ–ª—å–∫–∏ **application server** –Ω–µ –∑–Ω–∞—î, —â–æ –≤—ñ–Ω —Å—Ç–æ—ó—Ç—å –∑–∞ –¥–æ–≤—ñ—Ä–µ–Ω–∏–º **proxy**, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –≤—ñ–Ω –Ω–µ –¥–æ–≤—ñ—Ä—è—Ç–∏–º–µ —Ü–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∞–º.

–ê–ª–µ –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ **application server** —Ç–∞–∫, —â–æ–± –≤—ñ–Ω –¥–æ–≤—ñ—Ä—è–≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º *forwarded*, —è–∫—ñ –Ω–∞–¥—Å–∏–ª–∞—î **proxy**. –Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ FastAPI CLI, –≤–∏ –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ *CLI Option* `--forwarded-allow-ips`, —â–æ–± –≤–∫–∞–∑–∞—Ç–∏, –∑ —è–∫–∏—Ö IP –≤—ñ–Ω –º–∞—î –¥–æ–≤—ñ—Ä—è—Ç–∏ —Ü–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∞–º *forwarded*.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, —è–∫—â–æ **application server** –æ—Ç—Ä–∏–º—É—î –∑–∞–ø–∏—Ç–∏ –ª–∏—à–µ –≤—ñ–¥ –¥–æ–≤—ñ—Ä–µ–Ω–æ–≥–æ **proxy**, –≤–∏ –º–æ–∂–µ—Ç–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ `--forwarded-allow-ips="*"`, —â–æ–± –¥–æ–≤—ñ—Ä—è—Ç–∏ –≤—Å—ñ–º –≤—Ö—ñ–¥–Ω–∏–º IP, –∞–¥–∂–µ –≤—ñ–Ω –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏–º–µ –∑–∞–ø–∏—Ç–∏ –ª–∏—à–µ –∑ IP, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **proxy**.

–¢–∞–∫ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –∑–º–æ–∂–µ –∑–Ω–∞—Ç–∏ —Å–≤–æ—é –≤–ª–∞—Å–Ω—É –ø—É–±–ª—ñ—á–Ω—É URL-–∞–¥—Ä–µ—Å—É, —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤—ñ–Ω HTTPS, –¥–æ–º–µ–Ω —Ç–æ—â–æ.

–¶–µ –±—É–¥–µ –∫–æ—Ä–∏—Å–Ω–æ, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —â–æ–± –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è.

/// tip | –ü–æ—Ä–∞–¥–∞

–î–æ–∫–ª–∞–¥–Ω—ñ—à–µ –¥–∏–≤—ñ—Ç—å—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó: [–ó–∞ –ø—Ä–æ–∫—Å—ñ ‚Äî —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è Proxy Forwarded Headers](../advanced/behind-a-proxy.md#enable-proxy-forwarded-headers){.internal-link target=_blank}

///

## –ü—ñ–¥—Å—É–º–æ–∫ { #recap }

–ù–∞—è–≤–Ω—ñ—Å—Ç—å **HTTPS** –¥—É–∂–µ –≤–∞–∂–ª–∏–≤–∞ —ñ –≤ –±—ñ–ª—å—à–æ—Å—Ç—ñ –≤–∏–ø–∞–¥–∫—ñ–≤ —î **–∫—Ä–∏—Ç–∏—á–Ω–æ—é**. –ü–µ—Ä–µ–≤–∞–∂–Ω–æ –∑—É—Å–∏–ª–ª—è, —è–∫—ñ –≤–∞–º —è–∫ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–∫–ª–∞—Å—Ç–∏ —â–æ–¥–æ HTTPS, –∑–≤–æ–¥—è—Ç—å—Å—è –¥–æ **—Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ü–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü—ñ–π** —ñ —Ç–æ–≥–æ, —è–∫ –≤–æ–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å.

–ê–ª–µ —â–æ–π–Ω–æ –≤–∏ –∑–Ω–∞—î—Ç–µ –±–∞–∑–æ–≤—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ **HTTPS –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤**, –≤–∏ –º–æ–∂–µ—Ç–µ –ª–µ–≥–∫–æ –ø–æ—î–¥–Ω—É–≤–∞—Ç–∏ –π –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —â–æ–± –∫–µ—Ä—É–≤–∞—Ç–∏ –≤—Å—ñ–º —É –ø—Ä–æ—Å—Ç–∏–π —Å–ø–æ—Å—ñ–±.

–£ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ä–æ–∑–¥—ñ–ª–∞—Ö —è –ø–æ–∫–∞–∂—É –∫—ñ–ª—å–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –ø—Ä–∏–∫–ª–∞–¥—ñ–≤, —è–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ **HTTPS** –¥–ª—è –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤ **FastAPI**. üîí
